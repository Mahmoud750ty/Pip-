function aO(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function kw(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Am={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Pw(){if(Hv)return Ul;Hv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Ul.Fragment=e,Ul.jsx=t,Ul.jsxs=t,Ul}var Fv;function Mw(){return Fv||(Fv=1,Am.exports=Pw()),Am.exports}var T=Mw(),Sm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gv;function Vw(){if(Gv)return Re;Gv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),A=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,L={};function U(O,te,oe){this.props=O,this.context=te,this.refs=L,this.updater=oe||N}U.prototype.isReactComponent={},U.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function q(){}q.prototype=U.prototype;function X(O,te,oe){this.props=O,this.context=te,this.refs=L,this.updater=oe||N}var re=X.prototype=new q;re.constructor=X,x(re,U.prototype),re.isPureReactComponent=!0;var ue=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ye=Object.prototype.hasOwnProperty;function k(O,te,oe,se,me,Ie){return oe=Ie.ref,{$$typeof:i,type:O,key:te,ref:oe!==void 0?oe:null,props:Ie}}function R(O,te){return k(O.type,te,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function P(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(oe){return te[oe]})}var V=/\/+/g;function z(O,te){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):te.toString(36)}function D(){}function At(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(D,D):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function tt(O,te,oe,se,me){var Ie=typeof O;(Ie==="undefined"||Ie==="boolean")&&(O=null);var Ae=!1;if(O===null)Ae=!0;else switch(Ie){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(O.$$typeof){case i:case e:Ae=!0;break;case v:return Ae=O._init,tt(Ae(O._payload),te,oe,se,me)}}if(Ae)return me=me(O),Ae=se===""?"."+z(O,0):se,ue(me)?(oe="",Ae!=null&&(oe=Ae.replace(V,"$&/")+"/"),tt(me,te,oe,"",function(ei){return ei})):me!=null&&(I(me)&&(me=R(me,oe+(me.key==null||O&&O.key===me.key?"":(""+me.key).replace(V,"$&/")+"/")+Ae)),te.push(me)),1;Ae=0;var Dt=se===""?".":se+":";if(ue(O))for(var Je=0;Je<O.length;Je++)se=O[Je],Ie=Dt+z(se,Je),Ae+=tt(se,te,oe,Ie,me);else if(Je=b(O),typeof Je=="function")for(O=Je.call(O),Je=0;!(se=O.next()).done;)se=se.value,Ie=Dt+z(se,Je++),Ae+=tt(se,te,oe,Ie,me);else if(Ie==="object"){if(typeof O.then=="function")return tt(At(O),te,oe,se,me);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function W(O,te,oe){if(O==null)return O;var se=[],me=0;return tt(O,se,"","",function(Ie){return te.call(oe,Ie,me++)}),se}function G(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(oe){(O._status===0||O._status===-1)&&(O._status=1,O._result=oe)},function(oe){(O._status===0||O._status===-1)&&(O._status=2,O._result=oe)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var ce=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function xe(){}return Re.Children={map:W,forEach:function(O,te,oe){W(O,function(){te.apply(this,arguments)},oe)},count:function(O){var te=0;return W(O,function(){te++}),te},toArray:function(O){return W(O,function(te){return te})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Re.Component=U,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=X,Re.StrictMode=s,Re.Suspense=p,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Re.__COMPILER_RUNTIME={__proto__:null,c:function(O){return ae.H.useMemoCache(O)}},Re.cache=function(O){return function(){return O.apply(null,arguments)}},Re.cloneElement=function(O,te,oe){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=x({},O.props),me=O.key,Ie=void 0;if(te!=null)for(Ae in te.ref!==void 0&&(Ie=void 0),te.key!==void 0&&(me=""+te.key),te)!ye.call(te,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&te.ref===void 0||(se[Ae]=te[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=oe;else if(1<Ae){for(var Dt=Array(Ae),Je=0;Je<Ae;Je++)Dt[Je]=arguments[Je+2];se.children=Dt}return k(O.type,me,void 0,void 0,Ie,se)},Re.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Re.createElement=function(O,te,oe){var se,me={},Ie=null;if(te!=null)for(se in te.key!==void 0&&(Ie=""+te.key),te)ye.call(te,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=te[se]);var Ae=arguments.length-2;if(Ae===1)me.children=oe;else if(1<Ae){for(var Dt=Array(Ae),Je=0;Je<Ae;Je++)Dt[Je]=arguments[Je+2];me.children=Dt}if(O&&O.defaultProps)for(se in Ae=O.defaultProps,Ae)me[se]===void 0&&(me[se]=Ae[se]);return k(O,Ie,void 0,void 0,null,me)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:m,render:O}},Re.isValidElement=I,Re.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:G}},Re.memo=function(O,te){return{$$typeof:g,type:O,compare:te===void 0?null:te}},Re.startTransition=function(O){var te=ae.T,oe={};ae.T=oe;try{var se=O(),me=ae.S;me!==null&&me(oe,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(xe,ce)}catch(Ie){ce(Ie)}finally{ae.T=te}},Re.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Re.use=function(O){return ae.H.use(O)},Re.useActionState=function(O,te,oe){return ae.H.useActionState(O,te,oe)},Re.useCallback=function(O,te){return ae.H.useCallback(O,te)},Re.useContext=function(O){return ae.H.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O,te){return ae.H.useDeferredValue(O,te)},Re.useEffect=function(O,te,oe){var se=ae.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(O,te)},Re.useId=function(){return ae.H.useId()},Re.useImperativeHandle=function(O,te,oe){return ae.H.useImperativeHandle(O,te,oe)},Re.useInsertionEffect=function(O,te){return ae.H.useInsertionEffect(O,te)},Re.useLayoutEffect=function(O,te){return ae.H.useLayoutEffect(O,te)},Re.useMemo=function(O,te){return ae.H.useMemo(O,te)},Re.useOptimistic=function(O,te){return ae.H.useOptimistic(O,te)},Re.useReducer=function(O,te,oe){return ae.H.useReducer(O,te,oe)},Re.useRef=function(O){return ae.H.useRef(O)},Re.useState=function(O){return ae.H.useState(O)},Re.useSyncExternalStore=function(O,te,oe){return ae.H.useSyncExternalStore(O,te,oe)},Re.useTransition=function(){return ae.H.useTransition()},Re.version="19.1.0",Re}var Yv;function Ep(){return Yv||(Yv=1,Sm.exports=Vw()),Sm.exports}var H=Ep();const Qs=kw(H);var Rm={exports:{}},jl={},xm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function Lw(){return $v||($v=1,function(i){function e(W,G){var ce=W.length;W.push(G);e:for(;0<ce;){var xe=ce-1>>>1,O=W[xe];if(0<o(O,G))W[xe]=G,W[ce]=O,ce=xe;else break e}}function t(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var G=W[0],ce=W.pop();if(ce!==G){W[0]=ce;e:for(var xe=0,O=W.length,te=O>>>1;xe<te;){var oe=2*(xe+1)-1,se=W[oe],me=oe+1,Ie=W[me];if(0>o(se,ce))me<O&&0>o(Ie,se)?(W[xe]=Ie,W[me]=ce,xe=me):(W[xe]=se,W[oe]=ce,xe=oe);else if(me<O&&0>o(Ie,ce))W[xe]=Ie,W[me]=ce,xe=me;else break e}}return G}function o(W,G){var ce=W.sortIndex-G.sortIndex;return ce!==0?ce:W.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],g=[],v=1,A=null,b=3,N=!1,x=!1,L=!1,U=!1,q=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ue(W){for(var G=t(g);G!==null;){if(G.callback===null)s(g);else if(G.startTime<=W)s(g),G.sortIndex=G.expirationTime,e(p,G);else break;G=t(g)}}function ae(W){if(L=!1,ue(W),!x)if(t(p)!==null)x=!0,ye||(ye=!0,z());else{var G=t(g);G!==null&&tt(ae,G.startTime-W)}}var ye=!1,k=-1,R=5,I=-1;function P(){return U?!0:!(i.unstable_now()-I<R)}function V(){if(U=!1,ye){var W=i.unstable_now();I=W;var G=!0;try{e:{x=!1,L&&(L=!1,X(k),k=-1),N=!0;var ce=b;try{t:{for(ue(W),A=t(p);A!==null&&!(A.expirationTime>W&&P());){var xe=A.callback;if(typeof xe=="function"){A.callback=null,b=A.priorityLevel;var O=xe(A.expirationTime<=W);if(W=i.unstable_now(),typeof O=="function"){A.callback=O,ue(W),G=!0;break t}A===t(p)&&s(p),ue(W)}else s(p);A=t(p)}if(A!==null)G=!0;else{var te=t(g);te!==null&&tt(ae,te.startTime-W),G=!1}}break e}finally{A=null,b=ce,N=!1}G=void 0}}finally{G?z():ye=!1}}}var z;if(typeof re=="function")z=function(){re(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,At=D.port2;D.port1.onmessage=V,z=function(){At.postMessage(null)}}else z=function(){q(V,0)};function tt(W,G){k=q(function(){W(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(W){W.callback=null},i.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(W){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var ce=b;b=G;try{return W()}finally{b=ce}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(W,G){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ce=b;b=W;try{return G()}finally{b=ce}},i.unstable_scheduleCallback=function(W,G,ce){var xe=i.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?xe+ce:xe):ce=xe,W){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ce+O,W={id:v++,callback:G,priorityLevel:W,startTime:ce,expirationTime:O,sortIndex:-1},ce>xe?(W.sortIndex=ce,e(g,W),t(p)===null&&W===t(g)&&(L?(X(k),k=-1):L=!0,tt(ae,ce-xe))):(W.sortIndex=O,e(p,W),x||N||(x=!0,ye||(ye=!0,z()))),W},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(W){var G=b;return function(){var ce=b;b=G;try{return W.apply(this,arguments)}finally{b=ce}}}}(Im)),Im}var Kv;function Uw(){return Kv||(Kv=1,xm.exports=Lw()),xm.exports}var Cm={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function jw(){if(Qv)return Xt;Qv=1;var i=Ep();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:p,containerInfo:g,implementation:v}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,v)},Xt.flushSync=function(p){var g=h.T,v=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=g,s.p=v,s.d.f()}},Xt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},Xt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Xt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,A=m(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:N}):v==="script"&&s.d.X(p,{crossOrigin:A,integrity:b,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Xt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},Xt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,A=m(v,g.crossOrigin);s.d.L(p,v,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Xt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},Xt.requestFormReset=function(p){s.d.r(p)},Xt.unstable_batchedUpdates=function(p,g){return p(g)},Xt.useFormState=function(p,g,v){return h.H.useFormState(p,g,v)},Xt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Xt.version="19.1.0",Xt}var Xv;function zw(){if(Xv)return Cm.exports;Xv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Cm.exports=jw(),Cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function Bw(){if(Wv)return jl;Wv=1;var i=Uw(),e=Ep(),t=zw();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),n;if(d===l)return m(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var E=!1,w=f.child;w;){if(w===a){E=!0,a=f,l=d;break}if(w===l){E=!0,l=f,a=d;break}w=w.sibling}if(!E){for(w=d.child;w;){if(w===a){E=!0,a=d,l=f;break}if(w===l){E=!0,l=d,a=f;break}w=w.sibling}if(!E)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function g(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=g(n),r!==null)return r;n=n.sibling}return null}var v=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function At(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case U:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case ye:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case re:return(n.displayName||"Context")+".Provider";case X:return(n._context.displayName||"Context")+".Consumer";case ue:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return r=n.displayName||null,r!==null?r:At(n.type)||"Memo";case R:r=n._payload,n=n._init;try{return At(n(r))}catch(a){}}return null}var tt=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},xe=[],O=-1;function te(n){return{current:n}}function oe(n){0>O||(n.current=xe[O],xe[O]=null,O--)}function se(n,r){O++,xe[O]=n.current,n.current=r}var me=te(null),Ie=te(null),Ae=te(null),Dt=te(null);function Je(n,r){switch(se(Ae,r),se(Ie,n),se(me,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?yv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=yv(r),n=_v(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oe(me),se(me,n)}function ei(){oe(me),oe(Ie),oe(Ae)}function lr(n){n.memoizedState!==null&&se(Dt,n);var r=me.current,a=_v(r,n.type);r!==a&&(se(Ie,n),se(me,a))}function Si(n){Ie.current===n&&(oe(me),oe(Ie)),Dt.current===n&&(oe(Dt),kl._currentValue=ce)}var cs=Object.prototype.hasOwnProperty,hs=i.unstable_scheduleCallback,fs=i.unstable_cancelCallback,No=i.unstable_shouldYield,Vu=i.unstable_requestPaint,xn=i.unstable_now,Af=i.unstable_getCurrentPriorityLevel,Do=i.unstable_ImmediatePriority,la=i.unstable_UserBlockingPriority,ds=i.unstable_NormalPriority,Sf=i.unstable_LowPriority,ua=i.unstable_IdlePriority,Oo=i.log,Lu=i.unstable_setDisableYieldValue,lt=null,Fe=null;function pn(n){if(typeof Oo=="function"&&Lu(n),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(lt,n)}catch(r){}}var Kt=Math.clz32?Math.clz32:ms,Uu=Math.log,Rf=Math.LN2;function ms(n){return n>>>=0,n===0?32:31-(Uu(n)/Rf|0)|0}var ps=256,gs=4194304;function qn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ca(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,d=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~d,l!==0?f=qn(l):(E&=w,E!==0?f=qn(E):a||(a=w&~n,a!==0&&(f=qn(a))))):(w=l&~d,w!==0?f=qn(w):E!==0?f=qn(E):a||(a=l&~n,a!==0&&(f=qn(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function ys(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ko(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(){var n=ps;return ps<<=1,(ps&4194048)===0&&(ps=256),n}function Mo(){var n=gs;return gs<<=1,(gs&62914560)===0&&(gs=4194304),n}function Ri(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function xi(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Vo(n,r,a,l,f,d){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,C=n.expirationTimes,Y=n.hiddenUpdates;for(a=E&~a;0<a;){var Z=31-Kt(a),ne=1<<Z;w[Z]=0,C[Z]=-1;var $=Y[Z];if($!==null)for(Y[Z]=null,Z=0;Z<$.length;Z++){var K=$[Z];K!==null&&(K.lane&=-536870913)}a&=~ne}l!==0&&ti(n,l,0),d!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=d&~(E&~r))}function ti(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-Kt(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Lo(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-Kt(a),f=1<<l;f&r|n[l]&r&&(n[l]|=r),a&=~f}}function ur(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ha(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function cr(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:Lv(n.type))}function ju(n,r){var a=G.p;try{return G.p=n,r()}finally{G.p=a}}var nt=Math.random().toString(36).slice(2),St="__reactFiber$"+nt,yt="__reactProps$"+nt,In="__reactContainer$"+nt,Uo="__reactEvents$"+nt,xf="__reactListeners$"+nt,hr="__reactHandles$"+nt,zu="__reactResources$"+nt,_s="__reactMarker$"+nt;function fr(n){delete n[St],delete n[yt],delete n[Uo],delete n[xf],delete n[hr]}function Ii(n){var r=n[St];if(r)return r;for(var a=n.parentNode;a;){if(r=a[In]||a[St]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=bv(n);n!==null;){if(a=n[St])return a;n=bv(n)}return r}n=a,a=n.parentNode}return null}function ni(n){if(n=n[St]||n[In]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function ii(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function nn(n){var r=n[zu];return r||(r=n[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function dt(n){n[_s]=!0}var jo=new Set,fa={};function Hn(n,r){Ci(n,r),Ci(n+"Capture",r)}function Ci(n,r){for(fa[n]=r,n=0;n<r.length;n++)jo.add(r[n])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qu={},vs={};function Hu(n){return cs.call(vs,n)?!0:cs.call(qu,n)?!1:Bu.test(n)?vs[n]=!0:(qu[n]=!0,!1)}function dr(n,r,a){if(Hu(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function ri(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function zt(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var Es,Fu;function Ni(n){if(Es===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Es=r&&r[1]||"",Fu=-1<a.stack.indexOf("\n    at")?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Es+n+Fu}var da=!1;function ma(n,r){if(!n||da)return"";da=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var $=K}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(K){$=K}n.call(ne.prototype)}}else{try{throw Error()}catch(K){$=K}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],w=d[1];if(E&&w){var C=E.split("\n"),Y=w.split("\n");for(f=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(l===C.length||f===Y.length)for(l=C.length-1,f=Y.length-1;1<=l&&0<=f&&C[l]!==Y[f];)f--;for(;1<=l&&0<=f;l--,f--)if(C[l]!==Y[f]){if(l!==1||f!==1)do if(l--,f--,0>f||C[l]!==Y[f]){var Z="\n"+C[l].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=l&&0<=f);break}}}finally{da=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ni(a):""}function zo(n){switch(n.tag){case 26:case 27:case 5:return Ni(n.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 15:return ma(n.type,!1);case 11:return ma(n.type.render,!1);case 1:return ma(n.type,!0);case 31:return Ni("Activity");default:return""}}function pa(n){try{var r="";do r+=zo(n),n=n.return;while(n);return r}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}function rn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function If(n){var r=Bo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,d=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ga(n){n._valueTracker||(n._valueTracker=If(n))}function qo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=Bo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function Ts(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch(r){return n.body}}var Cf=/[\n"\\]/g;function _t(n){return n.replace(Cf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function gn(n,r,a,l,f,d,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),r!=null?E==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+rn(r)):n.value!==""+rn(r)&&(n.value=""+rn(r)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),r!=null?mr(n,E,rn(r)):a!=null?mr(n,E,rn(a)):l!=null&&n.removeAttribute("value"),f==null&&d!=null&&(n.defaultChecked=!!d),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+rn(w):n.removeAttribute("name")}function bs(n,r,a,l,f,d,E,w){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(n.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null))return;a=a!=null?""+rn(a):"",r=r!=null?""+rn(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l!=null?l:f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function mr(n,r,a){r==="number"&&Ts(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Di(n,r,a,l){if(n=n.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=r.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+rn(a),r=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function $e(n,r,a){if(r!=null&&(r=""+rn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+rn(a):""}function ws(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(tt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=rn(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Cn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var As=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||As.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function Ho(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&Gu(n,f,l)}else for(var d in r)r.hasOwnProperty(d)&&Gu(n,d,r[d])}function Fo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Df=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ya(n){return Df.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Oi=null;function Nn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ki=null,Pi=null;function Go(n){var r=ni(n);if(r&&(n=r.stateNode)){var a=n[yt]||null;e:switch(n=r.stateNode,r.type){case"input":if(gn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var f=l[yt]||null;if(!f)throw Error(s(90));gn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&qo(l)}break e;case"textarea":$e(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Di(n,!!a.multiple,r,!1)}}}var si=!1;function Yu(n,r,a){if(si)return n(r,a);si=!0;try{var l=n(r);return l}finally{if(si=!1,(ki!==null||Pi!==null)&&(jc(),ki&&(r=ki,n=Pi,Pi=ki=null,Go(r),n)))for(r=0;r<n.length;r++)Go(n[r])}}function Ss(n,r){var a=n.stateNode;if(a===null)return null;var l=a[yt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dn=!1;if(Fn)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){Dn=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch(n){Dn=!1}var ai=null,pr=null,Mi=null;function Yo(){if(Mi)return Mi;var n,r=pr,a=r.length,l,f="value"in ai?ai.value:ai.textContent,d=f.length;for(n=0;n<a&&r[n]===f[n];n++);var E=a-n;for(l=1;l<=E&&r[a-l]===f[d-l];l++);return Mi=f.slice(n,1<l?1-l:void 0)}function oi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function li(){return!0}function $o(){return!1}function Ot(n){function r(a,l,f,d,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?li:$o,this.isPropagationStopped=$o,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=li)},persist:function(){},isPersistent:li}),r}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=Ot(He),xs=v({},He,{view:0,detail:0}),$u=Ot(xs),va,Ea,ui,Is=v({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ui&&(ui&&n.type==="mousemove"?(va=n.screenX-ui.screenX,Ea=n.screenY-ui.screenY):Ea=va=0,ui=n),va)},movementY:function(n){return"movementY"in n?n.movementY:Ea}}),On=Ot(Is),Ku=v({},Is,{dataTransfer:0}),Of=Ot(Ku),Cs=v({},xs,{relatedTarget:0}),Ta=Ot(Cs),Ko=v({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),ba=Ot(Ko),Qu=v({},He,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),wa=Ot(Qu),kf=v({},He,{data:0}),Qo=Ot(kf),Ns={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xo(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Wu[n])?!!r[n]:!1}function Ds(){return Xo}var Zu=v({},xs,{key:function(n){if(n.key){var r=Ns[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=oi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Xu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(n){return n.type==="keypress"?oi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?oi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Aa=Ot(Zu),Ju=v({},Is,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wo=Ot(Ju),Vi=v({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),ec=Ot(Vi),tc=v({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=Ot(tc),ic=v({},Is,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Sa=Ot(ic),sn=v({},He,{newState:0,oldState:0}),rc=Ot(sn),sc=[9,13,27,32],ci=Fn&&"CompositionEvent"in window,c=null;Fn&&"documentMode"in document&&(c=document.documentMode);var y=Fn&&"TextEvent"in window&&!c,_=Fn&&(!ci||c&&8<c&&11>=c),S=" ",B=!1;function Q(n,r){switch(n){case"keyup":return sc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ve=!1;function Rt(n,r){switch(n){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(B=!0,S);case"textInput":return n=r.data,n===S&&B?null:n;default:return null}}function Le(n,r){if(Ve)return n==="compositionend"||!ci&&Q(n,r)?(n=Yo(),Mi=pr=ai=null,Ve=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!kt[n.type]:r==="textarea"}function Li(n,r,a,l){ki?Pi?Pi.push(l):Pi=[l]:ki=l,r=Gc(r,"onChange"),0<r.length&&(a=new _a("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var Bt=null,hi=null;function Zo(n){fv(n,0)}function ac(n){var r=ii(n);if(qo(r))return n}function kg(n,r){if(n==="change")return r}var Pg=!1;if(Fn){var Pf;if(Fn){var Mf="oninput"in document;if(!Mf){var Mg=document.createElement("div");Mg.setAttribute("oninput","return;"),Mf=typeof Mg.oninput=="function"}Pf=Mf}else Pf=!1;Pg=Pf&&(!document.documentMode||9<document.documentMode)}function Vg(){Bt&&(Bt.detachEvent("onpropertychange",Lg),hi=Bt=null)}function Lg(n){if(n.propertyName==="value"&&ac(hi)){var r=[];Li(r,hi,n,Nn(n)),Yu(Zo,r)}}function u2(n,r,a){n==="focusin"?(Vg(),Bt=r,hi=a,Bt.attachEvent("onpropertychange",Lg)):n==="focusout"&&Vg()}function c2(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ac(hi)}function h2(n,r){if(n==="click")return ac(r)}function f2(n,r){if(n==="input"||n==="change")return ac(r)}function d2(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var yn=typeof Object.is=="function"?Object.is:d2;function Jo(n,r){if(yn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!cs.call(r,f)||!yn(n[f],r[f]))return!1}return!0}function Ug(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jg(n,r){var a=Ug(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ug(a)}}function zg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?zg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Bg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ts(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch(l){a=!1}if(a)n=r.contentWindow;else break;r=Ts(n.document)}return r}function Vf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var m2=Fn&&"documentMode"in document&&11>=document.documentMode,Ra=null,Lf=null,el=null,Uf=!1;function qg(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uf||Ra==null||Ra!==Ts(l)||(l=Ra,"selectionStart"in l&&Vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),el&&Jo(el,l)||(el=l,l=Gc(Lf,"onSelect"),0<l.length&&(r=new _a("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=Ra)))}function Os(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var xa={animationend:Os("Animation","AnimationEnd"),animationiteration:Os("Animation","AnimationIteration"),animationstart:Os("Animation","AnimationStart"),transitionrun:Os("Transition","TransitionRun"),transitionstart:Os("Transition","TransitionStart"),transitioncancel:Os("Transition","TransitionCancel"),transitionend:Os("Transition","TransitionEnd")},jf={},Hg={};Fn&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function ks(n){if(jf[n])return jf[n];if(!xa[n])return n;var r=xa[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Hg)return jf[n]=r[a];return n}var Fg=ks("animationend"),Gg=ks("animationiteration"),Yg=ks("animationstart"),p2=ks("transitionrun"),g2=ks("transitionstart"),y2=ks("transitioncancel"),$g=ks("transitionend"),Kg=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function Gn(n,r){Kg.set(n,r),Hn(r,[n])}var Qg=new WeakMap;function kn(n,r){if(typeof n=="object"&&n!==null){var a=Qg.get(n);return a!==void 0?a:(r={value:n,source:r,stack:pa(r)},Qg.set(n,r),r)}return{value:n,source:r,stack:pa(r)}}var Pn=[],Ia=0,Bf=0;function oc(){for(var n=Ia,r=Bf=Ia=0;r<n;){var a=Pn[r];Pn[r++]=null;var l=Pn[r];Pn[r++]=null;var f=Pn[r];Pn[r++]=null;var d=Pn[r];if(Pn[r++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&Xg(a,f,d)}}function lc(n,r,a,l){Pn[Ia++]=n,Pn[Ia++]=r,Pn[Ia++]=a,Pn[Ia++]=l,Bf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function qf(n,r,a,l){return lc(n,r,a,l),uc(n)}function Ca(n,r){return lc(n,null,null,r),uc(n)}function Xg(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=n.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(n=d.stateNode,n===null||n._visibility&1||(f=!0)),n=d,d=d.return;return n.tag===3?(d=n.stateNode,f&&r!==null&&(f=31-Kt(a),n=d.hiddenUpdates,l=n[f],l===null?n[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function uc(n){if(50<Sl)throw Sl=0,Kd=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Na={};function _2(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,r,a,l){return new _2(n,r,a,l)}function Hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ui(n,r){var a=n.alternate;return a===null?(a=_n(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Wg(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function cc(n,r,a,l,f,d){var E=0;if(l=n,typeof n=="function")Hf(n)&&(E=1);else if(typeof n=="string")E=Ew(n,a,me.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=_n(31,a,r,f),n.elementType=I,n.lanes=d,n;case x:return Ps(a.children,f,d,r);case L:E=8,f|=24;break;case U:return n=_n(12,a,r,f|2),n.elementType=U,n.lanes=d,n;case ae:return n=_n(13,a,r,f),n.elementType=ae,n.lanes=d,n;case ye:return n=_n(19,a,r,f),n.elementType=ye,n.lanes=d,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:case re:E=10;break e;case X:E=9;break e;case ue:E=11;break e;case k:E=14;break e;case R:E=16,l=null;break e}E=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=_n(E,a,r,f),r.elementType=n,r.type=l,r.lanes=d,r}function Ps(n,r,a,l){return n=_n(7,n,l,r),n.lanes=a,n}function Ff(n,r,a){return n=_n(6,n,null,r),n.lanes=a,n}function Gf(n,r,a){return r=_n(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Da=[],Oa=0,hc=null,fc=0,Mn=[],Vn=0,Ms=null,ji=1,zi="";function Vs(n,r){Da[Oa++]=fc,Da[Oa++]=hc,hc=n,fc=r}function Zg(n,r,a){Mn[Vn++]=ji,Mn[Vn++]=zi,Mn[Vn++]=Ms,Ms=n;var l=ji;n=zi;var f=32-Kt(l)-1;l&=~(1<<f),a+=1;var d=32-Kt(r)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,ji=1<<32-Kt(r)+f|a<<f|l,zi=d+n}else ji=1<<d|a<<f|l,zi=n}function Yf(n){n.return!==null&&(Vs(n,1),Zg(n,1,0))}function $f(n){for(;n===hc;)hc=Da[--Oa],Da[Oa]=null,fc=Da[--Oa],Da[Oa]=null;for(;n===Ms;)Ms=Mn[--Vn],Mn[Vn]=null,zi=Mn[--Vn],Mn[Vn]=null,ji=Mn[--Vn],Mn[Vn]=null}var an=null,ut=null,qe=!1,Ls=null,fi=!1,Kf=Error(s(519));function Us(n){var r=Error(s(418,""));throw il(kn(r,n)),Kf}function Jg(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[St]=n,r[yt]=l,a){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(a=0;a<xl.length;a++)ke(xl[a],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":ke("invalid",r),bs(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ga(r);break;case"select":ke("invalid",r);break;case"textarea":ke("invalid",r),ws(r,l.value,l.defaultValue,l.children),ga(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||gv(r.textContent,a)?(l.popover!=null&&(ke("beforetoggle",r),ke("toggle",r)),l.onScroll!=null&&ke("scroll",r),l.onScrollEnd!=null&&ke("scrollend",r),l.onClick!=null&&(r.onclick=Yc),r=!0):r=!1,r||Us(n)}function ey(n){for(an=n.return;an;)switch(an.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:an=an.return}}function tl(n){if(n!==an)return!1;if(!qe)return ey(n),qe=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||cm(n.type,n.memoizedProps)),a=!a),a&&ut&&Us(n),ey(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){ut=$n(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}ut=null}}else r===27?(r=ut,Dr(n.type)?(n=mm,mm=null,ut=n):ut=r):ut=an?$n(n.stateNode.nextSibling):null;return!0}function nl(){ut=an=null,qe=!1}function ty(){var n=Ls;return n!==null&&(fn===null?fn=n:fn.push.apply(fn,n),Ls=null),n}function il(n){Ls===null?Ls=[n]:Ls.push(n)}var Qf=te(null),js=null,Bi=null;function gr(n,r,a){se(Qf,r._currentValue),r._currentValue=a}function qi(n){n._currentValue=Qf.current,oe(Qf)}function Xf(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function Wf(n,r,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;e:for(;d!==null;){var w=d;d=f;for(var C=0;C<r.length;C++)if(w.context===r[C]){d.lanes|=a,w=d.alternate,w!==null&&(w.lanes|=a),Xf(d.return,a,n),l||(E=null);break e}d=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(s(341));E.lanes|=a,d=E.alternate,d!==null&&(d.lanes|=a),Xf(E,a,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function rl(n,r,a,l){n=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(s(387));if(E=E.memoizedProps,E!==null){var w=f.type;yn(f.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(f===Dt.current){if(E=f.alternate,E===null)throw Error(s(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(kl):n=[kl])}f=f.return}n!==null&&Wf(r,n,a,l),r.flags|=262144}function dc(n){for(n=n.firstContext;n!==null;){if(!yn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zs(n){js=n,Bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Qt(n){return ny(js,n)}function mc(n,r){return js===null&&zs(n),ny(n,r)}function ny(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},Bi===null){if(n===null)throw Error(s(308));Bi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Bi=Bi.next=r;return a}var v2=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},E2=i.unstable_scheduleCallback,T2=i.unstable_NormalPriority,It={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new v2,data:new Map,refCount:0}}function sl(n){n.refCount--,n.refCount===0&&E2(T2,function(){n.controller.abort()})}var al=null,Jf=0,ka=0,Pa=null;function b2(n,r){if(al===null){var a=al=[];Jf=0,ka=tm(),Pa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Jf++,r.then(iy,iy),r}function iy(){if(--Jf===0&&al!==null){Pa!==null&&(Pa.status="fulfilled");var n=al;al=null,ka=0,Pa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function w2(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var ry=W.S;W.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&b2(n,r),ry!==null&&ry(n,r)};var Bs=te(null);function ed(){var n=Bs.current;return n!==null?n:et.pooledCache}function pc(n,r){r===null?se(Bs,Bs.current):se(Bs,r.pool)}function sy(){var n=ed();return n===null?null:{parent:It._currentValue,pool:n}}var ol=Error(s(460)),ay=Error(s(474)),gc=Error(s(542)),td={then:function(){}};function oy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function yc(){}function ly(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(yc,yc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,cy(n),n;default:if(typeof r.status=="string")r.then(yc,yc);else{if(n=et,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,cy(n),n}throw ll=r,ol}}var ll=null;function uy(){if(ll===null)throw Error(s(459));var n=ll;return ll=null,n}function cy(n){if(n===ol||n===gc)throw Error(s(483))}var yr=!1;function nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _r(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function vr(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=uc(n),Xg(n,null,a),r}return lc(n,l,r,a),uc(n)}function ul(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Lo(n,a)}}function rd(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var sd=!1;function cl(){if(sd){var n=Pa;if(n!==null)throw n}}function hl(n,r,a,l){sd=!1;var f=n.updateQueue;yr=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var C=w,Y=C.next;C.next=null,E===null?d=Y:E.next=Y,E=C;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==E&&(w===null?Z.firstBaseUpdate=Y:w.next=Y,Z.lastBaseUpdate=C))}if(d!==null){var ne=f.baseState;E=0,Z=Y=C=null,w=d;do{var $=w.lane&-536870913,K=$!==w.lane;if(K?(Ue&$)===$:(l&$)===$){$!==0&&$===ka&&(sd=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var we=n,ve=w;$=r;var Xe=a;switch(ve.tag){case 1:if(we=ve.payload,typeof we=="function"){ne=we.call(Xe,ne,$);break e}ne=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ve.payload,$=typeof we=="function"?we.call(Xe,ne,$):we,$==null)break e;ne=v({},ne,$);break e;case 2:yr=!0}}$=w.callback,$!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[$]:K.push($))}else K={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(Y=Z=K,C=ne):Z=Z.next=K,E|=$;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;K=w,w=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Z===null&&(C=ne),f.baseState=C,f.firstBaseUpdate=Y,f.lastBaseUpdate=Z,d===null&&(f.shared.lanes=0),xr|=E,n.lanes=E,n.memoizedState=ne}}function hy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function fy(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)hy(a[n],r)}var Ma=te(null),_c=te(0);function dy(n,r){n=Qi,se(_c,n),se(Ma,r),Qi=n|r.baseLanes}function ad(){se(_c,Qi),se(Ma,Ma.current)}function od(){Qi=_c.current,oe(Ma),oe(_c)}var Er=0,Ce=null,Ke=null,vt=null,vc=!1,Va=!1,qs=!1,Ec=0,fl=0,La=null,A2=0;function mt(){throw Error(s(321))}function ld(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!yn(n[a],r[a]))return!1;return!0}function ud(n,r,a,l,f,d){return Er=d,Ce=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=n===null||n.memoizedState===null?Xy:Wy,qs=!1,d=a(l,f),qs=!1,Va&&(d=py(r,a,l,f)),my(n),d}function my(n){W.H=Rc;var r=Ke!==null&&Ke.next!==null;if(Er=0,vt=Ke=Ce=null,vc=!1,fl=0,La=null,r)throw Error(s(300));n===null||Pt||(n=n.dependencies,n!==null&&dc(n)&&(Pt=!0))}function py(n,r,a,l){Ce=n;var f=0;do{if(Va&&(La=null),fl=0,Va=!1,25<=f)throw Error(s(301));if(f+=1,vt=Ke=null,n.updateQueue!=null){var d=n.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}W.H=D2,d=r(a,l)}while(Va);return d}function S2(){var n=W.H,r=n.useState()[0];return r=typeof r.then=="function"?dl(r):r,n=n.useState()[0],(Ke!==null?Ke.memoizedState:null)!==n&&(Ce.flags|=1024),r}function cd(){var n=Ec!==0;return Ec=0,n}function hd(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function fd(n){if(vc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vc=!1}Er=0,vt=Ke=Ce=null,Va=!1,fl=Ec=0,La=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ce.memoizedState=vt=n:vt=vt.next=n,vt}function Et(){if(Ke===null){var n=Ce.alternate;n=n!==null?n.memoizedState:null}else n=Ke.next;var r=vt===null?Ce.memoizedState:vt.next;if(r!==null)vt=r,Ke=n;else{if(n===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Ke=n,n={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},vt===null?Ce.memoizedState=vt=n:vt=vt.next=n}return vt}function dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(n){var r=fl;return fl+=1,La===null&&(La=[]),n=ly(La,n,r),r=Ce,(vt===null?r.memoizedState:vt.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?Xy:Wy),n}function Tc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return dl(n);if(n.$$typeof===re)return Qt(n)}throw Error(s(438,String(n)))}function md(n){var r=null,a=Ce.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=dd(),Ce.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=P;return r.index++,a}function Hi(n,r){return typeof r=="function"?r(n):r}function bc(n){var r=Et();return pd(r,Ke,n)}function pd(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=n.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}r.baseQueue=f=d,l.pending=null}if(d=n.baseState,f===null)n.memoizedState=d;else{r=f.next;var w=E=null,C=null,Y=r,Z=!1;do{var ne=Y.lane&-536870913;if(ne!==Y.lane?(Ue&ne)===ne:(Er&ne)===ne){var $=Y.revertLane;if($===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ne===ka&&(Z=!0);else if((Er&$)===$){Y=Y.next,$===ka&&(Z=!0);continue}else ne={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},C===null?(w=C=ne,E=d):C=C.next=ne,Ce.lanes|=$,xr|=$;ne=Y.action,qs&&a(d,ne),d=Y.hasEagerState?Y.eagerState:a(d,ne)}else $={lane:ne,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},C===null?(w=C=$,E=d):C=C.next=$,Ce.lanes|=ne,xr|=ne;Y=Y.next}while(Y!==null&&Y!==r);if(C===null?E=d:C.next=w,!yn(d,n.memoizedState)&&(Pt=!0,Z&&(a=Pa,a!==null)))throw a;n.memoizedState=d,n.baseState=E,n.baseQueue=C,l.lastRenderedState=d}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function gd(n){var r=Et(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do d=n(d,E.action),E=E.next;while(E!==f);yn(d,r.memoizedState)||(Pt=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function gy(n,r,a){var l=Ce,f=Et(),d=qe;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var E=!yn((Ke||f).memoizedState,a);E&&(f.memoizedState=a,Pt=!0),f=f.queue;var w=vy.bind(null,l,f,n);if(ml(2048,8,w,[n]),f.getSnapshot!==r||E||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,Ua(9,wc(),_y.bind(null,l,f,a,r),null),et===null)throw Error(s(349));d||(Er&124)!==0||yy(l,r,a)}return a}function yy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ce.updateQueue,r===null?(r=dd(),Ce.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function _y(n,r,a,l){r.value=a,r.getSnapshot=l,Ey(r)&&Ty(n)}function vy(n,r,a){return a(function(){Ey(r)&&Ty(n)})}function Ey(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!yn(n,a)}catch(l){return!0}}function Ty(n){var r=Ca(n,2);r!==null&&wn(r,n,2)}function yd(n){var r=cn();if(typeof n=="function"){var a=n;if(n=a(),qs){pn(!0);try{a()}finally{pn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},r}function by(n,r,a,l){return n.baseState=a,pd(n,Ke,typeof l=="function"?l:Hi)}function R2(n,r,a,l,f){if(Sc(n))throw Error(s(485));if(n=r.action,n!==null){var d={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};W.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,wy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function wy(n,r){var a=r.action,l=r.payload,f=n.state;if(r.isTransition){var d=W.T,E={};W.T=E;try{var w=a(f,l),C=W.S;C!==null&&C(E,w),Ay(n,r,w)}catch(Y){_d(n,r,Y)}finally{W.T=d}}else try{d=a(f,l),Ay(n,r,d)}catch(Y){_d(n,r,Y)}}function Ay(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Sy(n,r,l)},function(l){return _d(n,r,l)}):Sy(n,r,a)}function Sy(n,r,a){r.status="fulfilled",r.value=a,Ry(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,wy(n,a)))}function _d(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Ry(r),r=r.next;while(r!==l)}n.action=null}function Ry(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function xy(n,r){return r}function Iy(n,r){if(qe){var a=et.formState;if(a!==null){e:{var l=Ce;if(qe){if(ut){t:{for(var f=ut,d=fi;f.nodeType!==8;){if(!d){f=null;break t}if(f=$n(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){ut=$n(f.nextSibling),l=f.data==="F!";break e}}Us(l)}l=!1}l&&(r=a[0])}}return a=cn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xy,lastRenderedState:r},a.queue=l,a=$y.bind(null,Ce,l),l.dispatch=a,l=yd(!1),d=wd.bind(null,Ce,!1,l.queue),l=cn(),f={state:r,dispatch:null,action:n,pending:null},l.queue=f,a=R2.bind(null,Ce,f,d,a),f.dispatch=a,l.memoizedState=n,[r,a,!1]}function Cy(n){var r=Et();return Ny(r,Ke,n)}function Ny(n,r,a){if(r=pd(n,r,xy)[0],n=bc(Hi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=dl(r)}catch(E){throw E===ol?gc:E}else l=r;r=Et();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Ce.flags|=2048,Ua(9,wc(),x2.bind(null,f,a),null)),[l,d,n]}function x2(n,r){n.action=r}function Dy(n){var r=Et(),a=Ke;if(a!==null)return Ny(r,a,n);Et(),r=r.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Ua(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ce.updateQueue,r===null&&(r=dd(),Ce.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function wc(){return{destroy:void 0,resource:void 0}}function Oy(){return Et().memoizedState}function Ac(n,r,a,l){var f=cn();l=l===void 0?null:l,Ce.flags|=n,f.memoizedState=Ua(1|r,wc(),a,l)}function ml(n,r,a,l){var f=Et();l=l===void 0?null:l;var d=f.memoizedState.inst;Ke!==null&&l!==null&&ld(l,Ke.memoizedState.deps)?f.memoizedState=Ua(r,d,a,l):(Ce.flags|=n,f.memoizedState=Ua(1|r,d,a,l))}function ky(n,r){Ac(8390656,8,n,r)}function Py(n,r){ml(2048,8,n,r)}function My(n,r){return ml(4,2,n,r)}function Vy(n,r){return ml(4,4,n,r)}function Ly(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Uy(n,r,a){a=a!=null?a.concat([n]):null,ml(4,4,Ly.bind(null,r,n),a)}function vd(){}function jy(n,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&ld(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function zy(n,r){var a=Et();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&ld(r,l[1]))return l[0];if(l=n(),qs){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,r],l}function Ed(n,r,a){return a===void 0||(Er&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=H_(),Ce.lanes|=n,xr|=n,a)}function By(n,r,a,l){return yn(a,r)?a:Ma.current!==null?(n=Ed(n,a,l),yn(n,r)||(Pt=!0),n):(Er&42)===0?(Pt=!0,n.memoizedState=a):(n=H_(),Ce.lanes|=n,xr|=n,r)}function qy(n,r,a,l,f){var d=G.p;G.p=d!==0&&8>d?d:8;var E=W.T,w={};W.T=w,wd(n,!1,r,a);try{var C=f(),Y=W.S;if(Y!==null&&Y(w,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Z=w2(C,l);pl(n,r,Z,bn(n))}else pl(n,r,l,bn(n))}catch(ne){pl(n,r,{then:function(){},status:"rejected",reason:ne},bn())}finally{G.p=d,W.T=E}}function I2(){}function Td(n,r,a,l){if(n.tag!==5)throw Error(s(476));var f=Hy(n).queue;qy(n,f,r,ce,a===null?I2:function(){return Fy(n),a(l)})}function Hy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:ce},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Fy(n){var r=Hy(n).next.queue;pl(n,r,{},bn())}function bd(){return Qt(kl)}function Gy(){return Et().memoizedState}function Yy(){return Et().memoizedState}function C2(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=bn();n=_r(a);var l=vr(r,n,a);l!==null&&(wn(l,r,a),ul(l,r,a)),r={cache:Zf()},n.payload=r;return}r=r.return}}function N2(n,r,a){var l=bn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Sc(n)?Ky(r,a):(a=qf(n,r,a,l),a!==null&&(wn(a,n,l),Qy(a,r,l)))}function $y(n,r,a){var l=bn();pl(n,r,a,l)}function pl(n,r,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Sc(n))Ky(r,f);else{var d=n.alternate;if(n.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var E=r.lastRenderedState,w=d(E,a);if(f.hasEagerState=!0,f.eagerState=w,yn(w,E))return lc(n,r,f,0),et===null&&oc(),!1}catch(C){}finally{}if(a=qf(n,r,f,l),a!==null)return wn(a,n,l),Qy(a,r,l),!0}return!1}function wd(n,r,a,l){if(l={lane:2,revertLane:tm(),action:l,hasEagerState:!1,eagerState:null,next:null},Sc(n)){if(r)throw Error(s(479))}else r=qf(n,a,l,2),r!==null&&wn(r,n,2)}function Sc(n){var r=n.alternate;return n===Ce||r!==null&&r===Ce}function Ky(n,r){Va=vc=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Qy(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Lo(n,a)}}var Rc={readContext:Qt,use:Tc,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useLayoutEffect:mt,useInsertionEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useSyncExternalStore:mt,useId:mt,useHostTransitionStatus:mt,useFormState:mt,useActionState:mt,useOptimistic:mt,useMemoCache:mt,useCacheRefresh:mt},Xy={readContext:Qt,use:Tc,useCallback:function(n,r){return cn().memoizedState=[n,r===void 0?null:r],n},useContext:Qt,useEffect:ky,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Ac(4194308,4,Ly.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ac(4194308,4,n,r)},useInsertionEffect:function(n,r){Ac(4,2,n,r)},useMemo:function(n,r){var a=cn();r=r===void 0?null:r;var l=n();if(qs){pn(!0);try{n()}finally{pn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=cn();if(a!==void 0){var f=a(r);if(qs){pn(!0);try{a(r)}finally{pn(!1)}}}else f=r;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=N2.bind(null,Ce,n),[l.memoizedState,n]},useRef:function(n){var r=cn();return n={current:n},r.memoizedState=n},useState:function(n){n=yd(n);var r=n.queue,a=$y.bind(null,Ce,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:vd,useDeferredValue:function(n,r){var a=cn();return Ed(a,n,r)},useTransition:function(){var n=yd(!1);return n=qy.bind(null,Ce,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ce,f=cn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),et===null)throw Error(s(349));(Ue&124)!==0||yy(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,ky(vy.bind(null,l,d,n),[n]),l.flags|=2048,Ua(9,wc(),_y.bind(null,l,d,a,r),null),a},useId:function(){var n=cn(),r=et.identifierPrefix;if(qe){var a=zi,l=ji;a=(l&~(1<<32-Kt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Ec++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=A2++,r="«"+r+"r"+a.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:bd,useFormState:Iy,useActionState:Iy,useOptimistic:function(n){var r=cn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=wd.bind(null,Ce,!0,a),a.dispatch=r,[n,r]},useMemoCache:md,useCacheRefresh:function(){return cn().memoizedState=C2.bind(null,Ce)}},Wy={readContext:Qt,use:Tc,useCallback:jy,useContext:Qt,useEffect:Py,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Vy,useMemo:zy,useReducer:bc,useRef:Oy,useState:function(){return bc(Hi)},useDebugValue:vd,useDeferredValue:function(n,r){var a=Et();return By(a,Ke.memoizedState,n,r)},useTransition:function(){var n=bc(Hi)[0],r=Et().memoizedState;return[typeof n=="boolean"?n:dl(n),r]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:bd,useFormState:Cy,useActionState:Cy,useOptimistic:function(n,r){var a=Et();return by(a,Ke,n,r)},useMemoCache:md,useCacheRefresh:Yy},D2={readContext:Qt,use:Tc,useCallback:jy,useContext:Qt,useEffect:Py,useImperativeHandle:Uy,useInsertionEffect:My,useLayoutEffect:Vy,useMemo:zy,useReducer:gd,useRef:Oy,useState:function(){return gd(Hi)},useDebugValue:vd,useDeferredValue:function(n,r){var a=Et();return Ke===null?Ed(a,n,r):By(a,Ke.memoizedState,n,r)},useTransition:function(){var n=gd(Hi)[0],r=Et().memoizedState;return[typeof n=="boolean"?n:dl(n),r]},useSyncExternalStore:gy,useId:Gy,useHostTransitionStatus:bd,useFormState:Dy,useActionState:Dy,useOptimistic:function(n,r){var a=Et();return Ke!==null?by(a,Ke,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:md,useCacheRefresh:Yy},ja=null,gl=0;function xc(n){var r=gl;return gl+=1,ja===null&&(ja=[]),ly(ja,n,r)}function yl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ic(n,r){throw r.$$typeof===A?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Zy(n){var r=n._init;return r(n._payload)}function Jy(n){function r(j,M){if(n){var F=j.deletions;F===null?(j.deletions=[M],j.flags|=16):F.push(M)}}function a(j,M){if(!n)return null;for(;M!==null;)r(j,M),M=M.sibling;return null}function l(j){for(var M=new Map;j!==null;)j.key!==null?M.set(j.key,j):M.set(j.index,j),j=j.sibling;return M}function f(j,M){return j=Ui(j,M),j.index=0,j.sibling=null,j}function d(j,M,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<M?(j.flags|=67108866,M):F):(j.flags|=67108866,M)):(j.flags|=1048576,M)}function E(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function w(j,M,F,J){return M===null||M.tag!==6?(M=Ff(F,j.mode,J),M.return=j,M):(M=f(M,F),M.return=j,M)}function C(j,M,F,J){var de=F.type;return de===x?Z(j,M,F.props.children,J,F.key):M!==null&&(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&Zy(de)===M.type)?(M=f(M,F.props),yl(M,F),M.return=j,M):(M=cc(F.type,F.key,F.props,null,j.mode,J),yl(M,F),M.return=j,M)}function Y(j,M,F,J){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=Gf(F,j.mode,J),M.return=j,M):(M=f(M,F.children||[]),M.return=j,M)}function Z(j,M,F,J,de){return M===null||M.tag!==7?(M=Ps(F,j.mode,J,de),M.return=j,M):(M=f(M,F),M.return=j,M)}function ne(j,M,F){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Ff(""+M,j.mode,F),M.return=j,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return F=cc(M.type,M.key,M.props,null,j.mode,F),yl(F,M),F.return=j,F;case N:return M=Gf(M,j.mode,F),M.return=j,M;case R:var J=M._init;return M=J(M._payload),ne(j,M,F)}if(tt(M)||z(M))return M=Ps(M,j.mode,F,null),M.return=j,M;if(typeof M.then=="function")return ne(j,xc(M),F);if(M.$$typeof===re)return ne(j,mc(j,M),F);Ic(j,M)}return null}function $(j,M,F,J){var de=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return de!==null?null:w(j,M,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===de?C(j,M,F,J):null;case N:return F.key===de?Y(j,M,F,J):null;case R:return de=F._init,F=de(F._payload),$(j,M,F,J)}if(tt(F)||z(F))return de!==null?null:Z(j,M,F,J,null);if(typeof F.then=="function")return $(j,M,xc(F),J);if(F.$$typeof===re)return $(j,M,mc(j,F),J);Ic(j,F)}return null}function K(j,M,F,J,de){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return j=j.get(F)||null,w(M,j,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return j=j.get(J.key===null?F:J.key)||null,C(M,j,J,de);case N:return j=j.get(J.key===null?F:J.key)||null,Y(M,j,J,de);case R:var De=J._init;return J=De(J._payload),K(j,M,F,J,de)}if(tt(J)||z(J))return j=j.get(F)||null,Z(M,j,J,de,null);if(typeof J.then=="function")return K(j,M,F,xc(J),de);if(J.$$typeof===re)return K(j,M,F,mc(M,J),de);Ic(M,J)}return null}function we(j,M,F,J){for(var de=null,De=null,pe=M,Ee=M=0,Vt=null;pe!==null&&Ee<F.length;Ee++){pe.index>Ee?(Vt=pe,pe=null):Vt=pe.sibling;var Be=$(j,pe,F[Ee],J);if(Be===null){pe===null&&(pe=Vt);break}n&&pe&&Be.alternate===null&&r(j,pe),M=d(Be,M,Ee),De===null?de=Be:De.sibling=Be,De=Be,pe=Vt}if(Ee===F.length)return a(j,pe),qe&&Vs(j,Ee),de;if(pe===null){for(;Ee<F.length;Ee++)pe=ne(j,F[Ee],J),pe!==null&&(M=d(pe,M,Ee),De===null?de=pe:De.sibling=pe,De=pe);return qe&&Vs(j,Ee),de}for(pe=l(pe);Ee<F.length;Ee++)Vt=K(pe,j,Ee,F[Ee],J),Vt!==null&&(n&&Vt.alternate!==null&&pe.delete(Vt.key===null?Ee:Vt.key),M=d(Vt,M,Ee),De===null?de=Vt:De.sibling=Vt,De=Vt);return n&&pe.forEach(function(Vr){return r(j,Vr)}),qe&&Vs(j,Ee),de}function ve(j,M,F,J){if(F==null)throw Error(s(151));for(var de=null,De=null,pe=M,Ee=M=0,Vt=null,Be=F.next();pe!==null&&!Be.done;Ee++,Be=F.next()){pe.index>Ee?(Vt=pe,pe=null):Vt=pe.sibling;var Vr=$(j,pe,Be.value,J);if(Vr===null){pe===null&&(pe=Vt);break}n&&pe&&Vr.alternate===null&&r(j,pe),M=d(Vr,M,Ee),De===null?de=Vr:De.sibling=Vr,De=Vr,pe=Vt}if(Be.done)return a(j,pe),qe&&Vs(j,Ee),de;if(pe===null){for(;!Be.done;Ee++,Be=F.next())Be=ne(j,Be.value,J),Be!==null&&(M=d(Be,M,Ee),De===null?de=Be:De.sibling=Be,De=Be);return qe&&Vs(j,Ee),de}for(pe=l(pe);!Be.done;Ee++,Be=F.next())Be=K(pe,j,Ee,Be.value,J),Be!==null&&(n&&Be.alternate!==null&&pe.delete(Be.key===null?Ee:Be.key),M=d(Be,M,Ee),De===null?de=Be:De.sibling=Be,De=Be);return n&&pe.forEach(function(Ow){return r(j,Ow)}),qe&&Vs(j,Ee),de}function Xe(j,M,F,J){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var de=F.key;M!==null;){if(M.key===de){if(de=F.type,de===x){if(M.tag===7){a(j,M.sibling),J=f(M,F.props.children),J.return=j,j=J;break e}}else if(M.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&Zy(de)===M.type){a(j,M.sibling),J=f(M,F.props),yl(J,F),J.return=j,j=J;break e}a(j,M);break}else r(j,M);M=M.sibling}F.type===x?(J=Ps(F.props.children,j.mode,J,F.key),J.return=j,j=J):(J=cc(F.type,F.key,F.props,null,j.mode,J),yl(J,F),J.return=j,j=J)}return E(j);case N:e:{for(de=F.key;M!==null;){if(M.key===de)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){a(j,M.sibling),J=f(M,F.children||[]),J.return=j,j=J;break e}else{a(j,M);break}else r(j,M);M=M.sibling}J=Gf(F,j.mode,J),J.return=j,j=J}return E(j);case R:return de=F._init,F=de(F._payload),Xe(j,M,F,J)}if(tt(F))return we(j,M,F,J);if(z(F)){if(de=z(F),typeof de!="function")throw Error(s(150));return F=de.call(F),ve(j,M,F,J)}if(typeof F.then=="function")return Xe(j,M,xc(F),J);if(F.$$typeof===re)return Xe(j,M,mc(j,F),J);Ic(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,M!==null&&M.tag===6?(a(j,M.sibling),J=f(M,F),J.return=j,j=J):(a(j,M),J=Ff(F,j.mode,J),J.return=j,j=J),E(j)):a(j,M)}return function(j,M,F,J){try{gl=0;var de=Xe(j,M,F,J);return ja=null,de}catch(pe){if(pe===ol||pe===gc)throw pe;var De=_n(29,pe,null,j.mode);return De.lanes=J,De.return=j,De}finally{}}}var za=Jy(!0),e_=Jy(!1),Ln=te(null),di=null;function Tr(n){var r=n.alternate;se(Ct,Ct.current&1),se(Ln,n),di===null&&(r===null||Ma.current!==null||r.memoizedState!==null)&&(di=n)}function t_(n){if(n.tag===22){if(se(Ct,Ct.current),se(Ln,n),di===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(di=n)}}else br()}function br(){se(Ct,Ct.current),se(Ln,Ln.current)}function Fi(n){oe(Ln),di===n&&(di=null),oe(Ct)}var Ct=te(0);function Cc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Ad(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:v({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Sd={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=bn(),f=_r(l);f.payload=r,a!=null&&(f.callback=a),r=vr(n,f,l),r!==null&&(wn(r,n,l),ul(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=bn(),f=_r(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=vr(n,f,l),r!==null&&(wn(r,n,l),ul(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=bn(),l=_r(a);l.tag=2,r!=null&&(l.callback=r),r=vr(n,l,a),r!==null&&(wn(r,n,a),ul(r,n,a))}};function n_(n,r,a,l,f,d,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,d,E):r.prototype&&r.prototype.isPureReactComponent?!Jo(a,l)||!Jo(f,d):!0}function i_(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Sd.enqueueReplaceState(r,r.state,null)}function Hs(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=v({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Nc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function r_(n){Nc(n)}function s_(n){console.error(n)}function a_(n){Nc(n)}function Dc(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function o_(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rd(n,r,a){return a=_r(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(n,r)},a}function l_(n){return n=_r(n),n.tag=3,n}function u_(n,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;n.payload=function(){return f(d)},n.callback=function(){o_(r,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){o_(r,a,l),typeof f!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function O2(n,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&rl(r,a,f,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return di===null?Xd():a.alternate===null&&ct===0&&(ct=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===td?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Zd(n,l,f)),!1;case 22:return a.flags|=65536,l===td?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Zd(n,l,f)),!1}throw Error(s(435,a.tag))}return Zd(n,l,f),Xd(),!1}if(qe)return r=Ln.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==Kf&&(n=Error(s(422),{cause:l}),il(kn(n,a)))):(l!==Kf&&(r=Error(s(423),{cause:l}),il(kn(r,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=kn(l,a),f=Rd(n.stateNode,l,f),rd(n,f),ct!==4&&(ct=2)),!1;var d=Error(s(520),{cause:l});if(d=kn(d,a),Al===null?Al=[d]:Al.push(d),ct!==4&&(ct=2),r===null)return!0;l=kn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Rd(a.stateNode,l,n),rd(a,n),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Ir===null||!Ir.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=l_(f),u_(f,n,a,l),rd(a,f),!1}a=a.return}while(a!==null);return!1}var c_=Error(s(461)),Pt=!1;function qt(n,r,a,l){r.child=n===null?e_(r,null,a,l):za(r,n.child,a,l)}function h_(n,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var E={};for(var w in l)w!=="ref"&&(E[w]=l[w])}else E=l;return zs(r),l=ud(n,r,a,E,d,f),w=cd(),n!==null&&!Pt?(hd(n,r,f),Gi(n,r,f)):(qe&&w&&Yf(r),r.flags|=1,qt(n,r,l,f),r.child)}function f_(n,r,a,l,f){if(n===null){var d=a.type;return typeof d=="function"&&!Hf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,d_(n,r,d,l,f)):(n=cc(a.type,null,l,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(d=n.child,!Pd(n,f)){var E=d.memoizedProps;if(a=a.compare,a=a!==null?a:Jo,a(E,l)&&n.ref===r.ref)return Gi(n,r,f)}return r.flags|=1,n=Ui(d,l),n.ref=r.ref,n.return=r,r.child=n}function d_(n,r,a,l,f){if(n!==null){var d=n.memoizedProps;if(Jo(d,l)&&n.ref===r.ref)if(Pt=!1,r.pendingProps=l=d,Pd(n,f))(n.flags&131072)!==0&&(Pt=!0);else return r.lanes=n.lanes,Gi(n,r,f)}return xd(n,r,a,l,f)}function m_(n,r,a){var l=r.pendingProps,f=l.children,d=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,n!==null){for(f=r.child=n.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;r.childLanes=d&~l}else r.childLanes=0,r.child=null;return p_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&pc(r,d!==null?d.cachePool:null),d!==null?dy(r,d):ad(),t_(r);else return r.lanes=r.childLanes=536870912,p_(n,r,d!==null?d.baseLanes|a:a,a)}else d!==null?(pc(r,d.cachePool),dy(r,d),br(),r.memoizedState=null):(n!==null&&pc(r,null),ad(),br());return qt(n,r,f,a),r.child}function p_(n,r,a,l){var f=ed();return f=f===null?null:{parent:It._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},n!==null&&pc(r,null),ad(),t_(r),n!==null&&rl(n,r,l,!0),null}function Oc(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function xd(n,r,a,l,f){return zs(r),a=ud(n,r,a,l,void 0,f),l=cd(),n!==null&&!Pt?(hd(n,r,f),Gi(n,r,f)):(qe&&l&&Yf(r),r.flags|=1,qt(n,r,a,f),r.child)}function g_(n,r,a,l,f,d){return zs(r),r.updateQueue=null,a=py(r,l,a,f),my(n),l=cd(),n!==null&&!Pt?(hd(n,r,d),Gi(n,r,d)):(qe&&l&&Yf(r),r.flags|=1,qt(n,r,a,d),r.child)}function y_(n,r,a,l,f){if(zs(r),r.stateNode===null){var d=Na,E=a.contextType;typeof E=="object"&&E!==null&&(d=Qt(E)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sd,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},nd(r),E=a.contextType,d.context=typeof E=="object"&&E!==null?Qt(E):Na,d.state=r.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Ad(r,a,E,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&Sd.enqueueReplaceState(d,d.state,null),hl(r,l,d,f),cl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){d=r.stateNode;var w=r.memoizedProps,C=Hs(a,w);d.props=C;var Y=d.context,Z=a.contextType;E=Na,typeof Z=="object"&&Z!==null&&(E=Qt(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(w||Y!==E)&&i_(r,d,l,E),yr=!1;var $=r.memoizedState;d.state=$,hl(r,l,d,f),cl(),Y=r.memoizedState,w||$!==Y||yr?(typeof ne=="function"&&(Ad(r,a,ne,l),Y=r.memoizedState),(C=yr||n_(r,a,C,l,$,Y,E))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=Y),d.props=l,d.state=Y,d.context=E,l=C):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,id(n,r),E=r.memoizedProps,Z=Hs(a,E),d.props=Z,ne=r.pendingProps,$=d.context,Y=a.contextType,C=Na,typeof Y=="object"&&Y!==null&&(C=Qt(Y)),w=a.getDerivedStateFromProps,(Y=typeof w=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ne||$!==C)&&i_(r,d,l,C),yr=!1,$=r.memoizedState,d.state=$,hl(r,l,d,f),cl();var K=r.memoizedState;E!==ne||$!==K||yr||n!==null&&n.dependencies!==null&&dc(n.dependencies)?(typeof w=="function"&&(Ad(r,a,w,l),K=r.memoizedState),(Z=yr||n_(r,a,Z,l,$,K,C)||n!==null&&n.dependencies!==null&&dc(n.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,K,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,K,C)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=K),d.props=l,d.state=K,d.context=C,l=Z):(typeof d.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),l=!1)}return d=l,Oc(n,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,n!==null&&l?(r.child=za(r,n.child,null,f),r.child=za(r,null,a,f)):qt(n,r,a,f),r.memoizedState=d.state,n=r.child):n=Gi(n,r,f),n}function __(n,r,a,l){return nl(),r.flags|=256,qt(n,r,a,l),r.child}var Id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cd(n){return{baseLanes:n,cachePool:sy()}}function Nd(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Un),n}function v_(n,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,E;if((E=d)||(E=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),E&&(f=!0,r.flags&=-129),E=(r.flags&32)!==0,r.flags&=-33,n===null){if(qe){if(f?Tr(r):br(),qe){var w=ut,C;if(C=w){e:{for(C=w,w=fi;C.nodeType!==8;){if(!w){w=null;break e}if(C=$n(C.nextSibling),C===null){w=null;break e}}w=C}w!==null?(r.memoizedState={dehydrated:w,treeContext:Ms!==null?{id:ji,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},C=_n(18,null,null,0),C.stateNode=w,C.return=r,r.child=C,an=r,ut=null,C=!0):C=!1}C||Us(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return dm(w)?r.lanes=32:r.lanes=536870912,null;Fi(r)}return w=l.children,l=l.fallback,f?(br(),f=r.mode,w=kc({mode:"hidden",children:w},f),l=Ps(l,f,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,f=r.child,f.memoizedState=Cd(a),f.childLanes=Nd(n,E,a),r.memoizedState=Id,l):(Tr(r),Dd(r,w))}if(C=n.memoizedState,C!==null&&(w=C.dehydrated,w!==null)){if(d)r.flags&256?(Tr(r),r.flags&=-257,r=Od(n,r,a)):r.memoizedState!==null?(br(),r.child=n.child,r.flags|=128,r=null):(br(),f=l.fallback,w=r.mode,l=kc({mode:"visible",children:l.children},w),f=Ps(f,w,a,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,za(r,n.child,null,a),l=r.child,l.memoizedState=Cd(a),l.childLanes=Nd(n,E,a),r.memoizedState=Id,r=f);else if(Tr(r),dm(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var Y=E.dgst;E=Y,l=Error(s(419)),l.stack="",l.digest=E,il({value:l,source:null,stack:null}),r=Od(n,r,a)}else if(Pt||rl(n,r,a,!1),E=(a&n.childLanes)!==0,Pt||E){if(E=et,E!==null&&(l=a&-a,l=(l&42)!==0?1:ur(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Ca(n,l),wn(E,n,l),c_;w.data==="$?"||Xd(),r=Od(n,r,a)}else w.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=C.treeContext,ut=$n(w.nextSibling),an=r,qe=!0,Ls=null,fi=!1,n!==null&&(Mn[Vn++]=ji,Mn[Vn++]=zi,Mn[Vn++]=Ms,ji=n.id,zi=n.overflow,Ms=r),r=Dd(r,l.children),r.flags|=4096);return r}return f?(br(),f=l.fallback,w=r.mode,C=n.child,Y=C.sibling,l=Ui(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,Y!==null?f=Ui(Y,f):(f=Ps(f,w,a,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,w=n.child.memoizedState,w===null?w=Cd(a):(C=w.cachePool,C!==null?(Y=It._currentValue,C=C.parent!==Y?{parent:Y,pool:Y}:C):C=sy(),w={baseLanes:w.baseLanes|a,cachePool:C}),f.memoizedState=w,f.childLanes=Nd(n,E,a),r.memoizedState=Id,l):(Tr(r),a=n.child,n=a.sibling,a=Ui(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(E=r.deletions,E===null?(r.deletions=[n],r.flags|=16):E.push(n)),r.child=a,r.memoizedState=null,a)}function Dd(n,r){return r=kc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function kc(n,r){return n=_n(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Od(n,r,a){return za(r,n.child,null,a),n=Dd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function E_(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),Xf(n.return,r,a)}function kd(n,r,a,l,f){var d=n.memoizedState;d===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(d.isBackwards=r,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=f)}function T_(n,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;if(qt(n,r,l.children,a),l=Ct.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&E_(n,a,r);else if(n.tag===19)E_(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(se(Ct,l),f){case"forwards":for(a=r.child,f=null;a!==null;)n=a.alternate,n!==null&&Cc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),kd(r,!1,f,a,d);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Cc(n)===null){r.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}kd(r,!0,a,null,d);break;case"together":kd(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Gi(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),xr|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(rl(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=Ui(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Ui(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Pd(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&dc(n)))}function k2(n,r,a){switch(r.tag){case 3:Je(r,r.stateNode.containerInfo),gr(r,It,n.memoizedState.cache),nl();break;case 27:case 5:lr(r);break;case 4:Je(r,r.stateNode.containerInfo);break;case 10:gr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Tr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?v_(n,r,a):(Tr(r),n=Gi(n,r,a),n!==null?n.sibling:null);Tr(r);break;case 19:var f=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(rl(n,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return T_(n,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(Ct,Ct.current),l)break;return null;case 22:case 23:return r.lanes=0,m_(n,r,a);case 24:gr(r,It,n.memoizedState.cache)}return Gi(n,r,a)}function b_(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Pt=!0;else{if(!Pd(n,a)&&(r.flags&128)===0)return Pt=!1,k2(n,r,a);Pt=(n.flags&131072)!==0}else Pt=!1,qe&&(r.flags&1048576)!==0&&Zg(r,fc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")Hf(l)?(n=Hs(l,n),r.tag=1,r=y_(null,r,l,n,a)):(r.tag=0,r=xd(null,r,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===ue){r.tag=11,r=h_(null,r,l,n,a);break e}else if(f===k){r.tag=14,r=f_(null,r,l,n,a);break e}}throw r=At(l)||l,Error(s(306,r,""))}}return r;case 0:return xd(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Hs(l,r.pendingProps),y_(n,r,l,f,a);case 3:e:{if(Je(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,id(n,r),hl(r,l,null,a);var E=r.memoizedState;if(l=E.cache,gr(r,It,l),l!==d.cache&&Wf(r,[It],a,!0),cl(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=__(n,r,l,a);break e}else if(l!==f){f=kn(Error(s(424)),r),il(f),r=__(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ut=$n(n.firstChild),an=r,qe=!0,Ls=null,fi=!0,a=e_(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(nl(),l===f){r=Gi(n,r,a);break e}qt(n,r,l,a)}r=r.child}return r;case 26:return Oc(n,r),n===null?(a=Rv(r.type,null,r.pendingProps,null))?r.memoizedState=a:qe||(a=r.type,n=r.pendingProps,l=$c(Ae.current).createElement(a),l[St]=r,l[yt]=n,Ft(l,a,n),dt(l),r.stateNode=l):r.memoizedState=Rv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return lr(r),n===null&&qe&&(l=r.stateNode=wv(r.type,r.pendingProps,Ae.current),an=r,fi=!0,f=ut,Dr(r.type)?(mm=f,ut=$n(l.firstChild)):ut=f),qt(n,r,r.pendingProps.children,a),Oc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&qe&&((f=l=ut)&&(l=ow(l,r.type,r.pendingProps,fi),l!==null?(r.stateNode=l,an=r,ut=$n(l.firstChild),fi=!1,f=!0):f=!1),f||Us(r)),lr(r),f=r.type,d=r.pendingProps,E=n!==null?n.memoizedProps:null,l=d.children,cm(f,d)?l=null:E!==null&&cm(f,E)&&(r.flags|=32),r.memoizedState!==null&&(f=ud(n,r,S2,null,null,a),kl._currentValue=f),Oc(n,r),qt(n,r,l,a),r.child;case 6:return n===null&&qe&&((n=a=ut)&&(a=lw(a,r.pendingProps,fi),a!==null?(r.stateNode=a,an=r,ut=null,n=!0):n=!1),n||Us(r)),null;case 13:return v_(n,r,a);case 4:return Je(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=za(r,null,l,a):qt(n,r,l,a),r.child;case 11:return h_(n,r,r.type,r.pendingProps,a);case 7:return qt(n,r,r.pendingProps,a),r.child;case 8:return qt(n,r,r.pendingProps.children,a),r.child;case 12:return qt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,gr(r,r.type,l.value),qt(n,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,zs(r),f=Qt(f),l=l(f),r.flags|=1,qt(n,r,l,a),r.child;case 14:return f_(n,r,r.type,r.pendingProps,a);case 15:return d_(n,r,r.type,r.pendingProps,a);case 19:return T_(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=kc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Ui(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return m_(n,r,a);case 24:return zs(r),l=Qt(It),n===null?(f=ed(),f===null&&(f=et,d=Zf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},nd(r),gr(r,It,f)):((n.lanes&a)!==0&&(id(n,r),hl(r,null,null,a),cl()),f=n.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),gr(r,It,l)):(l=d.cache,gr(r,It,l),l!==f.cache&&Wf(r,[It],a,!0))),qt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Yi(n){n.flags|=4}function w_(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Dv(r)){if(r=Ln.current,r!==null&&((Ue&4194048)===Ue?di!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||r!==di))throw ll=td,ay;n.flags|=8192}}function Pc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Mo():536870912,n.lanes|=r,Fa|=r)}function _l(n,r){if(!qe)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function at(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function P2(n,r,a){var l=r.pendingProps;switch($f(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(r),null;case 1:return at(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),qi(It),ei(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(tl(r)?Yi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ty())),at(r),null;case 26:return a=r.memoizedState,n===null?(Yi(r),a!==null?(at(r),w_(r,a)):(at(r),r.flags&=-16777217)):a?a!==n.memoizedState?(Yi(r),at(r),w_(r,a)):(at(r),r.flags&=-16777217):(n.memoizedProps!==l&&Yi(r),at(r),r.flags&=-16777217),null;case 27:Si(r),a=Ae.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Yi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return at(r),null}n=me.current,tl(r)?Jg(r):(n=wv(f,l,a),r.stateNode=n,Yi(r))}return at(r),null;case 5:if(Si(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&Yi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return at(r),null}if(n=me.current,tl(r))Jg(r);else{switch(f=$c(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[St]=r,n[yt]=l;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Ft(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Yi(r)}}return at(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&Yi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=Ae.current,tl(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,f=an,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[St]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||gv(n.nodeValue,a)),n||Us(r)}else n=$c(n).createTextNode(l),n[St]=r,r.stateNode=n}return at(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=tl(r),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[St]=r}else nl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;at(r),f=!1}else f=ty(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Fi(r),r):(Fi(r),null)}if(Fi(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),Pc(r,r.updateQueue),at(r),null;case 4:return ei(),n===null&&sm(r.stateNode.containerInfo),at(r),null;case 10:return qi(r.type),at(r),null;case 19:if(oe(Ct),f=r.memoizedState,f===null)return at(r),null;if(l=(r.flags&128)!==0,d=f.rendering,d===null)if(l)_l(f,!1);else{if(ct!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(d=Cc(n),d!==null){for(r.flags|=128,_l(f,!1),n=d.updateQueue,r.updateQueue=n,Pc(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Wg(a,n),a=a.sibling;return se(Ct,Ct.current&1|2),r.child}n=n.sibling}f.tail!==null&&xn()>Lc&&(r.flags|=128,l=!0,_l(f,!1),r.lanes=4194304)}else{if(!l)if(n=Cc(d),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,Pc(r,n),_l(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!qe)return at(r),null}else 2*xn()-f.renderingStartTime>Lc&&a!==536870912&&(r.flags|=128,l=!0,_l(f,!1),r.lanes=4194304);f.isBackwards?(d.sibling=r.child,r.child=d):(n=f.last,n!==null?n.sibling=d:r.child=d,f.last=d)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=xn(),r.sibling=null,n=Ct.current,se(Ct,l?n&1|2:n&1),r):(at(r),null);case 22:case 23:return Fi(r),od(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(at(r),r.subtreeFlags&6&&(r.flags|=8192)):at(r),a=r.updateQueue,a!==null&&Pc(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&oe(Bs),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),qi(It),at(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function M2(n,r){switch($f(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return qi(It),ei(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Si(r),null;case 13:if(Fi(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));nl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return oe(Ct),null;case 4:return ei(),null;case 10:return qi(r.type),null;case 22:case 23:return Fi(r),od(),n!==null&&oe(Bs),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return qi(It),null;case 25:return null;default:return null}}function A_(n,r){switch($f(r),r.tag){case 3:qi(It),ei();break;case 26:case 27:case 5:Si(r);break;case 4:ei();break;case 13:Fi(r);break;case 19:oe(Ct);break;case 10:qi(r.type);break;case 22:case 23:Fi(r),od(),n!==null&&oe(Bs);break;case 24:qi(It)}}function vl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var d=a.create,E=a.inst;l=d(),E.destroy=l}a=a.next}while(a!==f)}}catch(w){We(r,r.return,w)}}function wr(n,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&n)===n){var E=l.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=r;var C=a,Y=w;try{Y()}catch(Z){We(f,C,Z)}}}l=l.next}while(l!==d)}}catch(Z){We(r,r.return,Z)}}function S_(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{fy(r,a)}catch(l){We(n,n.return,l)}}}function R_(n,r,a){a.props=Hs(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){We(n,r,l)}}function El(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){We(n,r,f)}}function mi(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){We(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){We(n,r,f)}else a.current=null}function x_(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){We(n,n.return,f)}}function Md(n,r,a){try{var l=n.stateNode;nw(l,n.type,a,r),l[yt]=r}catch(f){We(n,n.return,f)}}function I_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Dr(n.type)||n.tag===4}function Vd(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||I_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Dr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Ld(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Yc));else if(l!==4&&(l===27&&Dr(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(Ld(n,r,a),n=n.sibling;n!==null;)Ld(n,r,a),n=n.sibling}function Mc(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&Dr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Mc(n,r,a),n=n.sibling;n!==null;)Mc(n,r,a),n=n.sibling}function C_(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ft(r,l,a),r[St]=n,r[yt]=a}catch(d){We(n,n.return,d)}}var $i=!1,pt=!1,Ud=!1,N_=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function V2(n,r){if(n=n.containerInfo,lm=Jc,n=Bg(n),Vf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch(ve){a=null;break e}var E=0,w=-1,C=-1,Y=0,Z=0,ne=n,$=null;t:for(;;){for(var K;ne!==a||f!==0&&ne.nodeType!==3||(w=E+f),ne!==d||l!==0&&ne.nodeType!==3||(C=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(K=ne.firstChild)!==null;)$=ne,ne=K;for(;;){if(ne===n)break t;if($===a&&++Y===f&&(w=E),$===d&&++Z===l&&(C=E),(K=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=K}a=w===-1||C===-1?null:{start:w,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(um={focusedElem:n,selectionRange:a},Jc=!1,Mt=r;Mt!==null;)if(r=Mt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,Mt=n;else for(;Mt!==null;){switch(r=Mt,d=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&d!==null){n=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var we=Hs(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(we,d),l.__reactInternalSnapshotBeforeUpdate=n}catch(ve){We(a,a.return,ve)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)fm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":fm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,Mt=n;break}Mt=r.return}}function D_(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ar(n,a),l&4&&vl(5,a);break;case 1:if(Ar(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(E){We(a,a.return,E)}else{var f=Hs(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(E){We(a,a.return,E)}}l&64&&S_(a),l&512&&El(a,a.return);break;case 3:if(Ar(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{fy(n,r)}catch(E){We(a,a.return,E)}}break;case 27:r===null&&l&4&&C_(a);case 26:case 5:Ar(n,a),r===null&&l&4&&x_(a),l&512&&El(a,a.return);break;case 12:Ar(n,a);break;case 13:Ar(n,a),l&4&&P_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=G2.bind(null,a),uw(n,a))));break;case 22:if(l=a.memoizedState!==null||$i,!l){r=r!==null&&r.memoizedState!==null||pt,f=$i;var d=pt;$i=l,(pt=r)&&!d?Sr(n,a,(a.subtreeFlags&8772)!==0):Ar(n,a),$i=f,pt=d}break;case 30:break;default:Ar(n,a)}}function O_(n){var r=n.alternate;r!==null&&(n.alternate=null,O_(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&fr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var it=null,hn=!1;function Ki(n,r,a){for(a=a.child;a!==null;)k_(n,r,a),a=a.sibling}function k_(n,r,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(lt,a)}catch(d){}switch(a.tag){case 26:pt||mi(a,r),Ki(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:pt||mi(a,r);var l=it,f=hn;Dr(a.type)&&(it=a.stateNode,hn=!1),Ki(n,r,a),Cl(a.stateNode),it=l,hn=f;break;case 5:pt||mi(a,r);case 6:if(l=it,f=hn,it=null,Ki(n,r,a),it=l,hn=f,it!==null)if(hn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(d){We(a,r,d)}else try{it.removeChild(a.stateNode)}catch(d){We(a,r,d)}break;case 18:it!==null&&(hn?(n=it,Tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Ll(n)):Tv(it,a.stateNode));break;case 4:l=it,f=hn,it=a.stateNode.containerInfo,hn=!0,Ki(n,r,a),it=l,hn=f;break;case 0:case 11:case 14:case 15:pt||wr(2,a,r),pt||wr(4,a,r),Ki(n,r,a);break;case 1:pt||(mi(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&R_(a,r,l)),Ki(n,r,a);break;case 21:Ki(n,r,a);break;case 22:pt=(l=pt)||a.memoizedState!==null,Ki(n,r,a),pt=l;break;default:Ki(n,r,a)}}function P_(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ll(n)}catch(a){We(r,r.return,a)}}function L2(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new N_),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new N_),r;default:throw Error(s(435,n.tag))}}function jd(n,r){var a=L2(n);r.forEach(function(l){var f=Y2.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function vn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=n,E=r,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(Dr(w.type)){it=w.stateNode,hn=!1;break e}break;case 5:it=w.stateNode,hn=!1;break e;case 3:case 4:it=w.stateNode.containerInfo,hn=!0;break e}w=w.return}if(it===null)throw Error(s(160));k_(d,E,f),it=null,hn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)M_(r,n),r=r.sibling}var Yn=null;function M_(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vn(r,n),En(n),l&4&&(wr(3,n,n.return),vl(3,n),wr(5,n,n.return));break;case 1:vn(r,n),En(n),l&512&&(pt||a===null||mi(a,a.return)),l&64&&$i&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Yn;if(vn(r,n),En(n),l&512&&(pt||a===null||mi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[_s]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Ft(d,l,a),d[St]=n,dt(d),l=d;break e;case"link":var E=Cv("link","href",f).get(l+(a.href||""));if(E){for(var w=0;w<E.length;w++)if(d=E[w],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(w,1);break t}}d=f.createElement(l),Ft(d,l,a),f.head.appendChild(d);break;case"meta":if(E=Cv("meta","content",f).get(l+(a.content||""))){for(w=0;w<E.length;w++)if(d=E[w],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(w,1);break t}}d=f.createElement(l),Ft(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[St]=n,dt(d),l=d}n.stateNode=l}else Nv(f,n.type,n.stateNode);else n.stateNode=Iv(f,l,n.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Nv(f,n.type,n.stateNode):Iv(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Md(n,n.memoizedProps,a.memoizedProps)}break;case 27:vn(r,n),En(n),l&512&&(pt||a===null||mi(a,a.return)),a!==null&&l&4&&Md(n,n.memoizedProps,a.memoizedProps);break;case 5:if(vn(r,n),En(n),l&512&&(pt||a===null||mi(a,a.return)),n.flags&32){f=n.stateNode;try{Cn(f,"")}catch(K){We(n,n.return,K)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Md(n,f,a!==null?a.memoizedProps:f)),l&1024&&(Ud=!0);break;case 6:if(vn(r,n),En(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(K){We(n,n.return,K)}}break;case 3:if(Xc=null,f=Yn,Yn=Kc(r.containerInfo),vn(r,n),Yn=f,En(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(r.containerInfo)}catch(K){We(n,n.return,K)}Ud&&(Ud=!1,V_(n));break;case 4:l=Yn,Yn=Kc(n.stateNode.containerInfo),vn(r,n),En(n),Yn=l;break;case 12:vn(r,n),En(n);break;case 13:vn(r,n),En(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Gd=xn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jd(n,l)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,Y=$i,Z=pt;if($i=Y||f,pt=Z||C,vn(r,n),pt=Z,$i=Y,En(n),l&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||C||$i||pt||Fs(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){C=a=r;try{if(d=C.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=C.stateNode;var ne=C.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(K){We(C,C.return,K)}}}else if(r.tag===6){if(a===null){C=r;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(K){We(C,C.return,K)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jd(n,a))));break;case 19:vn(r,n),En(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,jd(n,l)));break;case 30:break;case 21:break;default:vn(r,n),En(n)}}function En(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(I_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Vd(n);Mc(n,d,f);break;case 5:var E=a.stateNode;a.flags&32&&(Cn(E,""),a.flags&=-33);var w=Vd(n);Mc(n,w,E);break;case 3:case 4:var C=a.stateNode.containerInfo,Y=Vd(n);Ld(n,Y,C);break;default:throw Error(s(161))}}catch(Z){We(n,n.return,Z)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function V_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;V_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ar(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)D_(n,r.alternate,r),r=r.sibling}function Fs(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:wr(4,r,r.return),Fs(r);break;case 1:mi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&R_(r,r.return,a),Fs(r);break;case 27:Cl(r.stateNode);case 26:case 5:mi(r,r.return),Fs(r);break;case 22:r.memoizedState===null&&Fs(r);break;case 30:Fs(r);break;default:Fs(r)}n=n.sibling}}function Sr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=n,d=r,E=d.flags;switch(d.tag){case 0:case 11:case 15:Sr(f,d,a),vl(4,d);break;case 1:if(Sr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){We(l,l.return,Y)}if(l=d,f=l.updateQueue,f!==null){var w=l.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)hy(C[f],w)}catch(Y){We(l,l.return,Y)}}a&&E&64&&S_(d),El(d,d.return);break;case 27:C_(d);case 26:case 5:Sr(f,d,a),a&&l===null&&E&4&&x_(d),El(d,d.return);break;case 12:Sr(f,d,a);break;case 13:Sr(f,d,a),a&&E&4&&P_(f,d);break;case 22:d.memoizedState===null&&Sr(f,d,a),El(d,d.return);break;case 30:break;default:Sr(f,d,a)}r=r.sibling}}function zd(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&sl(a))}function Bd(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&sl(n))}function pi(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)L_(n,r,a,l),r=r.sibling}function L_(n,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:pi(n,r,a,l),f&2048&&vl(9,r);break;case 1:pi(n,r,a,l);break;case 3:pi(n,r,a,l),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&sl(n)));break;case 12:if(f&2048){pi(n,r,a,l),n=r.stateNode;try{var d=r.memoizedProps,E=d.id,w=d.onPostCommit;typeof w=="function"&&w(E,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){We(r,r.return,C)}}else pi(n,r,a,l);break;case 13:pi(n,r,a,l);break;case 23:break;case 22:d=r.stateNode,E=r.alternate,r.memoizedState!==null?d._visibility&2?pi(n,r,a,l):Tl(n,r):d._visibility&2?pi(n,r,a,l):(d._visibility|=2,Ba(n,r,a,l,(r.subtreeFlags&10256)!==0)),f&2048&&zd(E,r);break;case 24:pi(n,r,a,l),f&2048&&Bd(r.alternate,r);break;default:pi(n,r,a,l)}}function Ba(n,r,a,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var d=n,E=r,w=a,C=l,Y=E.flags;switch(E.tag){case 0:case 11:case 15:Ba(d,E,w,C,f),vl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Ba(d,E,w,C,f):Tl(d,E):(Z._visibility|=2,Ba(d,E,w,C,f)),f&&Y&2048&&zd(E.alternate,E);break;case 24:Ba(d,E,w,C,f),f&&Y&2048&&Bd(E.alternate,E);break;default:Ba(d,E,w,C,f)}r=r.sibling}}function Tl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,f=l.flags;switch(l.tag){case 22:Tl(a,l),f&2048&&zd(l.alternate,l);break;case 24:Tl(a,l),f&2048&&Bd(l.alternate,l);break;default:Tl(a,l)}r=r.sibling}}var bl=8192;function qa(n){if(n.subtreeFlags&bl)for(n=n.child;n!==null;)U_(n),n=n.sibling}function U_(n){switch(n.tag){case 26:qa(n),n.flags&bl&&n.memoizedState!==null&&bw(Yn,n.memoizedState,n.memoizedProps);break;case 5:qa(n);break;case 3:case 4:var r=Yn;Yn=Kc(n.stateNode.containerInfo),qa(n),Yn=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=bl,bl=16777216,qa(n),bl=r):qa(n));break;default:qa(n)}}function j_(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function wl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,B_(l,n)}j_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)z_(n),n=n.sibling}function z_(n){switch(n.tag){case 0:case 11:case 15:wl(n),n.flags&2048&&wr(9,n,n.return);break;case 3:wl(n);break;case 12:wl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Vc(n)):wl(n);break;default:wl(n)}}function Vc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];Mt=l,B_(l,n)}j_(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:wr(8,r,r.return),Vc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Vc(r));break;default:Vc(r)}n=n.sibling}}function B_(n,r){for(;Mt!==null;){var a=Mt;switch(a.tag){case 0:case 11:case 15:wr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:sl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Mt=l;else e:for(a=n;Mt!==null;){l=Mt;var f=l.sibling,d=l.return;if(O_(l),l===a){Mt=null;break e}if(f!==null){f.return=d,Mt=f;break e}Mt=d}}}var U2={getCacheForType:function(n){var r=Qt(It),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},j2=typeof WeakMap=="function"?WeakMap:Map,Ge=0,et=null,Oe=null,Ue=0,Ye=0,Tn=null,Rr=!1,Ha=!1,qd=!1,Qi=0,ct=0,xr=0,Gs=0,Hd=0,Un=0,Fa=0,Al=null,fn=null,Fd=!1,Gd=0,Lc=1/0,Uc=null,Ir=null,Ht=0,Cr=null,Ga=null,Ya=0,Yd=0,$d=null,q_=null,Sl=0,Kd=null;function bn(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(W.T!==null){var n=ka;return n!==0?n:tm()}return cr()}function H_(){Un===0&&(Un=(Ue&536870912)===0||qe?Po():536870912);var n=Ln.current;return n!==null&&(n.flags|=32),Un}function wn(n,r,a){(n===et&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&($a(n,0),Nr(n,Ue,Un,!1)),xi(n,a),((Ge&2)===0||n!==et)&&(n===et&&((Ge&2)===0&&(Gs|=a),ct===4&&Nr(n,Ue,Un,!1)),gi(n))}function F_(n,r,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||ys(n,r),f=l?q2(n,r):Wd(n,r,!0),d=l;do{if(f===0){Ha&&!l&&Nr(n,r,0,!1);break}else{if(a=n.current.alternate,d&&!z2(a)){f=Wd(n,r,!1),d=!1;continue}if(f===2){if(d=r,n.errorRecoveryDisabledLanes&d)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){r=E;e:{var w=n;f=Al;var C=w.current.memoizedState.isDehydrated;if(C&&($a(w,E).flags|=256),E=Wd(w,E,!1),E!==2){if(qd&&!C){w.errorRecoveryDisabledLanes|=d,Gs|=d,f=4;break e}d=fn,fn=f,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){$a(n,0),Nr(n,r,0,!0);break}e:{switch(l=n,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Nr(l,r,Un,!Rr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Gd+300-xn(),10<f)){if(Nr(l,r,Un,!Rr),ca(l,0,!0)!==0)break e;l.timeoutHandle=vv(G_.bind(null,l,a,fn,Uc,Fd,r,Un,Gs,Fa,Rr,d,2,-0,0),f);break e}G_(l,a,fn,Uc,Fd,r,Un,Gs,Fa,Rr,d,0,-0,0)}}break}while(!0);gi(n)}function G_(n,r,a,l,f,d,E,w,C,Y,Z,ne,$,K){if(n.timeoutHandle=-1,ne=r.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Ol={stylesheets:null,count:0,unsuspend:Tw},U_(r),ne=ww(),ne!==null)){n.cancelPendingCommit=ne(Z_.bind(null,n,r,d,a,l,f,E,w,C,Z,1,$,K)),Nr(n,d,E,!Y);return}Z_(n,r,d,a,l,f,E,w,C)}function z2(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!yn(d(),f))return!1}catch(E){return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Nr(n,r,a,l){r&=~Hd,r&=~Gs,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var f=r;0<f;){var d=31-Kt(f),E=1<<d;l[d]=-1,f&=~E}a!==0&&ti(n,a,r)}function jc(){return(Ge&6)===0?(Rl(0),!1):!0}function Qd(){if(Oe!==null){if(Ye===0)var n=Oe.return;else n=Oe,Bi=js=null,fd(n),ja=null,gl=0,n=Oe;for(;n!==null;)A_(n.alternate,n),n=n.return;Oe=null}}function $a(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,rw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Qd(),et=n,Oe=a=Ui(n.current,null),Ue=r,Ye=0,Tn=null,Rr=!1,Ha=ys(n,r),qd=!1,Fa=Un=Hd=Gs=xr=ct=0,fn=Al=null,Fd=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var f=31-Kt(l),d=1<<f;r|=n[f],l&=~d}return Qi=r,oc(),a}function Y_(n,r){Ce=null,W.H=Rc,r===ol||r===gc?(r=uy(),Ye=3):r===ay?(r=uy(),Ye=4):Ye=r===c_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Tn=r,Oe===null&&(ct=1,Dc(n,kn(r,n.current)))}function $_(){var n=W.H;return W.H=Rc,n===null?Rc:n}function K_(){var n=W.A;return W.A=U2,n}function Xd(){ct=4,Rr||(Ue&4194048)!==Ue&&Ln.current!==null||(Ha=!0),(xr&134217727)===0&&(Gs&134217727)===0||et===null||Nr(et,Ue,Un,!1)}function Wd(n,r,a){var l=Ge;Ge|=2;var f=$_(),d=K_();(et!==n||Ue!==r)&&(Uc=null,$a(n,r)),r=!1;var E=ct;e:do try{if(Ye!==0&&Oe!==null){var w=Oe,C=Tn;switch(Ye){case 8:Qd(),E=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(r=!0);var Y=Ye;if(Ye=0,Tn=null,Ka(n,w,C,Y),a&&Ha){E=0;break e}break;default:Y=Ye,Ye=0,Tn=null,Ka(n,w,C,Y)}}B2(),E=ct;break}catch(Z){Y_(n,Z)}while(!0);return r&&n.shellSuspendCounter++,Bi=js=null,Ge=l,W.H=f,W.A=d,Oe===null&&(et=null,Ue=0,oc()),E}function B2(){for(;Oe!==null;)Q_(Oe)}function q2(n,r){var a=Ge;Ge|=2;var l=$_(),f=K_();et!==n||Ue!==r?(Uc=null,Lc=xn()+500,$a(n,r)):Ha=ys(n,r);e:do try{if(Ye!==0&&Oe!==null){r=Oe;var d=Tn;t:switch(Ye){case 1:Ye=0,Tn=null,Ka(n,r,d,1);break;case 2:case 9:if(oy(d)){Ye=0,Tn=null,X_(r);break}r=function(){Ye!==2&&Ye!==9||et!==n||(Ye=7),gi(n)},d.then(r,r);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:oy(d)?(Ye=0,Tn=null,X_(r)):(Ye=0,Tn=null,Ka(n,r,d,7));break;case 5:var E=null;switch(Oe.tag){case 26:E=Oe.memoizedState;case 5:case 27:var w=Oe;if(!E||Dv(E)){Ye=0,Tn=null;var C=w.sibling;if(C!==null)Oe=C;else{var Y=w.return;Y!==null?(Oe=Y,zc(Y)):Oe=null}break t}}Ye=0,Tn=null,Ka(n,r,d,5);break;case 6:Ye=0,Tn=null,Ka(n,r,d,6);break;case 8:Qd(),ct=6;break e;default:throw Error(s(462))}}H2();break}catch(Z){Y_(n,Z)}while(!0);return Bi=js=null,W.H=l,W.A=f,Ge=a,Oe!==null?0:(et=null,Ue=0,oc(),ct)}function H2(){for(;Oe!==null&&!No();)Q_(Oe)}function Q_(n){var r=b_(n.alternate,n,Qi);n.memoizedProps=n.pendingProps,r===null?zc(n):Oe=r}function X_(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=g_(a,r,r.pendingProps,r.type,void 0,Ue);break;case 11:r=g_(a,r,r.pendingProps,r.type.render,r.ref,Ue);break;case 5:fd(r);default:A_(a,r),r=Oe=Wg(r,Qi),r=b_(a,r,Qi)}n.memoizedProps=n.pendingProps,r===null?zc(n):Oe=r}function Ka(n,r,a,l){Bi=js=null,fd(r),ja=null,gl=0;var f=r.return;try{if(O2(n,f,r,a,Ue)){ct=1,Dc(n,kn(a,n.current)),Oe=null;return}}catch(d){if(f!==null)throw Oe=f,d;ct=1,Dc(n,kn(a,n.current)),Oe=null;return}r.flags&32768?(qe||l===1?n=!0:Ha||(Ue&536870912)!==0?n=!1:(Rr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Ln.current,l!==null&&l.tag===13&&(l.flags|=16384))),W_(r,n)):zc(r)}function zc(n){var r=n;do{if((r.flags&32768)!==0){W_(r,Rr);return}n=r.return;var a=P2(r.alternate,r,Qi);if(a!==null){Oe=a;return}if(r=r.sibling,r!==null){Oe=r;return}Oe=r=n}while(r!==null);ct===0&&(ct=5)}function W_(n,r){do{var a=M2(n.alternate,n);if(a!==null){a.flags&=32767,Oe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=a}while(n!==null);ct=6,Oe=null}function Z_(n,r,a,l,f,d,E,w,C){n.cancelPendingCommit=null;do Bc();while(Ht!==0);if((Ge&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Bf,Vo(n,a,d,E,w,C),n===et&&(Oe=et=null,Ue=0),Ga=r,Cr=n,Ya=a,Yd=d,$d=f,q_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$2(ds,function(){return iv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,f=G.p,G.p=2,E=Ge,Ge|=4;try{V2(n,r,a)}finally{Ge=E,G.p=f,W.T=l}}Ht=1,J_(),ev(),tv()}}function J_(){if(Ht===1){Ht=0;var n=Cr,r=Ga,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=W.T,W.T=null;var l=G.p;G.p=2;var f=Ge;Ge|=4;try{M_(r,n);var d=um,E=Bg(n.containerInfo),w=d.focusedElem,C=d.selectionRange;if(E!==w&&w&&w.ownerDocument&&zg(w.ownerDocument.documentElement,w)){if(C!==null&&Vf(w)){var Y=C.start,Z=C.end;if(Z===void 0&&(Z=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(Z,w.value.length);else{var ne=w.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var K=$.getSelection(),we=w.textContent.length,ve=Math.min(C.start,we),Xe=C.end===void 0?ve:Math.min(C.end,we);!K.extend&&ve>Xe&&(E=Xe,Xe=ve,ve=E);var j=jg(w,ve),M=jg(w,Xe);if(j&&M&&(K.rangeCount!==1||K.anchorNode!==j.node||K.anchorOffset!==j.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var F=ne.createRange();F.setStart(j.node,j.offset),K.removeAllRanges(),ve>Xe?(K.addRange(F),K.extend(M.node,M.offset)):(F.setEnd(M.node,M.offset),K.addRange(F))}}}}for(ne=[],K=w;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ne.length;w++){var J=ne[w];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Jc=!!lm,um=lm=null}finally{Ge=f,G.p=l,W.T=a}}n.current=r,Ht=2}}function ev(){if(Ht===2){Ht=0;var n=Cr,r=Ga,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=W.T,W.T=null;var l=G.p;G.p=2;var f=Ge;Ge|=4;try{D_(n,r.alternate,r)}finally{Ge=f,G.p=l,W.T=a}}Ht=3}}function tv(){if(Ht===4||Ht===3){Ht=0,Vu();var n=Cr,r=Ga,a=Ya,l=q_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ht=5:(Ht=0,Ga=Cr=null,nv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ir=null),ha(a),r=r.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(lt,r,void 0,(r.current.flags&128)===128)}catch(C){}if(l!==null){r=W.T,f=G.p,G.p=2,W.T=null;try{for(var d=n.onRecoverableError,E=0;E<l.length;E++){var w=l[E];d(w.value,{componentStack:w.stack})}}finally{W.T=r,G.p=f}}(Ya&3)!==0&&Bc(),gi(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===Kd?Sl++:(Sl=0,Kd=n):Sl=0,Rl(0)}}function nv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,sl(r)))}function Bc(n){return J_(),ev(),tv(),iv()}function iv(){if(Ht!==5)return!1;var n=Cr,r=Yd;Yd=0;var a=ha(Ya),l=W.T,f=G.p;try{G.p=32>a?32:a,W.T=null,a=$d,$d=null;var d=Cr,E=Ya;if(Ht=0,Ga=Cr=null,Ya=0,(Ge&6)!==0)throw Error(s(331));var w=Ge;if(Ge|=4,z_(d.current),L_(d,d.current,E,a),Ge=w,Rl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(lt,d)}catch(C){}return!0}finally{G.p=f,W.T=l,nv(n,r)}}function rv(n,r,a){r=kn(a,r),r=Rd(n.stateNode,r,2),n=vr(n,r,2),n!==null&&(xi(n,2),gi(n))}function We(n,r,a){if(n.tag===3)rv(n,n,a);else for(;r!==null;){if(r.tag===3){rv(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ir===null||!Ir.has(l))){n=kn(a,n),a=l_(2),l=vr(r,a,2),l!==null&&(u_(a,l,r,n),xi(l,2),gi(l));break}}r=r.return}}function Zd(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new j2;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(qd=!0,f.add(a),n=F2.bind(null,n,r,a),r.then(n,n))}function F2(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,et===n&&(Ue&a)===a&&(ct===4||ct===3&&(Ue&62914560)===Ue&&300>xn()-Gd?(Ge&2)===0&&$a(n,0):Hd|=a,Fa===Ue&&(Fa=0)),gi(n)}function sv(n,r){r===0&&(r=Mo()),n=Ca(n,r),n!==null&&(xi(n,r),gi(n))}function G2(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),sv(n,a)}function Y2(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),sv(n,a)}function $2(n,r){return hs(n,r)}var qc=null,Qa=null,Jd=!1,Hc=!1,em=!1,Ys=0;function gi(n){n!==Qa&&n.next===null&&(Qa===null?qc=Qa=n:Qa=Qa.next=n),Hc=!0,Jd||(Jd=!0,Q2())}function Rl(n,r){if(!em&&Hc){em=!0;do for(var a=!1,l=qc;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,w=l.pingedLanes;d=(1<<31-Kt(42|n)+1)-1,d&=f&~(E&~w),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,uv(l,d))}else d=Ue,d=ca(l,l===et?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ys(l,d)||(a=!0,uv(l,d));l=l.next}while(a);em=!1}}function K2(){av()}function av(){Hc=Jd=!1;var n=0;Ys!==0&&(iw()&&(n=Ys),Ys=0);for(var r=xn(),a=null,l=qc;l!==null;){var f=l.next,d=ov(l,r);d===0?(l.next=null,a===null?qc=f:a.next=f,f===null&&(Qa=a)):(a=l,(n!==0||(d&3)!==0)&&(Hc=!0)),l=f}Rl(n)}function ov(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,d=n.pendingLanes&-62914561;0<d;){var E=31-Kt(d),w=1<<E,C=f[E];C===-1?((w&a)===0||(w&l)!==0)&&(f[E]=ko(w,r)):C<=r&&(n.expiredLanes|=w),d&=~w}if(r=et,a=Ue,a=ca(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&fs(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||ys(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&fs(l),ha(a)){case 2:case 8:a=la;break;case 32:a=ds;break;case 268435456:a=ua;break;default:a=ds}return l=lv.bind(null,n),a=hs(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&fs(l),n.callbackPriority=2,n.callbackNode=null,2}function lv(n,r){if(Ht!==0&&Ht!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Bc()&&n.callbackNode!==a)return null;var l=Ue;return l=ca(n,n===et?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(F_(n,l,r),ov(n,xn()),n.callbackNode!=null&&n.callbackNode===a?lv.bind(null,n):null)}function uv(n,r){if(Bc())return null;F_(n,r,!0)}function Q2(){sw(function(){(Ge&6)!==0?hs(Do,K2):av()})}function tm(){return Ys===0&&(Ys=Po()),Ys}function cv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ya(""+n)}function hv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function X2(n,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=cv((f[yt]||null).action),E=l.submitter;E&&(r=(r=E[yt]||null)?cv(r.formAction):E.getAttribute("formAction"),r!==null&&(d=r,E=null));var w=new _a("action","action",null,l,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ys!==0){var C=E?hv(f,E):new FormData(f);Td(a,{pending:!0,data:C,method:f.method,action:d},null,C)}}else typeof d=="function"&&(w.preventDefault(),C=E?hv(f,E):new FormData(f),Td(a,{pending:!0,data:C,method:f.method,action:d},d,C))},currentTarget:f}]})}}for(var nm=0;nm<zf.length;nm++){var im=zf[nm],W2=im.toLowerCase(),Z2=im[0].toUpperCase()+im.slice(1);Gn(W2,"on"+Z2)}Gn(Fg,"onAnimationEnd"),Gn(Gg,"onAnimationIteration"),Gn(Yg,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(p2,"onTransitionRun"),Gn(g2,"onTransitionStart"),Gn(y2,"onTransitionCancel"),Gn($g,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function fv(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var E=l.length-1;0<=E;E--){var w=l[E],C=w.instance,Y=w.currentTarget;if(w=w.listener,C!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=Y;try{d(f)}catch(Z){Nc(Z)}f.currentTarget=null,d=C}else for(E=0;E<l.length;E++){if(w=l[E],C=w.instance,Y=w.currentTarget,w=w.listener,C!==d&&f.isPropagationStopped())break e;d=w,f.currentTarget=Y;try{d(f)}catch(Z){Nc(Z)}f.currentTarget=null,d=C}}}}function ke(n,r){var a=r[Uo];a===void 0&&(a=r[Uo]=new Set);var l=n+"__bubble";a.has(l)||(dv(r,n,2,!1),a.add(l))}function rm(n,r,a){var l=0;r&&(l|=4),dv(a,n,l,r)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function sm(n){if(!n[Fc]){n[Fc]=!0,jo.forEach(function(a){a!=="selectionchange"&&(J2.has(a)||rm(a,!1,n),rm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Fc]||(r[Fc]=!0,rm("selectionchange",!1,r))}}function dv(n,r,a,l){switch(Lv(r)){case 2:var f=Rw;break;case 8:f=xw;break;default:f=vm}a=f.bind(null,r,a,n),f=void 0,!Dn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(r,a,{capture:!0,passive:f}):n.addEventListener(r,a,!0):f!==void 0?n.addEventListener(r,a,{passive:f}):n.addEventListener(r,a,!1)}function am(n,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var w=l.stateNode.containerInfo;if(w===f)break;if(E===4)for(E=l.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;w!==null;){if(E=Ii(w),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){l=d=E;continue e}w=w.parentNode}}l=l.return}Yu(function(){var Y=d,Z=Nn(a),ne=[];e:{var $=Kg.get(n);if($!==void 0){var K=_a,we=n;switch(n){case"keypress":if(oi(a)===0)break e;case"keydown":case"keyup":K=Aa;break;case"focusin":we="focus",K=Ta;break;case"focusout":we="blur",K=Ta;break;case"beforeblur":case"afterblur":K=Ta;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Of;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=ec;break;case Fg:case Gg:case Yg:K=ba;break;case $g:K=nc;break;case"scroll":case"scrollend":K=$u;break;case"wheel":K=Sa;break;case"copy":case"cut":case"paste":K=wa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Wo;break;case"toggle":case"beforetoggle":K=rc}var ve=(r&4)!==0,Xe=!ve&&(n==="scroll"||n==="scrollend"),j=ve?$!==null?$+"Capture":null:$;ve=[];for(var M=Y,F;M!==null;){var J=M;if(F=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||F===null||j===null||(J=Ss(M,j),J!=null&&ve.push(Il(M,J,F))),Xe)break;M=M.return}0<ve.length&&($=new K($,we,null,a,Z),ne.push({event:$,listeners:ve}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",$&&a!==Oi&&(we=a.relatedTarget||a.fromElement)&&(Ii(we)||we[In]))break e;if((K||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,K?(we=a.relatedTarget||a.toElement,K=Y,we=we?Ii(we):null,we!==null&&(Xe=u(we),ve=we.tag,we!==Xe||ve!==5&&ve!==27&&ve!==6)&&(we=null)):(K=null,we=Y),K!==we)){if(ve=On,J="onMouseLeave",j="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ve=Wo,J="onPointerLeave",j="onPointerEnter",M="pointer"),Xe=K==null?$:ii(K),F=we==null?$:ii(we),$=new ve(J,M+"leave",K,a,Z),$.target=Xe,$.relatedTarget=F,J=null,Ii(Z)===Y&&(ve=new ve(j,M+"enter",we,a,Z),ve.target=F,ve.relatedTarget=Xe,J=ve),Xe=J,K&&we)t:{for(ve=K,j=we,M=0,F=ve;F;F=Xa(F))M++;for(F=0,J=j;J;J=Xa(J))F++;for(;0<M-F;)ve=Xa(ve),M--;for(;0<F-M;)j=Xa(j),F--;for(;M--;){if(ve===j||j!==null&&ve===j.alternate)break t;ve=Xa(ve),j=Xa(j)}ve=null}else ve=null;K!==null&&mv(ne,$,K,ve,!1),we!==null&&Xe!==null&&mv(ne,Xe,we,ve,!0)}}e:{if($=Y?ii(Y):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var de=kg;else if(xt($))if(Pg)de=f2;else{de=c2;var De=u2}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Fo(Y.elementType)&&(de=kg):de=h2;if(de&&(de=de(n,Y))){Li(ne,de,a,Z);break e}De&&De(n,$,Y),n==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&mr($,"number",$.value)}switch(De=Y?ii(Y):window,n){case"focusin":(xt(De)||De.contentEditable==="true")&&(Ra=De,Lf=Y,el=null);break;case"focusout":el=Lf=Ra=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,qg(ne,a,Z);break;case"selectionchange":if(m2)break;case"keydown":case"keyup":qg(ne,a,Z)}var pe;if(ci)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ve?Q(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(Ve||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ve&&(pe=Yo()):(ai=Z,pr="value"in ai?ai.value:ai.textContent,Ve=!0)),De=Gc(Y,Ee),0<De.length&&(Ee=new Qo(Ee,n,null,a,Z),ne.push({event:Ee,listeners:De}),pe?Ee.data=pe:(pe=le(a),pe!==null&&(Ee.data=pe)))),(pe=y?Rt(n,a):Le(n,a))&&(Ee=Gc(Y,"onBeforeInput"),0<Ee.length&&(De=new Qo("onBeforeInput","beforeinput",null,a,Z),ne.push({event:De,listeners:Ee}),De.data=pe)),X2(ne,n,Y,a,Z)}fv(ne,r)})}function Il(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Gc(n,r){for(var a=r+"Capture",l=[];n!==null;){var f=n,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Ss(n,a),f!=null&&l.unshift(Il(n,f,d)),f=Ss(n,r),f!=null&&l.push(Il(n,f,d))),n.tag===3)return l;n=n.return}return[]}function Xa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function mv(n,r,a,l,f){for(var d=r._reactName,E=[];a!==null&&a!==l;){var w=a,C=w.alternate,Y=w.stateNode;if(w=w.tag,C!==null&&C===l)break;w!==5&&w!==26&&w!==27||Y===null||(C=Y,f?(Y=Ss(a,d),Y!=null&&E.unshift(Il(a,Y,C))):f||(Y=Ss(a,d),Y!=null&&E.push(Il(a,Y,C)))),a=a.return}E.length!==0&&n.push({event:r,listeners:E})}var ew=/\r\n?/g,tw=/\u0000|\uFFFD/g;function pv(n){return(typeof n=="string"?n:""+n).replace(ew,"\n").replace(tw,"")}function gv(n,r){return r=pv(r),pv(n)===r}function Yc(){}function Qe(n,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Cn(n,""+l);break;case"className":ri(n,"class",l);break;case"tabIndex":ri(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(n,a,l);break;case"style":Ho(n,l,d);break;case"data":if(r!=="object"){ri(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ya(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&Qe(n,r,"name",f.name,f,null),Qe(n,r,"formEncType",f.formEncType,f,null),Qe(n,r,"formMethod",f.formMethod,f,null),Qe(n,r,"formTarget",f.formTarget,f,null)):(Qe(n,r,"encType",f.encType,f,null),Qe(n,r,"method",f.method,f,null),Qe(n,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=ya(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Yc);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=ya(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":ke("beforetoggle",n),ke("toggle",n),dr(n,"popover",l);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":dr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Nf.get(a)||a,dr(n,a,l))}}function om(n,r,a,l,f,d){switch(a){case"style":Ho(n,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Cn(n,l):(typeof l=="number"||typeof l=="bigint")&&Cn(n,""+l);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Yc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=n[yt]||null,d=d!=null?d[a]:null,typeof d=="function"&&n.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):dr(n,a,l)}}}function Ft(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var E=a[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Qe(n,r,d,E,a,null)}}f&&Qe(n,r,"srcSet",a.srcSet,a,null),l&&Qe(n,r,"src",a.src,a,null);return;case"input":ke("invalid",n);var w=d=E=f=null,C=null,Y=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":E=Z;break;case"checked":C=Z;break;case"defaultChecked":Y=Z;break;case"value":d=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,r));break;default:Qe(n,r,l,Z,a,null)}}bs(n,d,w,C,Y,E,f,!1),ga(n);return;case"select":ke("invalid",n),l=E=d=null;for(f in a)if(a.hasOwnProperty(f)&&(w=a[f],w!=null))switch(f){case"value":d=w;break;case"defaultValue":E=w;break;case"multiple":l=w;default:Qe(n,r,f,w,a,null)}r=d,a=E,n.multiple=!!l,r!=null?Di(n,!!l,r,!1):a!=null&&Di(n,!!l,a,!0);return;case"textarea":ke("invalid",n),d=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(w=a[E],w!=null))switch(E){case"value":l=w;break;case"defaultValue":f=w;break;case"children":d=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:Qe(n,r,E,w,a,null)}ws(n,l,f,d),ga(n);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Qe(n,r,C,l,a,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(l=0;l<xl.length;l++)ke(xl[l],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(l=a[Y],l!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Qe(n,r,Y,l,a,null)}return;default:if(Fo(r)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&om(n,r,Z,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&Qe(n,r,w,l,a,null))}function nw(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,w=null,C=null,Y=null,Z=null;for(K in a){var ne=a[K];if(a.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=ne;default:l.hasOwnProperty(K)||Qe(n,r,K,null,l,ne)}}for(var $ in l){var K=l[$];if(ne=a[$],l.hasOwnProperty($)&&(K!=null||ne!=null))switch($){case"type":d=K;break;case"name":f=K;break;case"checked":Y=K;break;case"defaultChecked":Z=K;break;case"value":E=K;break;case"defaultValue":w=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,r));break;default:K!==ne&&Qe(n,r,$,K,l,ne)}}gn(n,E,w,C,Y,Z,d,f);return;case"select":K=E=w=$=null;for(d in a)if(C=a[d],a.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":K=C;default:l.hasOwnProperty(d)||Qe(n,r,d,null,l,C)}for(f in l)if(d=l[f],C=a[f],l.hasOwnProperty(f)&&(d!=null||C!=null))switch(f){case"value":$=d;break;case"defaultValue":w=d;break;case"multiple":E=d;default:d!==C&&Qe(n,r,f,d,l,C)}r=w,a=E,l=K,$!=null?Di(n,!!a,$,!1):!!l!=!!a&&(r!=null?Di(n,!!a,r,!0):Di(n,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(w in a)if(f=a[w],a.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:Qe(n,r,w,null,l,f)}for(E in l)if(f=l[E],d=a[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":$=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&Qe(n,r,E,f,l,d)}$e(n,$,K);return;case"option":for(var we in a)if($=a[we],a.hasOwnProperty(we)&&$!=null&&!l.hasOwnProperty(we))switch(we){case"selected":n.selected=!1;break;default:Qe(n,r,we,null,l,$)}for(C in l)if($=l[C],K=a[C],l.hasOwnProperty(C)&&$!==K&&($!=null||K!=null))switch(C){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Qe(n,r,C,$,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)$=a[ve],a.hasOwnProperty(ve)&&$!=null&&!l.hasOwnProperty(ve)&&Qe(n,r,ve,null,l,$);for(Y in l)if($=l[Y],K=a[Y],l.hasOwnProperty(Y)&&$!==K&&($!=null||K!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:Qe(n,r,Y,$,l,K)}return;default:if(Fo(r)){for(var Xe in a)$=a[Xe],a.hasOwnProperty(Xe)&&$!==void 0&&!l.hasOwnProperty(Xe)&&om(n,r,Xe,void 0,l,$);for(Z in l)$=l[Z],K=a[Z],!l.hasOwnProperty(Z)||$===K||$===void 0&&K===void 0||om(n,r,Z,$,l,K);return}}for(var j in a)$=a[j],a.hasOwnProperty(j)&&$!=null&&!l.hasOwnProperty(j)&&Qe(n,r,j,null,l,$);for(ne in l)$=l[ne],K=a[ne],!l.hasOwnProperty(ne)||$===K||$==null&&K==null||Qe(n,r,ne,$,l,K)}var lm=null,um=null;function $c(n){return n.nodeType===9?n:n.ownerDocument}function yv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _v(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function cm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var hm=null;function iw(){var n=window.event;return n&&n.type==="popstate"?n===hm?!1:(hm=n,!0):(hm=null,!1)}var vv=typeof setTimeout=="function"?setTimeout:void 0,rw=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(n){return Ev.resolve(null).then(n).catch(aw)}:vv;function aw(n){setTimeout(function(){throw n})}function Dr(n){return n==="head"}function Tv(n,r){var a=r,l=0,f=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Cl(E.documentElement),a&2&&Cl(E.body),a&4)for(a=E.head,Cl(a),E=a.firstChild;E;){var w=E.nextSibling,C=E.nodeName;E[_s]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=w}}if(f===0){n.removeChild(d),Ll(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ll(r)}function fm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fm(a),fr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function ow(n,r,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[_s])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(d=n.getAttribute("rel"),d==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(d!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(d=n.getAttribute("src"),(d!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===d)return n}else return n;if(n=$n(n.nextSibling),n===null)break}return null}function lw(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=$n(n.nextSibling),n===null))return null;return n}function dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function uw(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function $n(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var mm=null;function bv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function wv(n,r,a){switch(r=$c(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Cl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);fr(n)}var jn=new Map,Av=new Set;function Kc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xi=G.d;G.d={f:cw,r:hw,D:fw,C:dw,L:mw,m:pw,X:yw,S:gw,M:_w};function cw(){var n=Xi.f(),r=jc();return n||r}function hw(n){var r=ni(n);r!==null&&r.tag===5&&r.type==="form"?Fy(r):Xi.r(n)}var Wa=typeof document>"u"?null:document;function Sv(n,r,a){var l=Wa;if(l&&typeof r=="string"&&r){var f=_t(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Av.has(f)||(Av.add(f),n={rel:n,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),Ft(r,"link",n),dt(r),l.head.appendChild(r)))}}function fw(n){Xi.D(n),Sv("dns-prefetch",n,null)}function dw(n,r){Xi.C(n,r),Sv("preconnect",n,r)}function mw(n,r,a){Xi.L(n,r,a);var l=Wa;if(l&&n&&r){var f='link[rel="preload"][as="'+_t(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+_t(a.imageSizes)+'"]')):f+='[href="'+_t(n)+'"]';var d=f;switch(r){case"style":d=Za(n);break;case"script":d=Ja(n)}jn.has(d)||(n=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),jn.set(d,n),l.querySelector(f)!==null||r==="style"&&l.querySelector(Nl(d))||r==="script"&&l.querySelector(Dl(d))||(r=l.createElement("link"),Ft(r,"link",n),dt(r),l.head.appendChild(r)))}}function pw(n,r){Xi.m(n,r);var a=Wa;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+_t(l)+'"][href="'+_t(n)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ja(n)}if(!jn.has(d)&&(n=v({rel:"modulepreload",href:n},r),jn.set(d,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Dl(d)))return}l=a.createElement("link"),Ft(l,"link",n),dt(l),a.head.appendChild(l)}}}function gw(n,r,a){Xi.S(n,r,a);var l=Wa;if(l&&n){var f=nn(l).hoistableStyles,d=Za(n);r=r||"default";var E=f.get(d);if(!E){var w={loading:0,preload:null};if(E=l.querySelector(Nl(d)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":r},a),(a=jn.get(d))&&pm(n,a);var C=E=l.createElement("link");dt(C),Ft(C,"link",n),C._p=new Promise(function(Y,Z){C.onload=Y,C.onerror=Z}),C.addEventListener("load",function(){w.loading|=1}),C.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Qc(E,r,l)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(d,E)}}}function yw(n,r){Xi.X(n,r);var a=Wa;if(a&&n){var l=nn(a).hoistableScripts,f=Ja(n),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(n=v({src:n,async:!0},r),(r=jn.get(f))&&gm(n,r),d=a.createElement("script"),dt(d),Ft(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function _w(n,r){Xi.M(n,r);var a=Wa;if(a&&n){var l=nn(a).hoistableScripts,f=Ja(n),d=l.get(f);d||(d=a.querySelector(Dl(f)),d||(n=v({src:n,async:!0,type:"module"},r),(r=jn.get(f))&&gm(n,r),d=a.createElement("script"),dt(d),Ft(d,"link",n),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Rv(n,r,a,l){var f=(f=Ae.current)?Kc(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Za(a.href),a=nn(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Za(a.href);var d=nn(f).hoistableStyles,E=d.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(n,E),(d=f.querySelector(Nl(n)))&&!d._p&&(E.instance=d,E.state.loading=5),jn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},jn.set(n,a),d||vw(f,n,a,E.state))),r&&l===null)throw Error(s(528,""));return E}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ja(a),a=nn(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Za(n){return'href="'+_t(n)+'"'}function Nl(n){return'link[rel="stylesheet"]['+n+"]"}function xv(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function vw(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Ft(r,"link",a),dt(r),n.head.appendChild(r))}function Ja(n){return'[src="'+_t(n)+'"]'}function Dl(n){return"script[async]"+n}function Iv(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+_t(a.href)+'"]');if(l)return r.instance=l,dt(l),l;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),dt(l),Ft(l,"style",f),Qc(l,a.precedence,n),r.instance=l;case"stylesheet":f=Za(a.href);var d=n.querySelector(Nl(f));if(d)return r.state.loading|=4,r.instance=d,dt(d),d;l=xv(a),(f=jn.get(f))&&pm(l,f),d=(n.ownerDocument||n).createElement("link"),dt(d);var E=d;return E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Ft(d,"link",l),r.state.loading|=4,Qc(d,a.precedence,n),r.instance=d;case"script":return d=Ja(a.src),(f=n.querySelector(Dl(d)))?(r.instance=f,dt(f),f):(l=a,(f=jn.get(d))&&(l=v({},a),gm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),dt(f),Ft(f,"link",l),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Qc(l,a.precedence,n));return r.instance}function Qc(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var w=l[E];if(w.dataset.precedence===r)d=w;else if(d!==f)break}d?d.parentNode.insertBefore(n,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function pm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function gm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Xc=null;function Cv(n,r,a){if(Xc===null){var l=new Map,f=Xc=new Map;f.set(a,l)}else f=Xc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var d=a[f];if(!(d[_s]||d[St]||n==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(r)||"";E=n+E;var w=l.get(E);w?w.push(d):l.set(E,[d])}}return l}function Nv(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function Ew(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Dv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ol=null;function Tw(){}function bw(n,r,a){if(Ol===null)throw Error(s(475));var l=Ol;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Za(a.href),d=n.querySelector(Nl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Wc.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=d,dt(d);return}d=n.ownerDocument||n,a=xv(a),(f=jn.get(f))&&pm(a,f),d=d.createElement("link"),dt(d);var E=d;E._p=new Promise(function(w,C){E.onload=w,E.onerror=C}),Ft(d,"link",a),r.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Wc.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function ww(){if(Ol===null)throw Error(s(475));var n=Ol;return n.stylesheets&&n.count===0&&ym(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&ym(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Wc(){if(this.count--,this.count===0){if(this.stylesheets)ym(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zc=null;function ym(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zc=new Map,r.forEach(Aw,n),Zc=null,Wc.call(n))}function Aw(n,r){if(!(r.state.loading&4)){var a=Zc.get(n);if(a)var l=a.get(null);else{a=new Map,Zc.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=r.instance,E=f.getAttribute("data-precedence"),d=a.get(E)||l,d===l&&a.set(null,f),a.set(E,f),this.count++,l=Wc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var kl={$$typeof:re,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Sw(n,r,a,l,f,d,E,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Ov(n,r,a,l,f,d,E,w,C,Y,Z,ne){return n=new Sw(n,r,a,E,w,C,Y,ne),r=1,d===!0&&(r|=24),d=_n(3,null,null,r),n.current=d,d.stateNode=n,r=Zf(),r.refCount++,n.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},nd(d),n}function kv(n){return n?(n=Na,n):Na}function Pv(n,r,a,l,f,d){f=kv(f),l.context===null?l.context=f:l.pendingContext=f,l=_r(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=vr(n,l,r),a!==null&&(wn(a,n,r),ul(a,n,r))}function Mv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function _m(n,r){Mv(n,r),(n=n.alternate)&&Mv(n,r)}function Vv(n){if(n.tag===13){var r=Ca(n,67108864);r!==null&&wn(r,n,67108864),_m(n,67108864)}}var Jc=!0;function Rw(n,r,a,l){var f=W.T;W.T=null;var d=G.p;try{G.p=2,vm(n,r,a,l)}finally{G.p=d,W.T=f}}function xw(n,r,a,l){var f=W.T;W.T=null;var d=G.p;try{G.p=8,vm(n,r,a,l)}finally{G.p=d,W.T=f}}function vm(n,r,a,l){if(Jc){var f=Em(l);if(f===null)am(n,r,l,eh,a),Uv(n,l);else if(Cw(f,n,r,a,l))l.stopPropagation();else if(Uv(n,l),r&4&&-1<Iw.indexOf(n)){for(;f!==null;){var d=ni(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=qn(d.pendingLanes);if(E!==0){var w=d;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var C=1<<31-Kt(E);w.entanglements[1]|=C,E&=~C}gi(d),(Ge&6)===0&&(Lc=xn()+500,Rl(0))}}break;case 13:w=Ca(d,2),w!==null&&wn(w,d,2),jc(),_m(d,2)}if(d=Em(l),d===null&&am(n,r,l,eh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else am(n,r,l,null,a)}}function Em(n){return n=Nn(n),Tm(n)}var eh=null;function Tm(n){if(eh=null,n=Ii(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return eh=n,null}function Lv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Af()){case Do:return 2;case la:return 8;case ds:case Sf:return 32;case ua:return 268435456;default:return 32}default:return 32}}var bm=!1,Or=null,kr=null,Pr=null,Pl=new Map,Ml=new Map,Mr=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uv(n,r){switch(n){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Pl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(r.pointerId)}}function Vl(n,r,a,l,f,d){return n===null||n.nativeEvent!==d?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=ni(r),r!==null&&Vv(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function Cw(n,r,a,l,f){switch(r){case"focusin":return Or=Vl(Or,n,r,a,l,f),!0;case"dragenter":return kr=Vl(kr,n,r,a,l,f),!0;case"mouseover":return Pr=Vl(Pr,n,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return Pl.set(d,Vl(Pl.get(d)||null,n,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Ml.set(d,Vl(Ml.get(d)||null,n,r,a,l,f)),!0}return!1}function jv(n){var r=Ii(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,ju(n.priority,function(){if(a.tag===13){var l=bn();l=ur(l);var f=Ca(a,l);f!==null&&wn(f,a,l),_m(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function th(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Em(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Oi=l,a.target.dispatchEvent(l),Oi=null}else return r=ni(a),r!==null&&Vv(r),n.blockedOn=a,!1;r.shift()}return!0}function zv(n,r,a){th(n)&&a.delete(r)}function Nw(){bm=!1,Or!==null&&th(Or)&&(Or=null),kr!==null&&th(kr)&&(kr=null),Pr!==null&&th(Pr)&&(Pr=null),Pl.forEach(zv),Ml.forEach(zv)}function nh(n,r){n.blockedOn===r&&(n.blockedOn=null,bm||(bm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Nw)))}var ih=null;function Bv(n){ih!==n&&(ih=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ih===n&&(ih=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],f=n[r+2];if(typeof l!="function"){if(Tm(l||a)===null)continue;break}var d=ni(a);d!==null&&(n.splice(r,3),r-=3,Td(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Ll(n){function r(C){return nh(C,n)}Or!==null&&nh(Or,n),kr!==null&&nh(kr,n),Pr!==null&&nh(Pr,n),Pl.forEach(r),Ml.forEach(r);for(var a=0;a<Mr.length;a++){var l=Mr[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Mr.length&&(a=Mr[0],a.blockedOn===null);)jv(a),a.blockedOn===null&&Mr.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],E=f[yt]||null;if(typeof d=="function")E||Bv(a);else if(E){var w=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[yt]||null)w=E.formAction;else if(Tm(f)!==null)continue}else w=E.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),Bv(a)}}}function wm(n){this._internalRoot=n}rh.prototype.render=wm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=bn();Pv(a,l,n,r,null,null)},rh.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Pv(n.current,2,null,n,null,null),jc(),r[In]=null}};function rh(n){this._internalRoot=n}rh.prototype.unstable_scheduleHydration=function(n){if(n){var r=cr();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Mr.length&&r!==0&&r<Mr[a].priority;a++);Mr.splice(a,0,n),a===0&&jv(n)}};var qv=e.version;if(qv!=="19.1.0")throw Error(s(527,qv,"19.1.0"));G.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var Dw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{lt=sh.inject(Dw),Fe=sh}catch(n){}}return jl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",f=r_,d=s_,E=a_,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=Ov(n,1,!1,null,null,a,l,f,d,E,w,null),n[In]=r.current,sm(n),new wm(r)},jl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,f="",d=r_,E=s_,w=a_,C=null,Y=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(Y=a.formState)),r=Ov(n,1,!0,r,a!=null?a:null,l,f,d,E,w,C,Y),r.context=kv(null),a=r.current,l=bn(),l=ur(l),f=_r(l),f.callback=null,vr(a,f,l),a=l,r.current.lanes=a,xi(r,a),gi(r),n[In]=r.current,sm(n),new rh(r)},jl.version="19.1.0",jl}var Zv;function qw(){if(Zv)return Rm.exports;Zv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rm.exports=Bw(),Rm.exports}var Hw=qw(),zl={},Jv;function Fw(){if(Jv)return zl;Jv=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.parse=h,zl.serialize=g;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function h(b,N){const x=new u,L=b.length;if(L<2)return x;const U=(N==null?void 0:N.decode)||v;let q=0;do{const X=b.indexOf("=",q);if(X===-1)break;const re=b.indexOf(";",q),ue=re===-1?L:re;if(X>ue){q=b.lastIndexOf(";",X-1)+1;continue}const ae=m(b,q,X),ye=p(b,X,ae),k=b.slice(ae,ye);if(x[k]===void 0){let R=m(b,X+1,ue),I=p(b,ue,R);const P=U(b.slice(R,I));x[k]=P}q=ue+1}while(q<L);return x}function m(b,N,x){do{const L=b.charCodeAt(N);if(L!==32&&L!==9)return N}while(++N<x);return x}function p(b,N,x){for(;N>x;){const L=b.charCodeAt(--N);if(L!==32&&L!==9)return N+1}return x}function g(b,N,x){const L=(x==null?void 0:x.encode)||encodeURIComponent;if(!i.test(b))throw new TypeError("argument name is invalid: ".concat(b));const U=L(N);if(!e.test(U))throw new TypeError("argument val is invalid: ".concat(N));let q=b+"="+U;if(!x)return q;if(x.maxAge!==void 0){if(!Number.isInteger(x.maxAge))throw new TypeError("option maxAge is invalid: ".concat(x.maxAge));q+="; Max-Age="+x.maxAge}if(x.domain){if(!t.test(x.domain))throw new TypeError("option domain is invalid: ".concat(x.domain));q+="; Domain="+x.domain}if(x.path){if(!s.test(x.path))throw new TypeError("option path is invalid: ".concat(x.path));q+="; Path="+x.path}if(x.expires){if(!A(x.expires)||!Number.isFinite(x.expires.valueOf()))throw new TypeError("option expires is invalid: ".concat(x.expires));q+="; Expires="+x.expires.toUTCString()}if(x.httpOnly&&(q+="; HttpOnly"),x.secure&&(q+="; Secure"),x.partitioned&&(q+="; Partitioned"),x.priority)switch(typeof x.priority=="string"?x.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError("option priority is invalid: ".concat(x.priority))}if(x.sameSite)switch(typeof x.sameSite=="string"?x.sameSite.toLowerCase():x.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid: ".concat(x.sameSite))}return q}function v(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch(N){return b}}function A(b){return o.call(b)==="[object Date]"}return zl}Fw();var e0="popstate";function Gw(i={}){function e(s,o){let{pathname:u,search:h,hash:m}=s.location;return $m("",{pathname:u,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:au(o)}return $w(e,t,null,i)}function rt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch(t){}}}function Yw(){return Math.random().toString(36).substring(2,10)}function t0(i,e){return{usr:i.state,key:i.key,idx:e}}function $m(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:t,key:e&&e.key||s||Yw()}}function au({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function yo(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function $w(i,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m="POP",p=null,g=v();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function v(){return(h.state||{idx:null}).idx}function A(){m="POP";let U=v(),q=U==null?null:U-g;g=U,p&&p({action:m,location:L.location,delta:q})}function b(U,q){m="PUSH";let X=$m(L.location,U,q);g=v()+1;let re=t0(X,g),ue=L.createHref(X);try{h.pushState(re,"",ue)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(ue)}u&&p&&p({action:m,location:L.location,delta:1})}function N(U,q){m="REPLACE";let X=$m(L.location,U,q);g=v();let re=t0(X,g),ue=L.createHref(X);h.replaceState(re,"",ue),u&&p&&p({action:m,location:L.location,delta:0})}function x(U){return Kw(U)}let L={get action(){return m},get location(){return i(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(e0,A),p=U,()=>{o.removeEventListener(e0,A),p=null}},createHref(U){return e(o,U)},createURL:x,encodeLocation(U){let q=x(U);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:b,replace:N,go(U){return h.go(U)}};return L}function Kw(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),rt(t,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:au(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function X1(i,e,t="/"){return Qw(i,e,t,!1)}function Qw(i,e,t,s){let o=typeof e=="string"?yo(e):e,u=nr(o.pathname||"/",t);if(u==null)return null;let h=W1(i);Xw(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=oA(u);m=sA(h[p],g,s)}return m}function W1(i,e=[],t=[],s=""){let o=(u,h,m)=>{let p={relativePath:m===void 0?u.path||"":m,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};p.relativePath.startsWith("/")&&(rt(p.relativePath.startsWith(s),'Absolute route path "'.concat(p.relativePath,'" nested under path "').concat(s,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),p.relativePath=p.relativePath.slice(s.length));let g=er([s,p.relativePath]),v=t.concat(p);u.children&&u.children.length>0&&(rt(u.index!==!0,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(g,'".')),W1(u.children,e,v,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:iA(g,u.index),routesMeta:v})};return i.forEach((u,h)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))o(u,h);else for(let p of Z1(u.path))o(u,h,p)}),e}function Z1(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Z1(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function Xw(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:rA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var Ww=/^:[\w-]+$/,Zw=3,Jw=2,eA=1,tA=10,nA=-2,n0=i=>i==="*";function iA(i,e){let t=i.split("/"),s=t.length;return t.some(n0)&&(s+=nA),e&&(s+=Jw),t.filter(o=>!n0(o)).reduce((o,u)=>o+(Ww.test(u)?Zw:u===""?eA:tA),s)}function rA(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function sA(i,e,t=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],g=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",A=xh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!A&&g&&t&&!s[s.length-1].route.index&&(A=xh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!A)return null;Object.assign(o,A.params),h.push({params:o,pathname:er([u,A.pathname]),pathnameBase:hA(er([u,A.pathnameBase])),route:b}),A.pathnameBase!=="/"&&(u=er([u,A.pathnameBase]))}return h}function xh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=aA(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:A},b)=>{if(v==="*"){let x=m[b]||"";h=u.slice(0,u.length-x.length).replace(/(.)\/+$/,"$1")}const N=m[b];return A&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function aA(i,e=!1,t=!0){Qn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'.concat(i,'" will be treated as if it were "').concat(i.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(i.replace(/\*$/,"/*"),'".'));let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function oA(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,'The URL path "'.concat(i,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(e,").")),i}}function nr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function lA(i,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?yo(i):i;return{pathname:t?t.startsWith("/")?t:uA(t,e):e,search:fA(s),hash:dA(o)}}function uA(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Nm(i,e,t,s){return"Cannot include a '".concat(i,"' character in a manually specified `to.").concat(e,"` field [").concat(JSON.stringify(s),"].  Please separate it out to the `to.").concat(t,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function cA(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Tp(i){let e=cA(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function bp(i,e,t,s=!1){let o;typeof i=="string"?o=yo(i):(o={...i},rt(!o.pathname||!o.pathname.includes("?"),Nm("?","pathname","search",o)),rt(!o.pathname||!o.pathname.includes("#"),Nm("#","pathname","hash",o)),rt(!o.search||!o.search.includes("#"),Nm("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=t;else{let A=e.length-1;if(!s&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),A-=1;o.pathname=b.join("/")}m=A>=0?e[A]:"/"}let p=lA(o,m),g=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var er=i=>i.join("/").replace(/\/\/+/g,"/"),hA=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),fA=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,dA=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function mA(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var J1=["POST","PUT","PATCH","DELETE"];new Set(J1);var pA=["GET",...J1];new Set(pA);var _o=H.createContext(null);_o.displayName="DataRouter";var Wh=H.createContext(null);Wh.displayName="DataRouterState";var eE=H.createContext({isTransitioning:!1});eE.displayName="ViewTransition";var gA=H.createContext(new Map);gA.displayName="Fetchers";var yA=H.createContext(null);yA.displayName="Await";var Zn=H.createContext(null);Zn.displayName="Navigation";var Eu=H.createContext(null);Eu.displayName="Location";var Jn=H.createContext({outlet:null,matches:[],isDataRoute:!1});Jn.displayName="Route";var wp=H.createContext(null);wp.displayName="RouteError";function _A(i,{relative:e}={}){rt(vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=H.useContext(Zn),{hash:o,pathname:u,search:h}=Tu(i,{relative:e}),m=u;return t!=="/"&&(m=u==="/"?t:er([t,u])),s.createHref({pathname:m,search:h,hash:o})}function vo(){return H.useContext(Eu)!=null}function or(){return rt(vo(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Eu).location}var tE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nE(i){H.useContext(Zn).static||H.useLayoutEffect(i)}function rs(){let{isDataRoute:i}=H.useContext(Jn);return i?kA():vA()}function vA(){rt(vo(),"useNavigate() may be used only in the context of a <Router> component.");let i=H.useContext(_o),{basename:e,navigator:t}=H.useContext(Zn),{matches:s}=H.useContext(Jn),{pathname:o}=or(),u=JSON.stringify(Tp(s)),h=H.useRef(!1);return nE(()=>{h.current=!0}),H.useCallback((p,g={})=>{if(Qn(h.current,tE),!h.current)return;if(typeof p=="number"){t.go(p);return}let v=bp(p,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:er([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,u,o,i])}var EA=H.createContext(null);function TA(i){let e=H.useContext(Jn).outlet;return e&&H.createElement(EA.Provider,{value:i},e)}function Tu(i,{relative:e}={}){let{matches:t}=H.useContext(Jn),{pathname:s}=or(),o=JSON.stringify(Tp(t));return H.useMemo(()=>bp(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function bA(i,e){return iE(i,e)}function iE(i,e,t,s){var q;rt(vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=H.useContext(Zn),{matches:u}=H.useContext(Jn),h=u[u.length-1],m=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",v=h&&h.route;{let X=v&&v.path||"";rE(p,!v||X.endsWith("*")||X.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(p,'" (under <Route path="').concat(X,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(X,'"> to <Route path="').concat(X==="/"?"*":"".concat(X,"/*"),'">.'))}let A=or(),b;if(e){let X=typeof e=="string"?yo(e):e;rt(g==="/"||((q=X.pathname)==null?void 0:q.startsWith(g)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(g,'" but pathname "').concat(X.pathname,'" was given in the `location` prop.')),b=X}else b=A;let N=b.pathname||"/",x=N;if(g!=="/"){let X=g.replace(/^\//,"").split("/");x="/"+N.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=X1(i,{pathname:x});Qn(v||L!=null,'No routes matched location "'.concat(b.pathname).concat(b.search).concat(b.hash,'" ')),Qn(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,'Matched leaf route at location "'.concat(b.pathname).concat(b.search).concat(b.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let U=xA(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},m,X.params),pathname:er([g,o.encodeLocation?o.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?g:er([g,o.encodeLocation?o.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),u,t,s);return e&&U?H.createElement(Eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},U):U}function wA(){let i=OA(),e=mA(i)?"".concat(i.status," ").concat(i.statusText):i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:u},"ErrorBoundary")," or"," ",H.createElement("code",{style:u},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,h)}var AA=H.createElement(wA,null),SA=class extends H.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?H.createElement(Jn.Provider,{value:this.props.routeContext},H.createElement(wp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RA({routeContext:i,match:e,children:t}){let s=H.useContext(_o);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(Jn.Provider,{value:i},t)}function xA(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,u=t==null?void 0:t.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);rt(p>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(u).join(","))),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,m=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:v,errors:A}=t,b=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||b){h=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}return o.reduceRight((p,g,v)=>{let A,b=!1,N=null,x=null;t&&(A=u&&g.route.id?u[g.route.id]:void 0,N=g.route.errorElement||AA,h&&(m<0&&v===0?(rE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):m===v&&(b=!0,x=g.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,v+1)),U=()=>{let q;return A?q=N:b?q=x:g.route.Component?q=H.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=p,H.createElement(RA,{match:g,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:q})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?H.createElement(SA,{location:t.location,revalidation:t.revalidation,component:N,error:A,children:U(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):U()},null)}function Ap(i){return"".concat(i," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function IA(i){let e=H.useContext(_o);return rt(e,Ap(i)),e}function CA(i){let e=H.useContext(Wh);return rt(e,Ap(i)),e}function NA(i){let e=H.useContext(Jn);return rt(e,Ap(i)),e}function Sp(i){let e=NA(i),t=e.matches[e.matches.length-1];return rt(t.route.id,"".concat(i,' can only be used on routes that contain a unique "id"')),t.route.id}function DA(){return Sp("useRouteId")}function OA(){var s;let i=H.useContext(wp),e=CA("useRouteError"),t=Sp("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function kA(){let{router:i}=IA("useNavigate"),e=Sp("useNavigate"),t=H.useRef(!1);return nE(()=>{t.current=!0}),H.useCallback(async(o,u={})=>{Qn(t.current,tE),t.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var i0={};function rE(i,e,t){!e&&!i0[i]&&(i0[i]=!0,Qn(!1,t))}H.memo(PA);function PA({routes:i,future:e,state:t}){return iE(i,void 0,t,e)}function MA({to:i,replace:e,state:t,relative:s}){rt(vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=H.useContext(Zn);Qn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=H.useContext(Jn),{pathname:h}=or(),m=rs(),p=bp(i,Tp(u),h,s==="path"),g=JSON.stringify(p);return H.useEffect(()=>{m(JSON.parse(g),{replace:e,state:t,relative:s})},[m,g,s,e,t]),null}function VA(i){return TA(i.context)}function ln(i){rt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LA({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){rt(!vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=H.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=yo(t));let{pathname:p="/",search:g="",hash:v="",state:A=null,key:b="default"}=t,N=H.useMemo(()=>{let x=nr(p,h);return x==null?null:{location:{pathname:x,search:g,hash:v,state:A,key:b},navigationType:s}},[h,p,g,v,A,b,s]);return Qn(N!=null,'<Router basename="'.concat(h,'"> is not able to match the URL "').concat(p).concat(g).concat(v,"\" because it does not start with the basename, so the <Router> won't render anything.")),N==null?null:H.createElement(Zn.Provider,{value:m},H.createElement(Eu.Provider,{children:e,value:N}))}function UA({children:i,location:e}){return bA(Km(i),e)}function Km(i,e=[]){let t=[];return H.Children.forEach(i,(s,o)=>{if(!H.isValidElement(s))return;let u=[...e,o];if(s.type===H.Fragment){t.push.apply(t,Km(s.props.children,u));return}rt(s.type===ln,"[".concat(typeof s.type=="string"?s.type:s.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),rt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Km(s.props.children,u)),t.push(h)}),t}var ph="get",gh="application/x-www-form-urlencoded";function Zh(i){return i!=null&&typeof i.tagName=="string"}function jA(i){return Zh(i)&&i.tagName.toLowerCase()==="button"}function zA(i){return Zh(i)&&i.tagName.toLowerCase()==="form"}function BA(i){return Zh(i)&&i.tagName.toLowerCase()==="input"}function qA(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function HA(i,e){return i.button===0&&(!e||e==="_self")&&!qA(i)}var ah=null;function FA(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch(i){ah=!0}return ah}var GA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dm(i){return i!=null&&!GA.has(i)?(Qn(!1,'"'.concat(i,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(gh,'"')),null):i}function YA(i,e){let t,s,o,u,h;if(zA(i)){let m=i.getAttribute("action");s=m?nr(m,e):null,t=i.getAttribute("method")||ph,o=Dm(i.getAttribute("enctype"))||gh,u=new FormData(i)}else if(jA(i)||BA(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?nr(p,e):null,t=i.getAttribute("formmethod")||m.getAttribute("method")||ph,o=Dm(i.getAttribute("formenctype"))||Dm(m.getAttribute("enctype"))||gh,u=new FormData(m,i),!FA()){let{name:g,type:v,value:A}=i;if(v==="image"){let b=g?"".concat(g,"."):"";u.append("".concat(b,"x"),"0"),u.append("".concat(b,"y"),"0")}else g&&u.append(g,A)}}else{if(Zh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ph,s=null,o=gh,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:h}}function Rp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function $A(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error("Error loading route module `".concat(i.module,"`, reloading page...")),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KA(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function QA(i,e,t){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await $A(u,t);return h.links?h.links():[]}return[]}));return JA(s.flat(1).filter(KA).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function r0(i,e,t,s,o,u){let h=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,m=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return u==="assets"?e.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{var A;let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=t[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function XA(i,e,{includeHydrateFallback:t}={}){return WA(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function WA(i){return[...new Set(i)]}function ZA(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function JA(i,e){let t=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(ZA(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eS=new Set([100,101,204,205]);function tS(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&nr(t.pathname,e)==="/"?t.pathname="".concat(e.replace(/\/$/,""),"/_root.data"):t.pathname="".concat(t.pathname.replace(/\/$/,""),".data"),t}function sE(){let i=H.useContext(_o);return Rp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function nS(){let i=H.useContext(Wh);return Rp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var xp=H.createContext(void 0);xp.displayName="FrameworkContext";function aE(){let i=H.useContext(xp);return Rp(i,"You must render this element inside a <HydratedRouter> element"),i}function iS(i,e){let t=H.useContext(xp),[s,o]=H.useState(!1),[u,h]=H.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:A}=e,b=H.useRef(null);H.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let L=q=>{q.forEach(X=>{h(X.isIntersecting)})},U=new IntersectionObserver(L,{threshold:.5});return b.current&&U.observe(b.current),()=>{U.disconnect()}}},[i]),H.useEffect(()=>{if(s){let L=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(L)}}},[s]);let N=()=>{o(!0)},x=()=>{o(!1),h(!1)};return t?i!=="intent"?[u,b,{}]:[u,b,{onFocus:Bl(m,N),onBlur:Bl(p,x),onMouseEnter:Bl(g,N),onMouseLeave:Bl(v,x),onTouchStart:Bl(A,N)}]:[!1,b,{}]}function Bl(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function rS({page:i,...e}){let{router:t}=sE(),s=H.useMemo(()=>X1(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?H.createElement(aS,{page:i,matches:s,...e}):null}function sS(i){let{manifest:e,routeModules:t}=aE(),[s,o]=H.useState([]);return H.useEffect(()=>{let u=!1;return QA(i,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,t]),s}function aS({page:i,matches:e,...t}){let s=or(),{manifest:o,routeModules:u}=aE(),{basename:h}=sE(),{loaderData:m,matches:p}=nS(),g=H.useMemo(()=>r0(i,e,p,o,s,"data"),[i,e,p,o,s]),v=H.useMemo(()=>r0(i,e,p,o,s,"assets"),[i,e,p,o,s]),A=H.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let x=new Set,L=!1;if(e.forEach(q=>{var re;let X=o.routes[q.route.id];!X||!X.hasLoader||(!g.some(ue=>ue.route.id===q.route.id)&&q.route.id in m&&((re=u[q.route.id])!=null&&re.shouldRevalidate)||X.hasClientLoader?L=!0:x.add(q.route.id))}),x.size===0)return[];let U=tS(i,h);return L&&x.size>0&&U.searchParams.set("_routes",e.filter(q=>x.has(q.route.id)).map(q=>q.route.id).join(",")),[U.pathname+U.search]},[h,m,s,o,g,e,i,u]),b=H.useMemo(()=>XA(v,o),[v,o]),N=sS(v);return H.createElement(H.Fragment,null,A.map(x=>H.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),b.map(x=>H.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),N.map(({key:x,link:L})=>H.createElement("link",{key:x,...L})))}function oS(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var oE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oE&&(window.__reactRouterVersion="7.6.2")}catch(i){}function lS({basename:i,children:e,window:t}){let s=H.useRef();s.current==null&&(s.current=Gw({window:t,v5Compat:!0}));let o=s.current,[u,h]=H.useState({action:o.action,location:o.location}),m=H.useCallback(p=>{H.startTransition(()=>h(p))},[h]);return H.useLayoutEffect(()=>o.listen(m),[o,m]),H.createElement(LA,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var lE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bu=H.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:v,viewTransition:A,...b},N){let{basename:x}=H.useContext(Zn),L=typeof g=="string"&&lE.test(g),U,q=!1;if(typeof g=="string"&&L&&(U=g,oE))try{let I=new URL(window.location.href),P=g.startsWith("//")?new URL(I.protocol+g):new URL(g),V=nr(P.pathname,x);P.origin===I.origin&&V!=null?g=V+P.search+P.hash:q=!0}catch(I){Qn(!1,'<Link to="'.concat(g,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let X=_A(g,{relative:o}),[re,ue,ae]=iS(s,b),ye=hS(g,{replace:h,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:A});function k(I){e&&e(I),I.defaultPrevented||ye(I)}let R=H.createElement("a",{...b,...ae,href:U||X,onClick:q||u?e:k,ref:oS(N,ue),target:p,"data-discover":!L&&t==="render"?"true":void 0});return re&&!L?H.createElement(H.Fragment,null,R,H.createElement(rS,{page:X})):R});bu.displayName="Link";var uE=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:m,children:p,...g},v){let A=Tu(h,{relative:g.relative}),b=or(),N=H.useContext(Wh),{navigator:x,basename:L}=H.useContext(Zn),U=N!=null&&gS(A)&&m===!0,q=x.encodeLocation?x.encodeLocation(A).pathname:A.pathname,X=b.pathname,re=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(X=X.toLowerCase(),re=re?re.toLowerCase():null,q=q.toLowerCase()),re&&L&&(re=nr(re,L)||re);const ue=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ae=X===q||!o&&X.startsWith(q)&&X.charAt(ue)==="/",ye=re!=null&&(re===q||!o&&re.startsWith(q)&&re.charAt(q.length)==="/"),k={isActive:ae,isPending:ye,isTransitioning:U},R=ae?e:void 0,I;typeof s=="function"?I=s(k):I=[s,ae?"active":null,ye?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(k):u;return H.createElement(bu,{...g,"aria-current":R,className:I,ref:v,style:P,to:h,viewTransition:m},typeof p=="function"?p(k):p)});uE.displayName="NavLink";var uS=H.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:h=ph,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:A,...b},N)=>{let x=mS(),L=pS(m,{relative:g}),U=h.toLowerCase()==="get"?"get":"post",q=typeof m=="string"&&lE.test(m),X=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let ue=re.nativeEvent.submitter,ae=(ue==null?void 0:ue.getAttribute("formmethod"))||h;x(ue||re.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:o,state:u,relative:g,preventScrollReset:v,viewTransition:A})};return H.createElement("form",{ref:N,method:U,action:L,onSubmit:s?p:X,...b,"data-discover":!q&&i==="render"?"true":void 0})});uS.displayName="Form";function cS(i){return"".concat(i," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function cE(i){let e=H.useContext(_o);return rt(e,cS(i)),e}function hS(i,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=rs(),p=or(),g=Tu(i,{relative:u});return H.useCallback(v=>{if(HA(v,e)){v.preventDefault();let A=t!==void 0?t:au(p)===au(g);m(i,{replace:A,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,m,g,t,s,e,i,o,u,h])}var fS=0,dS=()=>"__".concat(String(++fS),"__");function mS(){let{router:i}=cE("useSubmit"),{basename:e}=H.useContext(Zn),t=DA();return H.useCallback(async(s,o={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=YA(s,e);if(o.navigate===!1){let v=o.fetcherKey||dS();await i.fetch(v,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,t])}function pS(i,{relative:e}={}){let{basename:t}=H.useContext(Zn),s=H.useContext(Jn);rt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Tu(i||".",{relative:e})},h=or();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(A=>A).forEach(A=>m.append("index",A));let v=m.toString();u.search=v?"?".concat(v):""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:er([t,u.pathname])),au(u)}function gS(i,e={}){let t=H.useContext(eE);rt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=cE("useViewTransitionState"),o=Tu(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=nr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=nr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return xh(o.pathname,h)!=null||xh(o.pathname,u)!=null}[...eS];const hE=H.createContext(void 0),yS=({children:i})=>{const[e,t]=H.useState([]),g={cartItems:e,addToCart:v=>{t(A=>{if(A.find(x=>x.id===v.id))return A.map(x=>x.id===v.id?{...x,quantity:x.quantity+1}:x);const N={...v,quantity:1,collectionName:v.collectionName||""};return[...A,N]})},decreaseQuantity:v=>{t(A=>{const b=A.find(N=>N.id===v);return b&&b.quantity>1?A.map(N=>N.id===v?{...N,quantity:N.quantity-1}:N):A.filter(N=>N.id!==v)})},removeFromCart:v=>{t(A=>A.filter(b=>b.id!==v))},clearCart:()=>{t([])},getCartTotal:()=>e.reduce((v,A)=>v+A.price*A.quantity,0),getCartItemCount:()=>e.reduce((v,A)=>v+A.quantity,0)};return T.jsx(hE.Provider,{value:g,children:i})},Eo=()=>{const i=H.useContext(hE);if(i===void 0)throw new Error("useCart must be used within a CartProvider");return i},_S=()=>{};var s0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vS=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],m=i[t++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},dE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,v=u>>2,A=(u&3)<<4|m>>4;let b=(m&15)<<2|g>>6,N=g&63;p||(N=64,h||(b=64)),s.push(t[v],t[A],t[b],t[N])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(fE(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):vS(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const g=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||A==null)throw new ES;const b=u<<2|m>>4;if(s.push(b),g!==64){const N=m<<4&240|g>>2;if(s.push(N),A!==64){const x=g<<6&192|A;s.push(x)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class ES extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TS=function(i){const e=fE(i);return dE.encodeByteArray(e,!0)},Ih=function(i){return TS(i).replace(/\./g,"")},mE=function(i){try{return dE.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=()=>bS().__FIREBASE_DEFAULTS__,AS=()=>{if(typeof process>"u"||typeof s0>"u")return;const i=s0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},SS=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=i&&mE(i[1]);return e&&JSON.parse(e)},Jh=()=>{try{return _S()||wS()||AS()||SS()}catch(i){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(i));return}},pE=i=>{var e,t;return(t=(e=Jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},gE=i=>{const e=pE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error("Invalid host ".concat(e," with no separate hostname and port!"));const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},yE=()=>{var i;return(i=Jh())===null||i===void 0?void 0:i.config},_E=i=>{var e;return(e=Jh())===null||e===void 0?void 0:e["_".concat(i)]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(i){return i.endsWith(".cloudworkstations.dev")}async function Ip(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:"https://securetoken.google.com/".concat(s),aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ih(JSON.stringify(t)),Ih(JSON.stringify(h)),""].join(".")}const Xl={};function xS(){const i={prod:[],emulator:[]};for(const e of Object.keys(Xl))Xl[e]?i.emulator.push(e):i.prod.push(e);return i}function IS(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let a0=!1;function Cp(i,e){if(typeof window>"u"||typeof document>"u"||!ss(window.location.host)||Xl[i]===e||Xl[i]||a0)return;Xl[i]=e;function t(b){return"__firebase__banner__".concat(b)}const s="__firebase__banner",u=xS().prod.length>0;function h(){const b=document.getElementById(s);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,N){b.setAttribute("width","24"),b.setAttribute("id",N),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{a0=!0,h()},b}function v(b,N){b.setAttribute("id",N),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function A(){const b=IS(s),N=t("text"),x=document.getElementById(N)||document.createElement("span"),L=t("learnmore"),U=document.getElementById(L)||document.createElement("a"),q=t("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const re=b.element;m(re),v(U,L);const ue=g();p(X,q),re.append(X,x,U,ue),document.body.appendChild(re)}u?(x.innerText="Preview backend disconnected.",X.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(X.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',x.innerText="Preview backend running in this workspace."),x.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function NS(){var i;const e=(i=Jh())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(t){return!1}}function DS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OS(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function kS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PS(){const i=tn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function MS(){return!NS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VS(){try{return typeof indexedDB=="object"}catch(i){return!1}}function LS(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="FirebaseError";class Ai extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=US,Object.setPrototypeOf(this,Ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o="".concat(this.service,"/").concat(e),u=this.errors[e],h=u?jS(u,s):"Error",m="".concat(this.serviceName,": ").concat(h," (").concat(o,").");return new Ai(o,m,s)}}function jS(i,e){return i.replace(zS,(t,s)=>{const o=e[s];return o!=null?String(o):"<".concat(s,"?>")})}const zS=/\{\$([^}]+)}/g;function BS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ws(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(o0(u)&&o0(h)){if(!Ws(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function o0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Hl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Fl(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function qS(i,e){const t=new HS(i,e);return t.subscribe.bind(t)}class HS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");FS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Om),o.error===void 0&&(o.error=Om),o.complete===void 0&&(o.complete=Om);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch(h){}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FS(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function Om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(i){return i&&i._delegate?i._delegate:i}class Xr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new RS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch(o){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if($S(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch(t){}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch(u){}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error("".concat(this.name,"(").concat(s,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch(u){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YS(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch(o){}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YS(i){return i===$s?void 0:i}function $S(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const QS={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},XS=Pe.INFO,WS={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},ZS=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=WS[e];if(o)console[o]("[".concat(s,"]  ").concat(i.name,":"),...t);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class Np{constructor(e){this.name=e,this._logLevel=XS,this._logHandler=ZS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const JS=(i,e)=>e.some(t=>i instanceof t);let l0,u0;function eR(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tR(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EE=new WeakMap,Qm=new WeakMap,TE=new WeakMap,km=new WeakMap,Dp=new WeakMap;function nR(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(Gr(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&EE.set(t,i)}).catch(()=>{}),Dp.set(e,i),e}function iR(i){if(Qm.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Qm.set(i,e)}let Xm={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||TE.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gr(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function rR(i){Xm=i(Xm)}function sR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Pm(this),e,...t);return TE.set(s,e.sort?e.sort():[e]),Gr(s)}:tR().includes(i)?function(...e){return i.apply(Pm(this),e),Gr(EE.get(this))}:function(...e){return Gr(i.apply(Pm(this),e))}}function aR(i){return typeof i=="function"?sR(i):(i instanceof IDBTransaction&&iR(i),JS(i,eR())?new Proxy(i,Xm):i)}function Gr(i){if(i instanceof IDBRequest)return nR(i);if(km.has(i))return km.get(i);const e=aR(i);return e!==i&&(km.set(i,e),Dp.set(e,i)),e}const Pm=i=>Dp.get(i);function oR(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=Gr(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Gr(h.result),p.oldVersion,p.newVersion,Gr(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const lR=["get","getKey","getAll","getAllKeys","count"],uR=["put","add","delete","clear"],Mm=new Map;function c0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=uR.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||lR.includes(t)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[t](...m),o&&p.done]))[0]};return Mm.set(e,u),u}rR(i=>({...i,get:(e,t,s)=>c0(e,t)||i.get(e,t,s),has:(e,t)=>!!c0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hR(t)){const s=t.getImmediate();return"".concat(s.library,"/").concat(s.version)}else return null}).filter(t=>t).join(" ")}}function hR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wm="@firebase/app",h0="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Np("@firebase/app"),fR="@firebase/app-compat",dR="@firebase/analytics-compat",mR="@firebase/analytics",pR="@firebase/app-check-compat",gR="@firebase/app-check",yR="@firebase/auth",_R="@firebase/auth-compat",vR="@firebase/database",ER="@firebase/data-connect",TR="@firebase/database-compat",bR="@firebase/functions",wR="@firebase/functions-compat",AR="@firebase/installations",SR="@firebase/installations-compat",RR="@firebase/messaging",xR="@firebase/messaging-compat",IR="@firebase/performance",CR="@firebase/performance-compat",NR="@firebase/remote-config",DR="@firebase/remote-config-compat",OR="@firebase/storage",kR="@firebase/storage-compat",PR="@firebase/firestore",MR="@firebase/ai",VR="@firebase/firestore-compat",LR="firebase",UR="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="[DEFAULT]",jR={[Wm]:"fire-core",[fR]:"fire-core-compat",[mR]:"fire-analytics",[dR]:"fire-analytics-compat",[gR]:"fire-app-check",[pR]:"fire-app-check-compat",[yR]:"fire-auth",[_R]:"fire-auth-compat",[vR]:"fire-rtdb",[ER]:"fire-data-connect",[TR]:"fire-rtdb-compat",[bR]:"fire-fn",[wR]:"fire-fn-compat",[AR]:"fire-iid",[SR]:"fire-iid-compat",[RR]:"fire-fcm",[xR]:"fire-fcm-compat",[IR]:"fire-perf",[CR]:"fire-perf-compat",[NR]:"fire-rc",[DR]:"fire-rc-compat",[OR]:"fire-gcs",[kR]:"fire-gcs-compat",[PR]:"fire-fst",[VR]:"fire-fst-compat",[MR]:"fire-vertex","fire-js":"fire-js",[LR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new Map,zR=new Map,Jm=new Map;function f0(i,e){try{i.container.addComponent(e)}catch(t){ir.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(i.name),t)}}function Zs(i){const e=i.name;if(Jm.has(e))return ir.debug("There were multiple attempts to register component ".concat(e,".")),!1;Jm.set(e,i);for(const t of Ch.values())f0(t,i);for(const t of zR.values())f0(t,i);return!0}function ef(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function Bn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new wu("app","Firebase",BR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=UR;function bE(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Zm,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Yr.create("bad-app-name",{appName:String(o)});if(t||(t=yE()),!t)throw Yr.create("no-options");const u=Ch.get(o);if(u){if(Ws(t,u.options)&&Ws(s,u.config))return u;throw Yr.create("duplicate-app",{appName:o})}const h=new KS(o);for(const p of Jm.values())h.addComponent(p);const m=new qR(t,s,h);return Ch.set(o,m),m}function Op(i=Zm){const e=Ch.get(i);if(!e&&i===Zm&&yE())return bE();if(!e)throw Yr.create("no-app",{appName:i});return e}function vi(i,e,t){var s;let o=(s=jR[i])!==null&&s!==void 0?s:i;t&&(o+="-".concat(t));const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=['Unable to register library "'.concat(o,'" with version "').concat(e,'":')];u&&m.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),u&&h&&m.push("and"),h&&m.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),ir.warn(m.join(" "));return}Zs(new Xr("".concat(o,"-version"),()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="firebase-heartbeat-database",FR=1,ou="firebase-heartbeat-store";let Vm=null;function wE(){return Vm||(Vm=oR(HR,FR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ou)}catch(t){console.warn(t)}}}}).catch(i=>{throw Yr.create("idb-open",{originalErrorMessage:i.message})})),Vm}async function GR(i){try{const t=(await wE()).transaction(ou),s=await t.objectStore(ou).get(AE(i));return await t.done,s}catch(e){if(e instanceof Ai)ir.warn(e.message);else{const t=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(t.message)}}}async function d0(i,e){try{const s=(await wE()).transaction(ou,"readwrite");await s.objectStore(ou).put(e,AE(i)),await s.done}catch(t){if(t instanceof Ai)ir.warn(t.message);else{const s=Yr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ir.warn(s.message)}}}function AE(i){return"".concat(i.name,"!").concat(i.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=1024,$R=30;class KR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new XR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=m0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>$R){const h=WR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ir.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=m0(),{heartbeatsToSend:s,unsentEntries:o}=QR(this._heartbeatsCache.heartbeats),u=Ih(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return ir.warn(t),""}}}function m0(){return new Date().toISOString().substring(0,10)}function QR(i,e=YR){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),p0(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),p0(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class XR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VS()?LS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function p0(i){return Ih(JSON.stringify({version:2,heartbeats:i})).length}function WR(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(i){Zs(new Xr("platform-logger",e=>new cR(e),"PRIVATE")),Zs(new Xr("heartbeat",e=>new KR(e),"PRIVATE")),vi(Wm,h0,i),vi(Wm,h0,"esm2017"),vi("fire-js","")}ZR("");function kp(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function SE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JR=SE,RE=new wu("auth","Firebase",SE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Np("@firebase/auth");function ex(i,...e){Nh.logLevel<=Pe.WARN&&Nh.warn("Auth (".concat(ra,"): ").concat(i),...e)}function yh(i,...e){Nh.logLevel<=Pe.ERROR&&Nh.error("Auth (".concat(ra,"): ").concat(i),...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(i,...e){throw Pp(i,...e)}function Ei(i,...e){return Pp(i,...e)}function xE(i,e,t){const s=Object.assign(Object.assign({},JR()),{[e]:t});return new wu("auth","Firebase",s).create(e,{appName:i.name})}function $r(i){return xE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pp(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return RE.create(i,...e)}function be(i,e,...t){if(!i)throw Pp(e,...t)}function Zi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw yh(e),new Error(e)}function rr(i,e){i||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function tx(){return g0()==="http:"||g0()==="https:"}function g0(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tx()||OS()||"connection"in navigator)?navigator.onLine:!0}function ix(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.shortDelay=e,this.longDelay=t,rr(t>e,"Short delay should be less than long delay!"),this.isMobile=CS()||kS()}get(){return nx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(i,e){rr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?"".concat(t).concat(e.startsWith("/")?e.slice(1):e):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ax=new Su(3e4,6e4);function sa(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function as(i,e,t,s,o={}){return CE(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Au(Object.assign({key:i.config.apiKey},h)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},u);return DS()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&ss(i.emulatorConfig.host)&&(g.credentials="include"),IE.fetch()(await NE(i,i.config.apiHost,t,m),g)})}async function CE(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},rx),e);try{const o=new lx(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw oh(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw oh(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw oh(i,"user-disabled",h);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw xE(i,v,g);Xn(i,v)}}catch(o){if(o instanceof Ai)throw o;Xn(i,"network-request-failed",{message:String(o)})}}async function tf(i,e,t,s,o={}){const u=await as(i,e,t,s,o);return"mfaPendingCredential"in u&&Xn(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function NE(i,e,t,s){const o="".concat(e).concat(t,"?").concat(s),u=i,h=u.config.emulator?Mp(i.config,o):"".concat(i.config.apiScheme,"://").concat(o);return sx.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function ox(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ei(this.auth,"network-request-failed")),ax.get())})}}function oh(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Ei(i,e,s);return o.customData._tokenResponse=t,o}function y0(i){return i!==void 0&&i.enterprise!==void 0}class ux{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ox(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cx(i,e){return as(i,"GET","/v2/recaptchaConfig",sa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hx(i,e){return as(i,"POST","/v1/accounts:delete",e)}async function Dh(i,e){return as(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function fx(i,e=!1){const t=st(i),s=await t.getIdToken(e),o=Vp(s);be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Wl(Lm(o.auth_time)),issuedAtTime:Wl(Lm(o.iat)),expirationTime:Wl(Lm(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Lm(i){return Number(i)*1e3}function Vp(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=mE(t);return o?JSON.parse(o):(yh("Failed to decode base64 JWT payload"),null)}catch(o){return yh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function _0(i){const e=Vp(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ai&&dx(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function dx({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wl(this.lastLoginAt),this.creationTime=Wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(i){var e;const t=i.auth,s=await i.getIdToken(),o=await lu(i,Dh(t,{idToken:s}));be(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?DE(u.providerUserInfo):[],m=gx(i.providerData,h),p=i.isAnonymous,g=!(i.email&&u.passwordHash)&&!(m!=null&&m.length),v=p?g:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new tp(u.createdAt,u.lastLoginAt),isAnonymous:v};Object.assign(i,A)}async function px(i){const e=st(i);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gx(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function DE(i){return i.map(e=>{var{providerId:t}=e,s=kp(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(i,e){const t=await CE(i,{},async()=>{const s=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await NE(i,o,"/v1/token","key=".concat(u)),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&ss(i.emulatorConfig.host)&&(p.credentials="include"),IE.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function _x(i,e){return as(i,"POST","/v2/accounts:revokeToken",sa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=_0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await yx(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new so;return s&&(be(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new tp(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return fx(this,e)}reload(){return px(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject($r(this.auth));const e=await this.getIdToken();return await lu(this,hx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,m,p,g,v;const A=(s=t.displayName)!==null&&s!==void 0?s:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,N=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,x=(h=t.photoURL)!==null&&h!==void 0?h:void 0,L=(m=t.tenantId)!==null&&m!==void 0?m:void 0,U=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,q=(g=t.createdAt)!==null&&g!==void 0?g:void 0,X=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:re,emailVerified:ue,isAnonymous:ae,providerData:ye,stsTokenManager:k}=t;be(re&&k,e,"internal-error");const R=so.fromJSON(this.name,k);be(typeof re=="string",e,"internal-error"),Lr(A,e.name),Lr(b,e.name),be(typeof ue=="boolean",e,"internal-error"),be(typeof ae=="boolean",e,"internal-error"),Lr(N,e.name),Lr(x,e.name),Lr(L,e.name),Lr(U,e.name),Lr(q,e.name),Lr(X,e.name);const I=new Kn({uid:re,auth:e,email:b,emailVerified:ue,displayName:A,isAnonymous:ae,photoURL:x,phoneNumber:N,tenantId:L,stsTokenManager:R,createdAt:q,lastLoginAt:X});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(P=>Object.assign({},P))),U&&(I._redirectEventId=U),I}static async _fromIdTokenResponse(e,t,s=!1){const o=new so;o.updateFromServerResponse(t);const u=new Kn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?DE(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new so;m.updateFromIdToken(s);const p=new Kn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;function Ji(i){rr(i instanceof Function,"Expected a class definition");let e=v0.get(i);return e?(rr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,v0.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}OE.type="NONE";const E0=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(i,e,t){return"firebase:".concat(i,":").concat(e,":").concat(t)}class ao{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=_h(this.userKey,o.apiKey,u),this.fullPersistenceKey=_h("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Dh(this.auth,{idToken:e}).catch(()=>{});return t?Kn._fromGetAccountInfoResponse(this.auth,t,e):null}return Kn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ao(Ji(E0),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Ji(E0);const h=_h(s,e.config.apiKey,e.name);let m=null;for(const g of t)try{const v=await g._get(h);if(v){let A;if(typeof v=="string"){const b=await Dh(e,{idToken:v}).catch(()=>{});if(!b)break;A=await Kn._fromGetAccountInfoResponse(e,b,v)}else A=Kn._fromJSON(e,v);g!==u&&(m=A),u=g;break}}catch(v){}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new ao(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async g=>{if(g!==u)try{await g._remove(h)}catch(v){}})),new ao(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UE(e))return"Blackberry";if(jE(e))return"Webos";if(PE(e))return"Safari";if((e.includes("chrome/")||ME(e))&&!e.includes("edge/"))return"Chrome";if(LE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function kE(i=tn()){return/firefox\//i.test(i)}function PE(i=tn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ME(i=tn()){return/crios\//i.test(i)}function VE(i=tn()){return/iemobile/i.test(i)}function LE(i=tn()){return/android/i.test(i)}function UE(i=tn()){return/blackberry/i.test(i)}function jE(i=tn()){return/webos/i.test(i)}function Lp(i=tn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function vx(i=tn()){var e;return Lp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Ex(){return PS()&&document.documentMode===10}function zE(i=tn()){return Lp(i)||LE(i)||jE(i)||UE(i)||/windows phone/i.test(i)||VE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(i,e=[]){let t;switch(i){case"Browser":t=T0(tn());break;case"Worker":t="".concat(T0(tn()),"-").concat(i);break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(ra,"/").concat(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch(u){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(i,e={}){return as(i,"GET","/v2/passwordPolicy",sa(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=6;class Ax{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:wx,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b0(this),this.idTokenSubscription=new b0(this),this.beforeStateQueue=new Tx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(h){}await this.initializeCurrentUser(t),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Dh(this,{idToken:e}),s=await Kn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Bn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(s){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ix()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject($r(this));const t=e?st(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject($r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject($r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bx(this),t=new Ax(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await _x(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ji(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ex("Error while retrieving App Check token: ".concat(t.error)),t==null?void 0:t.token}}function To(i){return st(i)}class b0{constructor(e){this.auth=e,this.observer=null,this.addObserver=qS(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rx(i){nf=i}function qE(i){return nf.loadJS(i)}function xx(){return nf.recaptchaEnterpriseScript}function Ix(){return nf.gapiScript}function Cx(i){return"__".concat(i).concat(Math.floor(Math.random()*1e6))}class Nx{constructor(){this.enterprise=new Dx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Dx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ox="recaptcha-enterprise",HE="NO_RECAPTCHA";class kx{constructor(e){this.type=Ox,this.auth=To(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{cx(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new ux(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;y0(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(HE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Nx().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!t&&y0(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=xx();p.length!==0&&(p+=m),qE(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function w0(i,e,t,s=!1,o=!1){const u=new kx(i);let h;if(o)h=HE;else try{h=await u.verify(t)}catch(p){h=await u.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function A0(i,e,t,s,o){var u;if(!((u=i._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await w0(i,e,t,t==="getOobCode");return s(i,h)}else return s(i,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log("".concat(t," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const m=await w0(i,e,t,t==="getOobCode");return s(i,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(i,e){const t=ef(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Ws(u,e!=null?e:{}))return o;Xn(o,"already-initialized")}return t.initialize({options:e})}function Mx(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ji);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Vx(i,e,t){const s=To(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=FE(e),{host:h,port:m}=Lx(e),p=m===null?"":":".concat(m),g={url:"".concat(u,"//").concat(h).concat(p,"/")},v=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(Ws(g,s.config.emulator)&&Ws(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,ss(h)?(Ip("".concat(u,"//").concat(h).concat(p)),Cp("Auth",!0)):Ux()}function FE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Lx(i){const e=FE(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:S0(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:S0(h)}}}function S0(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Ux(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function jx(i,e){return as(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(i,e){return tf(i,"POST","/v1/accounts:signInWithPassword",sa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(i,e){return tf(i,"POST","/v1/accounts:signInWithEmailLink",sa(i,e))}async function qx(i,e){return tf(i,"POST","/v1/accounts:signInWithEmailLink",sa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends Up{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new uu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new uu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,t,"signInWithPassword",zx);case"emailLink":return Bx(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return A0(e,s,"signUpPassword",jx);case"emailLink":return qx(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(i,e){return tf(i,"POST","/v1/accounts:signInWithIdp",sa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="http://localhost";class Js extends Up{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,u=kp(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new Js(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,oo(e,t)}buildRequest(){const e={requestUri:Hx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Gx(i){const e=Hl(Fl(i)).link,t=e?Hl(Fl(e)).deep_link_id:null,s=Hl(Fl(i)).deep_link_id;return(s?Hl(Fl(s)).link:null)||s||t||e||i}class jp{constructor(e){var t,s,o,u,h,m;const p=Hl(Fl(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,v=(s=p.oobCode)!==null&&s!==void 0?s:null,A=Fx((o=p.mode)!==null&&o!==void 0?o:null);be(g&&v&&A,"argument-error"),this.apiKey=g,this.operation=A,this.code=v,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=Gx(e);try{return new jp(t)}catch(s){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,t){return uu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=jp.parseLink(t);return be(s,"argument-error"),uu._fromEmailAndCode(e,s.code,s.tenantId)}}bo.PROVIDER_ID="password";bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends GE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends Ru{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch(t){return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Js._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return jr.credential(t,s)}catch(o){return null}}}jr.GOOGLE_SIGN_IN_METHOD="google.com";jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends Ru{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zr.credential(e.oauthAccessToken)}catch(t){return null}}}zr.GITHUB_SIGN_IN_METHOD="github.com";zr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Ru{constructor(){super("twitter.com")}static credential(e,t){return Js._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Br.credential(t,s)}catch(o){return null}}}Br.TWITTER_SIGN_IN_METHOD="twitter.com";Br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await Kn._fromIdTokenResponse(e,s,o),h=R0(s);return new uo({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=R0(s);return new uo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function R0(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Ai{constructor(e,t,s,o){var u;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new kh(e,t,s,o)}}function YE(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(i,u,e,s):u})}async function Yx(i,e,t=!1){const s=await lu(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return uo._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(i,e,t=!1){const{auth:s}=i;if(Bn(s.app))return Promise.reject($r(s));const o="reauthenticate";try{const u=await lu(i,YE(s,o,e,i),t);be(u.idToken,s,"internal-error");const h=Vp(u.idToken);be(h,s,"internal-error");const{sub:m}=h;return be(i.uid===m,s,"user-mismatch"),uo._forOperation(i,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Xn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $E(i,e,t=!1){if(Bn(i.app))return Promise.reject($r(i));const s="signIn",o=await YE(i,s,e),u=await uo._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}async function Kx(i,e){return $E(To(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qx(i){const e=To(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Xx(i,e,t){return Bn(i.app)?Promise.reject($r(i)):Kx(st(i),bo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Qx(i),s})}function Wx(i,e,t,s){return st(i).onIdTokenChanged(e,t,s)}function Zx(i,e,t){return st(i).beforeAuthStateChanged(e,t)}function Jx(i,e,t,s){return st(i).onAuthStateChanged(e,t,s)}function e4(i){return st(i).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=1e3,n4=10;class QE extends KE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);Ex()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,n4):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},t4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}QE.type="LOCAL";const i4=QE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends KE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}XE.type="SESSION";const WE=XE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new rf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async g=>g(t.origin,u)),p=await r4(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=zp("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(b.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return window}function a4(i){Ti().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(){return typeof Ti().WorkerGlobalScope<"u"&&typeof Ti().importScripts=="function"}async function o4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(i){return null}}function l4(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function u4(){return ZE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firebaseLocalStorageDb",c4=1,Mh="firebaseLocalStorage",eT="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sf(i,e){return i.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function h4(){const i=indexedDB.deleteDatabase(JE);return new xu(i).toPromise()}function np(){const i=indexedDB.open(JE,c4);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Mh,{keyPath:eT})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Mh)?e(s):(s.close(),await h4(),e(await np()))})})}async function x0(i,e,t){const s=sf(i,!0).put({[eT]:e,value:t});return new xu(s).toPromise()}async function f4(i,e){const t=sf(i,!1).get(e),s=await new xu(t).toPromise();return s===void 0?null:s.value}function I0(i,e){const t=sf(i,!0).delete(e);return new xu(t).toPromise()}const d4=800,m4=3;class tT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await np(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>m4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(u4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await o4(),!this.activeServiceWorker)return;this.sender=new s4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||l4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await np();return await x0(e,Ph,"1"),await I0(e,Ph),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>x0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>f4(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>I0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sf(o,!1).getAll();return new xu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tT.type="LOCAL";const p4=tT;new Su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(i,e){return e?Ji(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends Up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function y4(i){return $E(i.auth,new Bp(i),i.bypassAuthState)}function _4(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),$x(t,new Bp(i),i.bypassAuthState)}async function v4(i){const{auth:e,user:t}=i;return be(t,e,"internal-error"),Yx(t,new Bp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y4;case"linkViaPopup":case"linkViaRedirect":return v4;case"reauthViaPopup":case"reauthViaRedirect":return _4;default:Xn(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=new Su(2e3,1e4);class ro extends nT{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ro.currentPopupAction&&ro.currentPopupAction.cancel(),ro.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=zp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ro.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E4.get())};e()}}ro.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="pendingRedirect",vh=new Map;class b4 extends nT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const s=await w4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w4(i,e){const t=R4(e),s=S4(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function A4(i,e){vh.set(i._key(),e)}function S4(i){return Ji(i._redirectPersistence)}function R4(i){return _h(T4,i.config.apiKey,i.name)}async function x4(i,e,t=!1){if(Bn(i.app))return Promise.reject($r(i));const s=To(i),o=g4(s,e),h=await new b4(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=10*60*1e3;class C4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!iT(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=I4&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function iT({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N4(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iT(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D4(i,e={}){return as(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k4=/^https?/;async function P4(i){if(i.config.emulator)return;const{authorizedDomains:e}=await D4(i);for(const t of e)try{if(M4(t))return}catch(s){}Xn(i,"unauthorized-domain")}function M4(i){const e=ep(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!k4.test(t))return!1;if(O4.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4=new Su(3e4,6e4);function N0(){const i=Ti().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function L4(i){return new Promise((e,t)=>{var s,o,u;function h(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),t(Ei(i,"network-request-failed"))},timeout:V4.get()})}if(!((o=(s=Ti().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ti().gapi)===null||u===void 0)&&u.load)h();else{const m=Cx("iframefcb");return Ti()[m]=()=>{gapi.load?h():t(Ei(i,"network-request-failed"))},qE("".concat(Ix(),"?onload=").concat(m)).catch(p=>t(p))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function U4(i){return Eh=Eh||L4(i),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=new Su(5e3,15e3),z4="__/auth/iframe",B4="emulator/auth/iframe",q4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F4(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Mp(e,B4):"https://".concat(i.config.authDomain,"/").concat(z4),s={apiKey:e.apiKey,appName:i.name,v:ra},o=H4.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),"".concat(t,"?").concat(Au(s).slice(1))}async function G4(i){const e=await U4(i),t=Ti().gapi;return be(t,i,"internal-error"),e.open({where:document.body,url:F4(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=Ei(i,"network-request-failed"),m=Ti().setTimeout(()=>{u(h)},j4.get());function p(){Ti().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$4=500,K4=600,Q4="_blank",X4="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function W4(i,e,t,s=$4,o=K4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},Y4),{width:s.toString(),height:o.toString(),top:u,left:h}),g=tn().toLowerCase();t&&(m=ME(g)?Q4:t),kE(g)&&(e=e||X4,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[N,x])=>"".concat(b).concat(N,"=").concat(x,","),"");if(vx(g)&&m!=="_self")return Z4(e||"",m),new D0(null);const A=window.open(e||"",m,v);be(A,i,"popup-blocked");try{A.focus()}catch(b){}return new D0(A)}function Z4(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="__/auth/handler",eI="emulator/auth/handler",tI=encodeURIComponent("fac");async function O0(i,e,t,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:ra,eventId:o};if(e instanceof GE){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",BS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,A]of Object.entries({}))h[v]=A}if(e instanceof Ru){const v=e.getScopes().filter(A=>A!=="");v.length>0&&(h.scopes=v.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),g=p?"#".concat(tI,"=").concat(encodeURIComponent(p)):"";return"".concat(nI(i),"?").concat(Au(m).slice(1)).concat(g)}function nI({config:i}){return i.emulator?Mp(i,eI):"https://".concat(i.authDomain,"/").concat(J4)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class iI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WE,this._completeRedirectFn=x4,this._overrideRedirectResult=A4}async _openPopup(e,t,s,o){var u;rr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await O0(e,t,s,ep(),o);return W4(e,h,zp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await O0(e,t,s,ep(),o);return a4(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(rr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await G4(e),s=new C4(e);return t.register("authEvent",o=>(be(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Um];h!==void 0&&t(!!h),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=P4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zE()||PE()||Lp()}}const rI=iI;var k0="@firebase/auth",P0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oI(i){Zs(new Xr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;be(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BE(i)},g=new Sx(s,o,u,p);return Mx(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Zs(new Xr("auth-internal",e=>{const t=To(e.getProvider("auth").getImmediate());return(s=>new sI(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(k0,P0,aI(i)),vi(k0,P0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=5*60,uI=_E("authIdTokenMaxAge")||lI;let M0=null;const cI=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>uI)return;const o=t==null?void 0:t.token;M0!==o&&(M0=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:"Bearer ".concat(o)}:{}}))};function hI(i=Op()){const e=ef(i,"auth");if(e.isInitialized())return e.getImmediate();const t=Px(i,{popupRedirectResolver:rI,persistence:[p4,i4,WE]}),s=_E("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=cI(u.toString());Zx(t,h,()=>h(t.currentUser)),Wx(t,m=>h(m))}}const o=pE("auth");return o&&Vx(t,"http://".concat(o)),t}function fI(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Rx({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=Ei("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",fI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oI("Browser");var dI="firebase",mI="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(dI,mI,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kr,rT;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function I(){}I.prototype=R.prototype,k.D=R.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(P,V,z){for(var D=Array(arguments.length-2),At=2;At<arguments.length;At++)D[At-2]=arguments[At];return R.prototype[V].apply(P,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,R,I){I||(I=0);var P=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)P[V]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(V=0;16>V;++V)P[V]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=k.g[0],I=k.g[1],V=k.g[2];var z=k.g[3],D=R+(z^I&(V^z))+P[0]+3614090360&4294967295;R=I+(D<<7&4294967295|D>>>25),D=z+(V^R&(I^V))+P[1]+3905402710&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(I^z&(R^I))+P[2]+606105819&4294967295,V=z+(D<<17&4294967295|D>>>15),D=I+(R^V&(z^R))+P[3]+3250441966&4294967295,I=V+(D<<22&4294967295|D>>>10),D=R+(z^I&(V^z))+P[4]+4118548399&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(V^R&(I^V))+P[5]+1200080426&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(I^z&(R^I))+P[6]+2821735955&4294967295,V=z+(D<<17&4294967295|D>>>15),D=I+(R^V&(z^R))+P[7]+4249261313&4294967295,I=V+(D<<22&4294967295|D>>>10),D=R+(z^I&(V^z))+P[8]+1770035416&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(V^R&(I^V))+P[9]+2336552879&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(I^z&(R^I))+P[10]+4294925233&4294967295,V=z+(D<<17&4294967295|D>>>15),D=I+(R^V&(z^R))+P[11]+2304563134&4294967295,I=V+(D<<22&4294967295|D>>>10),D=R+(z^I&(V^z))+P[12]+1804603682&4294967295,R=I+(D<<7&4294967295|D>>>25),D=z+(V^R&(I^V))+P[13]+4254626195&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(I^z&(R^I))+P[14]+2792965006&4294967295,V=z+(D<<17&4294967295|D>>>15),D=I+(R^V&(z^R))+P[15]+1236535329&4294967295,I=V+(D<<22&4294967295|D>>>10),D=R+(V^z&(I^V))+P[1]+4129170786&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^V&(R^I))+P[6]+3225465664&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^I&(z^R))+P[11]+643717713&4294967295,V=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(V^z))+P[0]+3921069994&4294967295,I=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(I^V))+P[5]+3593408605&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^V&(R^I))+P[10]+38016083&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^I&(z^R))+P[15]+3634488961&4294967295,V=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(V^z))+P[4]+3889429448&4294967295,I=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(I^V))+P[9]+568446438&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^V&(R^I))+P[14]+3275163606&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^I&(z^R))+P[3]+4107603335&4294967295,V=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(V^z))+P[8]+1163531501&4294967295,I=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(I^V))+P[13]+2850285829&4294967295,R=I+(D<<5&4294967295|D>>>27),D=z+(I^V&(R^I))+P[2]+4243563512&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^I&(z^R))+P[7]+1735328473&4294967295,V=z+(D<<14&4294967295|D>>>18),D=I+(z^R&(V^z))+P[12]+2368359562&4294967295,I=V+(D<<20&4294967295|D>>>12),D=R+(I^V^z)+P[5]+4294588738&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^V)+P[8]+2272392833&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^I)+P[11]+1839030562&4294967295,V=z+(D<<16&4294967295|D>>>16),D=I+(V^z^R)+P[14]+4259657740&4294967295,I=V+(D<<23&4294967295|D>>>9),D=R+(I^V^z)+P[1]+2763975236&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^V)+P[4]+1272893353&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^I)+P[7]+4139469664&4294967295,V=z+(D<<16&4294967295|D>>>16),D=I+(V^z^R)+P[10]+3200236656&4294967295,I=V+(D<<23&4294967295|D>>>9),D=R+(I^V^z)+P[13]+681279174&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^V)+P[0]+3936430074&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^I)+P[3]+3572445317&4294967295,V=z+(D<<16&4294967295|D>>>16),D=I+(V^z^R)+P[6]+76029189&4294967295,I=V+(D<<23&4294967295|D>>>9),D=R+(I^V^z)+P[9]+3654602809&4294967295,R=I+(D<<4&4294967295|D>>>28),D=z+(R^I^V)+P[12]+3873151461&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^I)+P[15]+530742520&4294967295,V=z+(D<<16&4294967295|D>>>16),D=I+(V^z^R)+P[2]+3299628645&4294967295,I=V+(D<<23&4294967295|D>>>9),D=R+(V^(I|~z))+P[0]+4096336452&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~V))+P[7]+1126891415&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~I))+P[14]+2878612391&4294967295,V=z+(D<<15&4294967295|D>>>17),D=I+(z^(V|~R))+P[5]+4237533241&4294967295,I=V+(D<<21&4294967295|D>>>11),D=R+(V^(I|~z))+P[12]+1700485571&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~V))+P[3]+2399980690&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~I))+P[10]+4293915773&4294967295,V=z+(D<<15&4294967295|D>>>17),D=I+(z^(V|~R))+P[1]+2240044497&4294967295,I=V+(D<<21&4294967295|D>>>11),D=R+(V^(I|~z))+P[8]+1873313359&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~V))+P[15]+4264355552&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~I))+P[6]+2734768916&4294967295,V=z+(D<<15&4294967295|D>>>17),D=I+(z^(V|~R))+P[13]+1309151649&4294967295,I=V+(D<<21&4294967295|D>>>11),D=R+(V^(I|~z))+P[4]+4149444226&4294967295,R=I+(D<<6&4294967295|D>>>26),D=z+(I^(R|~V))+P[11]+3174756917&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~I))+P[2]+718787259&4294967295,V=z+(D<<15&4294967295|D>>>17),D=I+(z^(V|~R))+P[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+z&4294967295}s.prototype.u=function(k,R){R===void 0&&(R=k.length);for(var I=R-this.blockSize,P=this.B,V=this.h,z=0;z<R;){if(V==0)for(;z<=I;)o(this,k,z),z+=this.blockSize;if(typeof k=="string"){for(;z<R;)if(P[V++]=k.charCodeAt(z++),V==this.blockSize){o(this,P),V=0;break}}else for(;z<R;)if(P[V++]=k[z++],V==this.blockSize){o(this,P),V=0;break}}this.h=V,this.o+=R},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;var I=8*this.o;for(R=k.length-8;R<k.length;++R)k[R]=I&255,I/=256;for(this.u(k),k=Array(16),R=I=0;4>R;++R)for(var P=0;32>P;P+=8)k[I++]=this.g[R]>>>P&255;return k};function u(k,R){var I=m;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=R(k)}function h(k,R){this.h=R;for(var I=[],P=!0,V=k.length-1;0<=V;V--){var z=k[V]|0;P&&z==R||(I[V]=z,P=!1)}this.g=I}var m={};function p(k){return-128<=k&&128>k?u(k,function(R){return new h([R|0],0>R?-1:0)}):new h([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return A;if(0>k)return U(g(-k));for(var R=[],I=1,P=0;k>=I;P++)R[P]=k/I|0,I*=4294967296;return new h(R,0)}function v(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return U(v(k.substring(1),R));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=g(Math.pow(R,8)),P=A,V=0;V<k.length;V+=8){var z=Math.min(8,k.length-V),D=parseInt(k.substring(V,V+z),R);8>z?(z=g(Math.pow(R,z)),P=P.j(z).add(g(D))):(P=P.j(I),P=P.add(g(D)))}return P}var A=p(0),b=p(1),N=p(16777216);i=h.prototype,i.m=function(){if(L(this))return-U(this).m();for(var k=0,R=1,I=0;I<this.g.length;I++){var P=this.i(I);k+=(0<=P?P:4294967296+P)*R,R*=4294967296}return k},i.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(x(this))return"0";if(L(this))return"-"+U(this).toString(k);for(var R=g(Math.pow(k,6)),I=this,P="";;){var V=ue(I,R).g;I=q(I,V.j(R));var z=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=V,x(I))return z+P;for(;6>z.length;)z="0"+z;P=z+P}},i.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function x(k){if(k.h!=0)return!1;for(var R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function L(k){return k.h==-1}i.l=function(k){return k=q(this,k),L(k)?-1:x(k)?0:1};function U(k){for(var R=k.g.length,I=[],P=0;P<R;P++)I[P]=~k.g[P];return new h(I,~k.h).add(b)}i.abs=function(){return L(this)?U(this):this},i.add=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],P=0,V=0;V<=R;V++){var z=P+(this.i(V)&65535)+(k.i(V)&65535),D=(z>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);P=D>>>16,z&=65535,D&=65535,I[V]=D<<16|z}return new h(I,I[I.length-1]&-2147483648?-1:0)};function q(k,R){return k.add(U(R))}i.j=function(k){if(x(this)||x(k))return A;if(L(this))return L(k)?U(this).j(U(k)):U(U(this).j(k));if(L(k))return U(this.j(U(k)));if(0>this.l(N)&&0>k.l(N))return g(this.m()*k.m());for(var R=this.g.length+k.g.length,I=[],P=0;P<2*R;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var V=0;V<k.g.length;V++){var z=this.i(P)>>>16,D=this.i(P)&65535,At=k.i(V)>>>16,tt=k.i(V)&65535;I[2*P+2*V]+=D*tt,X(I,2*P+2*V),I[2*P+2*V+1]+=z*tt,X(I,2*P+2*V+1),I[2*P+2*V+1]+=D*At,X(I,2*P+2*V+1),I[2*P+2*V+2]+=z*At,X(I,2*P+2*V+2)}for(P=0;P<R;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=R;P<2*R;P++)I[P]=0;return new h(I,0)};function X(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function re(k,R){this.g=k,this.h=R}function ue(k,R){if(x(R))throw Error("division by zero");if(x(k))return new re(A,A);if(L(k))return R=ue(U(k),R),new re(U(R.g),U(R.h));if(L(R))return R=ue(k,U(R)),new re(U(R.g),R.h);if(30<k.g.length){if(L(k)||L(R))throw Error("slowDivide_ only works with positive integers.");for(var I=b,P=R;0>=P.l(k);)I=ae(I),P=ae(P);var V=ye(I,1),z=ye(P,1);for(P=ye(P,2),I=ye(I,2);!x(P);){var D=z.add(P);0>=D.l(k)&&(V=V.add(I),z=D),P=ye(P,1),I=ye(I,1)}return R=q(k,V.j(R)),new re(V,R)}for(V=A;0<=k.l(R);){for(I=Math.max(1,Math.floor(k.m()/R.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),z=g(I),D=z.j(R);L(D)||0<D.l(k);)I-=P,z=g(I),D=z.j(R);x(z)&&(z=b),V=V.add(z),k=q(k,D)}return new re(V,k)}i.A=function(k){return ue(this,k).h},i.and=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)&k.i(P);return new h(I,this.h&k.h)},i.or=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)|k.i(P);return new h(I,this.h|k.h)},i.xor=function(k){for(var R=Math.max(this.g.length,k.g.length),I=[],P=0;P<R;P++)I[P]=this.i(P)^k.i(P);return new h(I,this.h^k.h)};function ae(k){for(var R=k.g.length+1,I=[],P=0;P<R;P++)I[P]=k.i(P)<<1|k.i(P-1)>>>31;return new h(I,k.h)}function ye(k,R){var I=R>>5;R%=32;for(var P=k.g.length-I,V=[],z=0;z<P;z++)V[z]=0<R?k.i(z+I)>>>R|k.i(z+I+1)<<32-R:k.i(z+I);return new h(V,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,rT=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=v,Kr=h}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sT,Gl,aT,Th,ip,oT,lT,uT;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,_){return c==Array.prototype||c==Object.prototype||(c[y]=_.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(c,y){if(y)e:{var _=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var B=c[S];if(!(B in _))break e;_=_[B]}c=c[c.length-1],S=_[c],y=y(S),y!=S&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var _=0,S=!1,B={next:function(){if(!S&&_<c.length){var Q=_++;return{value:y(Q,c[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function v(c,y,_){return c.call.apply(c.bind,arguments)}function A(c,y,_){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,S),c.apply(y,B)}}return function(){return c.apply(y,arguments)}}function b(c,y,_){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:A,b.apply(null,arguments)}function N(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function x(c,y){function _(){}_.prototype=y.prototype,c.aa=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(S,B,Q){for(var le=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)le[Ve-2]=arguments[Ve];return y.prototype[B].apply(S,le)}}function L(c){const y=c.length;if(0<y){const _=Array(y);for(let S=0;S<y;S++)_[S]=c[S];return _}return[]}function U(c,y){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const B=c.length||0,Q=S.length||0;c.length=B+Q;for(let le=0;le<Q;le++)c[B+le]=S[le]}else c.push(S)}}class q{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function X(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ue(c){return ue[" "](c),c}ue[" "]=function(){};var ae=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ye(c,y,_){for(const S in c)y.call(_,c[S],S,c)}function k(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function R(c){const y={};for(const _ in c)y[_]=c[_];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(c,y){let _,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(_ in S)c[_]=S[_];for(let Q=0;Q<I.length;Q++)_=I[Q],Object.prototype.hasOwnProperty.call(S,_)&&(c[_]=S[_])}}function V(c){var y=1;c=c.split(":");const _=[];for(;0<y&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function z(c){m.setTimeout(()=>{throw c},0)}function D(){var c=xe;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class At{constructor(){this.h=this.g=null}add(y,_){const S=tt.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var tt=new q(()=>new W,c=>c.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ce=!1,xe=new At,O=()=>{const c=m.Promise.resolve(void 0);G=()=>{c.then(te)}};var te=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(_){z(_)}var y=tt;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}ce=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch(_){}return c}();function Ie(c,y){if(se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(ae){e:{try{ue(y.nodeName);var B=!0;break e}catch(Q){}B=!1}B||(y=null)}}else _=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ie.aa.h.call(this)}}x(Ie,se);var Ae={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Dt="closure_listenable_"+(1e6*Math.random()|0),Je=0;function ei(c,y,_,S,B){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=B,this.key=++Je,this.da=this.fa=!1}function lr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Si(c){this.src=c,this.g={},this.h=0}Si.prototype.add=function(c,y,_,S,B){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var le=hs(c,y,S,B);return-1<le?(y=c[le],_||(y.fa=!1)):(y=new ei(y,this.src,Q,!!S,B),y.fa=_,c.push(y)),y};function cs(c,y){var _=y.type;if(_ in c.g){var S=c.g[_],B=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(S,B,1),Q&&(lr(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function hs(c,y,_,S){for(var B=0;B<c.length;++B){var Q=c[B];if(!Q.da&&Q.listener==y&&Q.capture==!!_&&Q.ha==S)return B}return-1}var fs="closure_lm_"+(1e6*Math.random()|0),No={};function Vu(c,y,_,S,B){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)Vu(c,y[Q],_,S,B);return null}return _=Lu(_),c&&c[Dt]?c.K(y,_,g(S)?!!S.capture:!1,B):xn(c,y,_,!1,S,B)}function xn(c,y,_,S,B,Q){if(!y)throw Error("Invalid event type");var le=g(B)?!!B.capture:!!B,Ve=ua(c);if(Ve||(c[fs]=Ve=new Si(c)),_=Ve.add(y,_,S,le,Q),_.proxy)return _;if(S=Af(),_.proxy=S,S.src=c,S.listener=_,c.addEventListener)me||(B=le),B===void 0&&(B=!1),c.addEventListener(y.toString(),S,B);else if(c.attachEvent)c.attachEvent(ds(y.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Af(){function c(_){return y.call(c.src,c.listener,_)}const y=Sf;return c}function Do(c,y,_,S,B){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)Do(c,y[Q],_,S,B);else S=g(S)?!!S.capture:!!S,_=Lu(_),c&&c[Dt]?(c=c.i,y=String(y).toString(),y in c.g&&(Q=c.g[y],_=hs(Q,_,S,B),-1<_&&(lr(Q[_]),Array.prototype.splice.call(Q,_,1),Q.length==0&&(delete c.g[y],c.h--)))):c&&(c=ua(c))&&(y=c.g[y.toString()],c=-1,y&&(c=hs(y,_,S,B)),(_=-1<c?y[c]:null)&&la(_))}function la(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Dt])cs(y.i,c);else{var _=c.type,S=c.proxy;y.removeEventListener?y.removeEventListener(_,S,c.capture):y.detachEvent?y.detachEvent(ds(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=ua(y))?(cs(_,c),_.h==0&&(_.src=null,y[fs]=null)):lr(c)}}}function ds(c){return c in No?No[c]:No[c]="on"+c}function Sf(c,y){if(c.da)c=!0;else{y=new Ie(y,this);var _=c.listener,S=c.ha||c.src;c.fa&&la(c),c=_.call(S,y)}return c}function ua(c){return c=c[fs],c instanceof Si?c:null}var Oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lu(c){return typeof c=="function"?c:(c[Oo]||(c[Oo]=function(y){return c.handleEvent(y)}),c[Oo])}function lt(){oe.call(this),this.i=new Si(this),this.M=this,this.F=null}x(lt,oe),lt.prototype[Dt]=!0,lt.prototype.removeEventListener=function(c,y,_,S){Do(this,c,y,_,S)};function Fe(c,y){var _,S=c.F;if(S)for(_=[];S;S=S.F)_.push(S);if(c=c.M,S=y.type||y,typeof y=="string")y=new se(y,c);else if(y instanceof se)y.target=y.target||c;else{var B=y;y=new se(S,c),P(y,B)}if(B=!0,_)for(var Q=_.length-1;0<=Q;Q--){var le=y.g=_[Q];B=pn(le,S,!0,y)&&B}if(le=y.g=c,B=pn(le,S,!0,y)&&B,B=pn(le,S,!1,y)&&B,_)for(Q=0;Q<_.length;Q++)le=y.g=_[Q],B=pn(le,S,!1,y)&&B}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var _=c.g[y],S=0;S<_.length;S++)lr(_[S]);delete c.g[y],c.h--}}this.F=null},lt.prototype.K=function(c,y,_,S){return this.i.add(String(c),y,!1,_,S)},lt.prototype.L=function(c,y,_,S){return this.i.add(String(c),y,!0,_,S)};function pn(c,y,_,S){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,Q=0;Q<y.length;++Q){var le=y[Q];if(le&&!le.da&&le.capture==_){var Ve=le.listener,Rt=le.ha||le.src;le.fa&&cs(c.i,le),B=Ve.call(Rt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Kt(c,y,_){if(typeof c=="function")_&&(c=b(c,_));else if(c&&typeof c.handleEvent=="function")c=b(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(c,y||0)}function Uu(c){c.g=Kt(()=>{c.g=null,c.i&&(c.i=!1,Uu(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Rf extends oe{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Uu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ms(c){oe.call(this),this.h=c,this.g={}}x(ms,oe);var ps=[];function gs(c){ye(c.g,function(y,_){this.g.hasOwnProperty(_)&&la(y)},c),c.g={}}ms.prototype.N=function(){ms.aa.N.call(this),gs(this)},ms.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=m.JSON.stringify,ca=m.JSON.parse,ys=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function ko(){}ko.prototype.h=null;function Po(c){return c.h||(c.h=c.i())}function Mo(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xi(){se.call(this,"d")}x(xi,se);function Vo(){se.call(this,"c")}x(Vo,se);var ti={},Lo=null;function ur(){return Lo=Lo||new lt}ti.La="serverreachability";function ha(c){se.call(this,ti.La,c)}x(ha,se);function cr(c){const y=ur();Fe(y,new ha(y))}ti.STAT_EVENT="statevent";function ju(c,y){se.call(this,ti.STAT_EVENT,c),this.stat=y}x(ju,se);function nt(c){const y=ur();Fe(y,new ju(y,c))}ti.Ma="timingevent";function St(c,y){se.call(this,ti.Ma,c),this.size=y}x(St,se);function yt(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},y)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function Uo(c,y,_,S,B,Q){c.info(function(){if(c.g)if(Q)for(var le="",Ve=Q.split("&"),Rt=0;Rt<Ve.length;Rt++){var Le=Ve[Rt].split("=");if(1<Le.length){var kt=Le[0];Le=Le[1];var xt=kt.split("_");le=2<=xt.length&&xt[1]=="type"?le+(kt+"="+Le+"&"):le+(kt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+"\n"+_+"\n"+le})}function xf(c,y,_,S,B,Q,le){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+"\n"+_+"\n"+Q+" "+le})}function hr(c,y,_,S){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+_s(c,_)+(S?" "+S:"")})}function zu(c,y){c.info(function(){return"TIMEOUT: "+y})}In.prototype.info=function(){};function _s(c,y){if(!c.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var S=_[c];if(!(2>S.length)){var B=S[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<B.length;le++)B[le]=""}}}}return qn(_)}catch(Ve){return y}}var fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ni;function ii(){}x(ii,ko),ii.prototype.g=function(){return new XMLHttpRequest},ii.prototype.i=function(){return{}},ni=new ii;function nn(c,y,_,S){this.j=c,this.i=y,this.l=_,this.R=S||1,this.U=new ms(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}var jo={},fa={};function Hn(c,y,_){c.L=1,c.v=ws(gn(y)),c.m=_,c.P=!0,Ci(c,null)}function Ci(c,y){c.F=Date.now(),vs(c),c.A=gn(c.v);var _=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Go(_.i,"t",S),c.C=0,_=c.j.J,c.h=new dt,c.g=nc(c.j,_?y:null,!c.m),0<c.O&&(c.M=new Rf(b(c.Y,c,c.g),c.O)),y=c.U,_=c.g,S=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(ps[0]=B.toString()),B=ps);for(var Q=0;Q<B.length;Q++){var le=Vu(_,B[Q],S||y.handleEvent,!1,y.h||y);if(!le)break;y.g[le.key]=le}y=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),cr(),Uo(c.i,c.u,c.A,c.l,c.R,c.m)}nn.prototype.ca=function(c){c=c.target;const y=this.M;y&&On(c)==3?y.j():this.Y(c)},nn.prototype.Y=function(c){try{if(c==this.g)e:{const xt=On(this.g);var y=this.g.Ba();const Li=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||Ku(this.g)))){this.J||xt!=4||y==7||(y==8||0>=Li?cr(3):cr(2)),dr(this);var _=this.g.Z();this.X=_;t:if(Bu(this)){var S=Ku(this.g);c="";var B=S.length,Q=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ri(this);var le="";break t}this.h.i=new m.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,c+=this.h.i.decode(S[y],{stream:!(Q&&y==B-1)});S.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=_==200,xf(this.i,this.u,this.A,this.l,this.R,xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Rt=this.g;if((Ve=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Ve)){var Le=Ve;break t}}Le=null}if(_=Le)hr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Es(this,_);else{this.o=!1,this.s=3,nt(12),zt(this),ri(this);break e}}if(this.P){_=!0;let Bt;for(;!this.J&&this.C<le.length;)if(Bt=qu(this,le),Bt==fa){xt==4&&(this.s=4,nt(14),_=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==jo){this.s=4,nt(15),hr(this.i,this.l,le,"[Invalid Chunk]"),_=!1;break}else hr(this.i,this.l,Bt,null),Es(this,Bt);if(Bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||le.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)hr(this.i,this.l,le,"[Invalid Chunked Response]"),zt(this),ri(this);else if(0<le.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Ds(kt),kt.M=!0,nt(11))}}else hr(this.i,this.l,le,null),Es(this,le);xt==4&&zt(this),this.o&&!this.J&&(xt==4?Ju(this.j,this):(this.o=!1,vs(this)))}else Of(this.g),_==400&&0<le.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),zt(this),ri(this)}}}catch(xt){}finally{}};function Bu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qu(c,y){var _=c.C,S=y.indexOf("\n",_);return S==-1?fa:(_=Number(y.substring(_,S)),isNaN(_)?jo:(S+=1,S+_>y.length?fa:(y=y.slice(S,S+_),c.C=S+_,y)))}nn.prototype.cancel=function(){this.J=!0,zt(this)};function vs(c){c.S=Date.now()+c.I,Hu(c,c.I)}function Hu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yt(b(c.ba,c),y)}function dr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}nn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(zu(this.i,this.A),this.L!=2&&(cr(),nt(17)),zt(this),this.s=2,ri(this)):Hu(this,this.S-c)};function ri(c){c.j.G==0||c.J||Ju(c.j,c)}function zt(c){dr(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,gs(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function Es(c,y){try{var _=c.j;if(_.G!=0&&(_.g==c||zo(_.h,c))){if(!c.K&&zo(_.h,c)&&_.G==3){try{var S=_.Da.g.parse(y)}catch(Le){S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Aa(_),ba(_);else break e;Xo(_),nt(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=yt(b(_.Za,_),6e3));if(1>=ma(_.h)&&_.ca){try{_.ca()}catch(Le){}_.ca=void 0}}else Vi(_,11)}else if((c.K||_.g==c)&&Aa(_),!X(y))for(B=_.Da.g.parse(y),y=0;y<B.length;y++){let Le=B[y];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const kt=Le[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const xt=Le[4];xt!=null&&(_.Aa=xt,_.j.info("SVER="+_.Aa));const Li=Le[5];Li!=null&&typeof Li=="number"&&0<Li&&(S=1.5*Li,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Bt=c.g;if(Bt){const hi=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hi){var Q=S.h;Q.g||hi.indexOf("spdy")==-1&&hi.indexOf("quic")==-1&&hi.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(pa(Q,Q.h),Q.h=null))}if(S.D){const Zo=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(S.ya=Zo,$e(S.I,S.D,Zo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var le=c;if(S.qa=tc(S,S.J?S.ia:null,S.W),le.K){rn(S.h,le);var Ve=le,Rt=S.L;Rt&&(Ve.I=Rt),Ve.B&&(dr(Ve),vs(Ve)),S.g=le}else Wu(S);0<_.i.length&&wa(_)}else Le[0]!="stop"&&Le[0]!="close"||Vi(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Vi(_,7):Ko(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}cr(4)}catch(Le){}}var Fu=class{constructor(c,y){this.g=c,this.map=y}};function Ni(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function da(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ma(c){return c.h?1:c.g?c.g.size:0}function zo(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function pa(c,y){c.g?c.g.add(y):c.h=y}function rn(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ni.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Bo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.D);return y}return L(c.i)}function If(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],_=c.length,S=0;S<_;S++)y.push(c[S]);return y}y=[],_=0;for(S in c)y[_++]=c[S];return y}function ga(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var _=0;_<c;_++)y.push(_);return y}y=[],_=0;for(const S in c)y[_++]=S;return y}}}function qo(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var _=ga(c),S=If(c),B=S.length,Q=0;Q<B;Q++)y.call(void 0,S[Q],_&&_[Q],c)}var Ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cf(c,y){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var S=c[_].indexOf("="),B=null;if(0<=S){var Q=c[_].substring(0,S);B=c[_].substring(S+1)}else Q=c[_];y(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function _t(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof _t){this.h=c.h,bs(this,c.j),this.o=c.o,this.g=c.g,mr(this,c.s),this.l=c.l;var y=c.i,_=new Oi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Di(this,_),this.m=c.m}else c&&(y=String(c).match(Ts))?(this.h=!1,bs(this,y[1]||"",!0),this.o=Cn(y[2]||""),this.g=Cn(y[3]||"",!0),mr(this,y[4]),this.l=Cn(y[5]||"",!0),Di(this,y[6]||"",!0),this.m=Cn(y[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}_t.prototype.toString=function(){var c=[],y=this.j;y&&c.push(As(y,Ho,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(As(y,Ho,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(As(_,_.charAt(0)=="/"?Nf:Fo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",As(_,ya)),c.join("")};function gn(c){return new _t(c)}function bs(c,y,_){c.j=_?Cn(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function mr(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Di(c,y,_){y instanceof Oi?(c.i=y,Yu(c.i,c.h)):(_||(y=As(y,Df)),c.i=new Oi(y,c.h))}function $e(c,y,_){c.i.set(y,_)}function ws(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cn(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function As(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Gu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Gu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ho=/[#\/\?@]/g,Fo=/[#\?:]/g,Nf=/[#\?]/g,Df=/[#\?@]/g,ya=/#/g;function Oi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Nn(c){c.g||(c.g=new Map,c.h=0,c.i&&Cf(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=Oi.prototype,i.add=function(c,y){Nn(this),this.i=null,c=si(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function ki(c,y){Nn(c),y=si(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Pi(c,y){return Nn(c),y=si(c,y),c.g.has(y)}i.forEach=function(c,y){Nn(this),this.g.forEach(function(_,S){_.forEach(function(B){c.call(y,B,S,this)},this)},this)},i.na=function(){Nn(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let S=0;S<y.length;S++){const B=c[S];for(let Q=0;Q<B.length;Q++)_.push(y[S])}return _},i.V=function(c){Nn(this);let y=[];if(typeof c=="string")Pi(this,c)&&(y=y.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)y=y.concat(c[_])}return y},i.set=function(c,y){return Nn(this),this.i=null,c=si(this,c),Pi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Go(c,y,_){ki(c,y),0<_.length&&(c.i=null,c.g.set(si(c,y),L(_)),c.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var S=y[_];const Q=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var B=Q;le[S]!==""&&(B+="="+encodeURIComponent(String(le[S]))),c.push(B)}}return this.i=c.join("&")};function si(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Yu(c,y){y&&!c.j&&(Nn(c),c.i=null,c.g.forEach(function(_,S){var B=S.toLowerCase();S!=B&&(ki(this,S),Go(this,B,_))},c)),c.j=y}function Ss(c,y){const _=new In;if(m.Image){const S=new Image;S.onload=N(Dn,_,"TestLoadImage: loaded",!0,y,S),S.onerror=N(Dn,_,"TestLoadImage: error",!1,y,S),S.onabort=N(Dn,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=N(Dn,_,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else y(!1)}function Fn(c,y){const _=new In,S=new AbortController,B=setTimeout(()=>{S.abort(),Dn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:S.signal}).then(Q=>{clearTimeout(B),Q.ok?Dn(_,"TestPingServer: ok",!0,y):Dn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Dn(_,"TestPingServer: error",!1,y)})}function Dn(c,y,_,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(_)}catch(Q){}}function Rs(){this.g=new ys}function ai(c,y,_){const S=_||"";try{qo(c,function(B,Q){let le=B;g(B)&&(le=qn(B)),y.push(S+Q+"="+encodeURIComponent(le))})}catch(B){throw y.push(S+"type="+encodeURIComponent("_badmap")),B}}function pr(c){this.l=c.Ub||null,this.j=c.eb||!1}x(pr,ko),pr.prototype.g=function(){return new Mi(this.l,this.j)},pr.prototype.i=function(c){return function(){return c}}({});function Mi(c,y){lt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Mi,lt),i=Mi.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,li(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?oi(this):li(this),this.readyState==3&&Yo(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,oi(this))},i.Qa=function(c){this.g&&(this.response=c,oi(this))},i.ga=function(){this.g&&oi(this)};function oi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,li(c)}i.setRequestHeader=function(c,y){this.u.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join("\r\n")};function li(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $o(c){let y="";return ye(c,function(_,S){y+=S,y+=":",y+=_,y+="\r\n"}),y}function Ot(c,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=$o(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):$e(c,y,_))}function He(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(He,lt);var _a=/^https?$/i,xs=["POST","PUT"];i=He.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ni.g(),this.v=this.o?Po(this.o):Po(ni),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(Q){$u(this,Q);return}if(c=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)_.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())_.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(xs,y,void 0))||S||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of _)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Is(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){$u(this,Q)}};function $u(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,va(c),ui(c)}function va(c){c.A||(c.A=!0,Fe(c,"complete"),Fe(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Fe(this,"complete"),Fe(this,"abort"),ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),He.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ea(this):this.bb())},i.bb=function(){Ea(this)};function Ea(c){if(c.h&&typeof h<"u"&&(!c.v[1]||On(c)!=4||c.Z()!=2)){if(c.u&&On(c)==4)Kt(c.Ea,0,c);else if(Fe(c,"readystatechange"),On(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=le===0){var B=String(c.D).match(Ts)[1]||null;!B&&m.self&&m.self.location&&(B=m.self.location.protocol.slice(0,-1)),S=!_a.test(B?B.toLowerCase():"")}_=S}if(_)Fe(c,"complete"),Fe(c,"success");else{c.m=6;try{var Q=2<On(c)?c.g.statusText:""}catch(Ve){Q=""}c.l=Q+" ["+c.Z()+"]",va(c)}}finally{ui(c)}}}}function ui(c,y){if(c.g){Is(c);const _=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||Fe(c,"ready");try{_.onreadystatechange=S}catch(B){}}}function Is(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function On(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<On(this)?this.g.status:-1}catch(c){return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch(c){return""}},i.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),ca(y)}};function Ku(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch(y){return null}}function Of(c){const y={};c=(c.g&&2<=On(c)&&c.g.getAllResponseHeaders()||"").split("\r\n");for(let S=0;S<c.length;S++){if(X(c[S]))continue;var _=V(c[S]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Q=y[B]||[];y[B]=Q,Q.push(_)}k(y,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cs(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Ta(c){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cs("baseRetryDelayMs",5e3,c),this.cb=Cs("retryDelaySeedMs",1e4,c),this.Wa=Cs("forwardChannelMaxRetries",2,c),this.wa=Cs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(c&&c.concurrentRequestLimit),this.Da=new Rs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ta.prototype,i.la=8,i.G=1,i.connect=function(c,y,_,S){nt(0),this.W=c,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=tc(this,null,this.W),wa(this)};function Ko(c){if(Qu(c),c.G==3){var y=c.U++,_=gn(c.I);if($e(_,"SID",c.K),$e(_,"RID",y),$e(_,"TYPE","terminate"),Ns(c,_),y=new nn(c,c.j,y),y.L=2,y.v=ws(gn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch(S){}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=nc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),vs(y)}ec(c)}function ba(c){c.g&&(Ds(c),c.g.cancel(),c.g=null)}function Qu(c){ba(c),c.u&&(m.clearTimeout(c.u),c.u=null),Aa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function wa(c){if(!da(c.h)&&!c.s){c.s=!0;var y=c.Ga;G||O(),ce||(G(),ce=!0),xe.add(y,c),c.B=0}}function kf(c,y){return ma(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yt(b(c.Ga,c,y),Wo(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new nn(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=R(Q),P(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Xu(this,B,y),_=gn(this.I),$e(_,"RID",c),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),Ns(this,_),Q&&(this.O?y="headers="+encodeURIComponent(String($o(Q)))+"&"+y:this.m&&Ot(_,this.m,Q)),pa(this.h,B),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",y),$e(_,"SID","null"),B.T=!0,Hn(B,_,null)):Hn(B,_,y),this.G=2}}else this.G==3&&(c?Qo(this,c):this.i.length==0||da(this.h)||Qo(this))};function Qo(c,y){var _;y?_=y.l:_=c.U++;const S=gn(c.I);$e(S,"SID",c.K),$e(S,"RID",_),$e(S,"AID",c.T),Ns(c,S),c.m&&c.o&&Ot(S,c.m,c.o),_=new nn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Xu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pa(c.h,_),Hn(_,S,y)}function Ns(c,y){c.H&&ye(c.H,function(_,S){$e(y,S,_)}),c.l&&qo({},function(_,S){$e(y,S,_)})}function Xu(c,y,_){_=Math.min(c.i.length,_);var S=c.l?b(c.l.Na,c.l,c):null;e:{var B=c.i;let Q=-1;for(;;){const le=["count="+_];Q==-1?0<_?(Q=B[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let Ve=!0;for(let Rt=0;Rt<_;Rt++){let Le=B[Rt].g;const kt=B[Rt].map;if(Le-=Q,0>Le)Q=Math.max(0,B[Rt].g-100),Ve=!1;else try{ai(kt,le,"req"+Le+"_")}catch(xt){S&&S(kt)}}if(Ve){S=le.join("&");break e}}}return c=c.i.splice(0,_),y.D=c,S}function Wu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;G||O(),ce||(G(),ce=!0),xe.add(y,c),c.v=0}}function Xo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yt(b(c.Fa,c),Wo(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,Zu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yt(b(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ba(this),Zu(this))};function Ds(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Zu(c){c.g=new nn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=gn(c.qa);$e(y,"RID","rpc"),$e(y,"SID",c.K),$e(y,"AID",c.T),$e(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(y,"TO",c.ja),$e(y,"TYPE","xmlhttp"),Ns(c,y),c.m&&c.o&&Ot(y,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ws(gn(y)),_.m=null,_.P=!0,Ci(_,c)}i.Za=function(){this.C!=null&&(this.C=null,ba(this),Xo(this),nt(19))};function Aa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function Ju(c,y){var _=null;if(c.g==y){Aa(c),Ds(c),c.g=null;var S=2}else if(zo(c.h,y))_=y.D,rn(c.h,y),S=1;else return;if(c.G!=0){if(y.o)if(S==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var B=c.B;S=ur(),Fe(S,new St(S,_)),wa(c)}else Wu(c);else if(B=y.s,B==3||B==0&&0<y.X||!(S==1&&kf(c,y)||S==2&&Xo(c)))switch(_&&0<_.length&&(y=c.h,y.i=y.i.concat(_)),B){case 1:Vi(c,5);break;case 4:Vi(c,10);break;case 3:Vi(c,6);break;default:Vi(c,2)}}}function Wo(c,y){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*y}function Vi(c,y){if(c.j.info("Error code "+y),y==2){var _=b(c.fb,c),S=c.Xa;const B=!S;S=new _t(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||bs(S,"https"),ws(S),B?Ss(S.toString(),_):Fn(S.toString(),_)}else nt(2);c.G=0,c.l&&c.l.sa(y),ec(c),Qu(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function ec(c){if(c.G=0,c.ka=[],c.l){const y=Bo(c.h);(y.length!=0||c.i.length!=0)&&(U(c.ka,y),U(c.ka,c.i),c.h.i.length=0,L(c.i),c.i.length=0),c.l.ra()}}function tc(c,y,_){var S=_ instanceof _t?gn(_):new _t(_);if(S.g!="")y&&(S.g=y+"."+S.g),mr(S,S.s);else{var B=m.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var Q=new _t(null);S&&bs(Q,S),y&&(Q.g=y),B&&mr(Q,B),_&&(Q.l=_),S=Q}return _=c.D,y=c.ya,_&&y&&$e(S,_,y),$e(S,"VER",c.la),Ns(c,S),S}function nc(c,y,_){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new He(new pr({eb:_})):new He(c.pa),y.Ha(c.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}i=ic.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Sa(){}Sa.prototype.g=function(c,y){return new sn(c,y)};function sn(c,y){lt.call(this),this.g=new Ta(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!X(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!X(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new ci(this)}x(sn,lt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ko(this.g)},sn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=qn(c),c=_);y.i.push(new Fu(y.Ya++,c)),y.G==3&&wa(y)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ko(this.g),delete this.g,sn.aa.N.call(this)};function rc(c){xi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}x(rc,xi);function sc(){Vo.call(this),this.status=1}x(sc,Vo);function ci(c){this.g=c}x(ci,ic),ci.prototype.ua=function(){Fe(this.g,"a")},ci.prototype.ta=function(c){Fe(this.g,new rc(c))},ci.prototype.sa=function(c){Fe(this.g,new sc)},ci.prototype.ra=function(){Fe(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,uT=function(){return new Sa},lT=function(){return ur()},oT=ti,ip={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fr.NO_ERROR=0,fr.TIMEOUT=8,fr.HTTP_ERROR=6,Th=fr,Ii.COMPLETE="complete",aT=Ii,Mo.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Gl=Mo,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,sT=He}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const L0="@firebase/firestore",U0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Np("@firebase/firestore");function eo(){return ea.logLevel}function fe(i,...e){if(ea.logLevel<=Pe.DEBUG){const t=e.map(qp);ea.debug("Firestore (".concat(wo,"): ").concat(i),...t)}}function sr(i,...e){if(ea.logLevel<=Pe.ERROR){const t=e.map(qp);ea.error("Firestore (".concat(wo,"): ").concat(i),...t)}}function co(i,...e){if(ea.logLevel<=Pe.WARN){const t=e.map(qp);ea.warn("Firestore (".concat(wo,"): ").concat(i),...t)}}function qp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch(e){return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,cT(i,s,t)}function cT(i,e,t){let s="FIRESTORE (".concat(wo,") INTERNAL ASSERTION FAILED: ").concat(e," (ID: ").concat(i.toString(16),")");if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch(o){s+=" CONTEXT: "+t}throw sr(s),new Error(s)}function ze(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||cT(e,o,s)}function Se(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ai{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class pI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zt.UNAUTHENTICATED))}shutdown(){}}class gI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yI{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let u=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new tr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new tr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ze(typeof s.accessToken=="string",31837,{l:s}),new hT(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class _I{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new _I(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const s=u=>{u.error!=null&&fe("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(u.error.message));const h=u.token!==this.m;return this.m=u.token,fe("FirebaseAppCheckTokenProvider","Received ".concat(h?"new":"existing"," token.")),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new j0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new j0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=TI(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function Ne(i,e){return i<e?-1:i>e?1:0}function rp(i,e){let t=0;for(;t<i.length&&t<e.length;){const s=i.codePointAt(t),o=e.codePointAt(t);if(s!==o){if(s<128&&o<128)return Ne(s,o);{const u=fT(),h=bI(u.encode(z0(i,t)),u.encode(z0(e,t)));return h!==0?h:Ne(s,o)}}t+=s>65535?2:1}return Ne(i.length,e.length)}function z0(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function bI(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ne(i[t],e[t]);return Ne(i.length,e.length)}function ho(i,e,t){return i.length===e.length&&i.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=-62135596800,q0=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*q0);return new wt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B0)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-B0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new wt(0,0))}static max(){return new Te(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="__name__";class yi{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&_e(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=yi.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return Ne(e.length,t.length)}static compareSegments(e,t){const s=yi.isNumericId(e),o=yi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?yi.extractNumericId(e).compare(yi.extractNumericId(t)):rp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kr.fromString(e.substring(4,e.length-2))}}class Ze extends yi{construct(e,t,s){return new Ze(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));t.push(...s.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const wI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends yi{construct(e,t,s){return new Yt(e,t,s)}static isValidIdentifier(e){return wI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H0}static keyField(){return new Yt([H0])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Ze.fromString(e))}static fromName(e){return new ge(Ze.fromString(e).popFirst(5))}static empty(){return new ge(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=-1;function AI(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new wt(t+1,0):new wt(t,s));return new Wr(o,ge.empty(),e)}function SI(i){return new Wr(i.readTime,i.key,cu)}class Wr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Wr(Te.min(),ge.empty(),cu)}static max(){return new Wr(Te.max(),ge.empty(),cu)}}function RI(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(i.documentKey,e.documentKey),t!==0?t:Ne(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class II{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(i){if(i.code!==ee.FAILED_PRECONDITION||i.message!==xI)throw i;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,s)=>{t(e)})}static reject(e){return new ie((t,s)=>{s(e)})}static waitFor(e){return new ie((t,s)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},p=>s(p))}),h=!0,u===o&&t()})}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next(o=>o?ie.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new ie((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;t(e[g]).next(v=>{h[g]=v,++m,m===u&&s(h)},v=>o(v))}})}static doWhile(e,t){return new ie((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function CI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function So(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}af.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=-1;function Iu(i){return i==null}function Vh(i){return i===0&&1/i==-1/0}function NI(i){return typeof i=="number"&&Number.isInteger(i)&&!Vh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="";function DI(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=F0(e)),e=OI(i.get(t),e);return F0(e)}function OI(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case mT:t+="";break;default:t+=u}}return t}function F0(i){return i+mT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function os(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function pT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push("".concat(t,":").concat(s)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s!=null?s:Gt.RED,this.left=o!=null?o:Gt.EMPTY,this.right=u!=null?u:Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Gt(e!=null?e:this.key,t!=null?t:this.value,s!=null?s:this.color,o!=null?o:this.left,u!=null?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new An([])}unionWith(e){let t=new Nt(Yt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ho(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new gT("Invalid base64 string: "+u):u}}(e);return new $t(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new $t(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const kI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(i){if(ze(!!i,39018),typeof i=="string"){let e=0;const t=kI.exec(i);if(ze(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gt(i.seconds),nanos:gt(i.nanos)}}function gt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Jr(i){return typeof i=="string"?$t.fromBase64String(i):$t.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="server_timestamp",_T="__type__",vT="__previous_value__",ET="__local_write_time__";function Fp(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[_T])===null||t===void 0?void 0:t.stringValue)===yT}function of(i){const e=i.mapValue.fields[vT];return Fp(e)?of(e):e}function hu(i){const e=Zr(i.mapValue.fields[ET].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t,s,o,u,h,m,p,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v}}const Lh="(default)";class fu{constructor(e,t){this.projectId=e,this.database=t||Lh}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="__type__",MI="__max__",ch={mapValue:{}},bT="__vector__",Uh="value";function es(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fp(i)?4:LI(i)?9007199254740991:VI(i)?10:11:_e(28295,{value:i})}function wi(i,e){if(i===e)return!0;const t=es(i);if(t!==es(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return hu(i).isEqual(hu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Zr(o.timestampValue),m=Zr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return Jr(o.bytesValue).isEqual(Jr(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return gt(o.geoPointValue.latitude)===gt(u.geoPointValue.latitude)&&gt(o.geoPointValue.longitude)===gt(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return gt(o.integerValue)===gt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=gt(o.doubleValue),m=gt(u.doubleValue);return h===m?Vh(h)===Vh(m):isNaN(h)&&isNaN(m)}return!1}(i,e);case 9:return ho(i.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(G0(h)!==G0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!wi(h[p],m[p])))return!1;return!0}(i,e);default:return _e(52216,{left:i})}}function du(i,e){return(i.values||[]).find(t=>wi(t,e))!==void 0}function fo(i,e){if(i===e)return 0;const t=es(i),s=es(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(i.booleanValue,e.booleanValue);case 2:return function(u,h){const m=gt(u.integerValue||u.doubleValue),p=gt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(i,e);case 3:return $0(i.timestampValue,e.timestampValue);case 4:return $0(hu(i),hu(e));case 5:return rp(i.stringValue,e.stringValue);case 6:return function(u,h){const m=Jr(u),p=Jr(h);return m.compareTo(p)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Ne(m[g],p[g]);if(v!==0)return v}return Ne(m.length,p.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const m=Ne(gt(u.latitude),gt(h.latitude));return m!==0?m:Ne(gt(u.longitude),gt(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return K0(i.arrayValue,e.arrayValue);case 10:return function(u,h){var m,p,g,v;const A=u.fields||{},b=h.fields||{},N=(m=A[Uh])===null||m===void 0?void 0:m.arrayValue,x=(p=b[Uh])===null||p===void 0?void 0:p.arrayValue,L=Ne(((g=N==null?void 0:N.values)===null||g===void 0?void 0:g.length)||0,((v=x==null?void 0:x.values)===null||v===void 0?void 0:v.length)||0);return L!==0?L:K0(N,x)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===ch.mapValue&&h===ch.mapValue)return 0;if(u===ch.mapValue)return 1;if(h===ch.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let A=0;A<p.length&&A<v.length;++A){const b=rp(p[A],v[A]);if(b!==0)return b;const N=fo(m[p[A]],g[v[A]]);if(N!==0)return N}return Ne(p.length,v.length)}(i.mapValue,e.mapValue);default:throw _e(23264,{Pe:t})}}function $0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ne(i,e);const t=Zr(i),s=Zr(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function K0(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=fo(t[o],s[o]);if(u)return u}return Ne(t.length,s.length)}function mo(i){return sp(i)}function sp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=Zr(t);return"time(".concat(s.seconds,",").concat(s.nanos,")")}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return Jr(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return ge.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return"geo(".concat(t.latitude,",").concat(t.longitude,")")}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=sp(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+="".concat(h,":").concat(sp(t.fields[h]));return o+"}"}(i.mapValue):_e(61005,{value:i})}function bh(i){switch(es(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(i);return e?16+bh(e):16;case 5:return 2*i.stringValue.length;case 6:return Jr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+bh(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return os(s.fields,(u,h)=>{o+=u.length+bh(h)}),o}(i.mapValue);default:throw _e(13486,{value:i})}}function Q0(i,e){return{referenceValue:"projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(e.path.canonicalString())}}function ap(i){return!!i&&"integerValue"in i}function Gp(i){return!!i&&"arrayValue"in i}function X0(i){return!!i&&"nullValue"in i}function W0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wh(i){return!!i&&"mapValue"in i}function VI(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[TT])===null||t===void 0?void 0:t.stringValue)===bT}function Zl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return os(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Zl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function LI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===MI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(t)}setAll(e){let t=Yt.emptyPath(),s={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=Zl(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){os(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new un(Zl(this.value))}}function wT(i){const e=[];return os(i.fields,(t,s)=>{const o=new Yt([t]);if(wh(s)){const u=wT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new An(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,s,o,u,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,Te.min(),Te.min(),Te.min(),un.empty(),0)}static newFoundDocument(e,t,s,o){return new Ut(e,1,t,Te.min(),s,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,Te.min(),Te.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Te.min(),Te.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t){this.position=e,this.inclusive=t}}function Z0(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=ge.comparator(ge.fromName(h.referenceValue),t.key):s=fo(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function J0(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!wi(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function UI(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{}class bt extends AT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new zI(e,t,s):t==="array-contains"?new HI(e,s):t==="in"?new FI(e,s):t==="not-in"?new GI(e,s):t==="array-contains-any"?new YI(e,s):new bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new BI(e,s):new qI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(fo(t,this.value)):t!==null&&es(this.value)===es(t)&&this.matchesComparison(fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends AT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Wn(e,t)}matches(e){return ST(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ST(i){return i.op==="and"}function RT(i){return jI(i)&&ST(i)}function jI(i){for(const e of i.filters)if(e instanceof Wn)return!1;return!0}function op(i){if(i instanceof bt)return i.field.canonicalString()+i.op.toString()+mo(i.value);if(RT(i))return i.filters.map(e=>op(e)).join(",");{const e=i.filters.map(t=>op(t)).join(",");return"".concat(i.op,"(").concat(e,")")}}function xT(i,e){return i instanceof bt?function(s,o){return o instanceof bt&&s.op===o.op&&s.field.isEqual(o.field)&&wi(s.value,o.value)}(i,e):i instanceof Wn?function(s,o){return o instanceof Wn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,m)=>u&&xT(h,o.filters[m]),!0):!1}(i,e):void _e(19439)}function IT(i){return i instanceof bt?function(t){return"".concat(t.field.canonicalString()," ").concat(t.op," ").concat(mo(t.value))}(i):i instanceof Wn?function(t){return t.op.toString()+" {"+t.getFilters().map(IT).join(" ,")+"}"}(i):"Filter"}class zI extends bt{constructor(e,t,s){super(e,t,s),this.key=ge.fromName(s.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class BI extends bt{constructor(e,t){super(e,"in",t),this.keys=CT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qI extends bt{constructor(e,t){super(e,"not-in",t),this.keys=CT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CT(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ge.fromName(s.referenceValue))}class HI extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gp(t)&&du(t.arrayValue,this.value)}}class FI extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&du(this.value.arrayValue,t)}}class GI extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!du(this.value.arrayValue,t)}}class YI extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>du(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,t=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Ie=null}}function e1(i,e=null,t=[],s=[],o=null,u=null,h=null){return new $I(i,e,t,s,o,u,h)}function Yp(i){const e=Se(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>op(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Iu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>mo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>mo(s)).join(",")),e.Ie=t}return e.Ie}function $p(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!UI(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!xT(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!J0(i.startAt,e.startAt)&&J0(i.endAt,e.endAt)}function lp(i){return ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function KI(i,e,t,s,o,u,h,m){return new Ro(i,e,t,s,o,u,h,m)}function NT(i){return new Ro(i)}function t1(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function DT(i){return i.collectionGroup!==null}function Jl(i){const e=Se(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Nt(Yt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(m=m.add(g.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new mu(u,s))}),t.has(Yt.keyField().canonicalString())||e.Ee.push(new mu(Yt.keyField(),s))}return e.Ee}function bi(i){const e=Se(i);return e.de||(e.de=QI(e,Jl(i))),e.de}function QI(i,e){if(i.limitType==="F")return e1(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new mu(o.field,u)});const t=i.endAt?new jh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new jh(i.startAt.position,i.startAt.inclusive):null;return e1(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function up(i,e){const t=i.filters.concat([e]);return new Ro(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function zh(i,e,t){return new Ro(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function lf(i,e){return $p(bi(i),bi(e))&&i.limitType===e.limitType}function OT(i){return"".concat(Yp(bi(i)),"|lt:").concat(i.limitType)}function to(i){return"Query(target=".concat(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=", filters: [".concat(t.filters.map(o=>IT(o)).join(", "),"]")),Iu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=", orderBy: [".concat(t.orderBy.map(o=>function(h){return"".concat(h.field.canonicalString()," (").concat(h.dir,")")}(o)).join(", "),"]")),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>mo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>mo(o)).join(",")),"Target(".concat(s,")")}(bi(i)),"; limitType=").concat(i.limitType,")")}function uf(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ge.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of Jl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(h,m,p){const g=Z0(h,m,p);return h.inclusive?g<=0:g<0}(s.startAt,Jl(s),o)||s.endAt&&!function(h,m,p){const g=Z0(h,m,p);return h.inclusive?g>=0:g>0}(s.endAt,Jl(s),o))}(i,e)}function XI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kT(i){return(e,t)=>{let s=!1;for(const o of Jl(i)){const u=WI(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function WI(i,e,t){const s=i.field.isKeyField()?ge.comparator(e.key,t.key):function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?fo(p,g):_e(42886)}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return _e(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return pT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new ot(ge.comparator);function ar(){return ZI}const PT=new ot(ge.comparator);function Yl(...i){let e=PT;for(const t of i)e=e.insert(t.key,t);return e}function MT(i){let e=PT;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Ks(){return eu()}function VT(){return eu()}function eu(){return new aa(i=>i.toString(),(i,e)=>i.isEqual(e))}const JI=new ot(ge.comparator),eC=new Nt(ge.comparator);function Me(...i){let e=eC;for(const t of i)e=e.add(t);return e}const tC=new Nt(Ne);function nC(){return tC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function LT(i){return{integerValue:""+i}}function iC(i,e){return NI(e)?LT(e):Kp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this._=void 0}}function rC(i,e,t){return i instanceof pu?function(o,u){const h={fields:{[_T]:{stringValue:yT},[ET]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Fp(u)&&(u=of(u)),u&&(h.fields[vT]=u),{mapValue:h}}(t,e):i instanceof gu?jT(i,e):i instanceof yu?zT(i,e):function(o,u){const h=UT(o,u),m=n1(h)+n1(o.Re);return ap(h)&&ap(o.Re)?LT(m):Kp(o.serializer,m)}(i,e)}function sC(i,e,t){return i instanceof gu?jT(i,e):i instanceof yu?zT(i,e):t}function UT(i,e){return i instanceof Bh?function(s){return ap(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class pu extends cf{}class gu extends cf{constructor(e){super(),this.elements=e}}function jT(i,e){const t=BT(e);for(const s of i.elements)t.some(o=>wi(o,s))||t.push(s);return{arrayValue:{values:t}}}class yu extends cf{constructor(e){super(),this.elements=e}}function zT(i,e){let t=BT(e);for(const s of i.elements)t=t.filter(o=>!wi(o,s));return{arrayValue:{values:t}}}class Bh extends cf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function n1(i){return gt(i.integerValue||i.doubleValue)}function BT(i){return Gp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t){this.field=e,this.transform=t}}function oC(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof gu&&o instanceof gu||s instanceof yu&&o instanceof yu?ho(s.elements,o.elements,wi):s instanceof Bh&&o instanceof Bh?wi(s.Re,o.Re):s instanceof pu&&o instanceof pu}(i.transform,e.transform)}class lC{constructor(e,t){this.version=e,this.transformResults=t}}class en{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new en}static exists(e){return new en(void 0,e)}static updateTime(e){return new en(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hf{}function qT(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ff(i.key,en.none()):new Cu(i.key,i.data,en.none());{const t=i.data,s=un.empty();let o=new Nt(Yt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new ls(i.key,s,new An(o.toArray()),en.none())}}function uC(i,e,t){i instanceof Cu?function(o,u,h){const m=o.value.clone(),p=r1(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,e,t):i instanceof ls?function(o,u,h){if(!Ah(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=r1(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(HT(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(i,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function tu(i,e,t,s){return i instanceof Cu?function(u,h,m,p){if(!Ah(u.precondition,h))return m;const g=u.value.clone(),v=s1(u.fieldTransforms,p,h);return g.setAll(v),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(i,e,t,s):i instanceof ls?function(u,h,m,p){if(!Ah(u.precondition,h))return m;const g=s1(u.fieldTransforms,p,h),v=h.data;return v.setAll(HT(u)),v.setAll(g),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,t,s):function(u,h,m){return Ah(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(i,e,t)}function cC(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=UT(s.transform,o||null);u!=null&&(t===null&&(t=un.empty()),t.set(s.field,u))}return t||null}function i1(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&ho(s,o,(u,h)=>oC(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cu extends hf{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ls extends hf{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function HT(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function r1(i,e,t){const s=new Map;ze(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,sC(h,m,t[o]))}return s}function s1(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,rC(u,h,e))}return s}class ff extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FT extends hf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&uC(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=tu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=tu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=VT();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const p=qT(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&ho(this.mutations,e.mutations,(t,s)=>i1(t,s))&&ho(this.baseMutations,e.baseMutations,(t,s)=>i1(t,s))}}class Qp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ze(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return JI}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Qp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,je;function GT(i){switch(i){case ee.OK:return _e(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return _e(15467,{code:i})}}function YT(i){if(i===void 0)return sr("GRPC error has no .code"),ee.UNKNOWN;switch(i){case Tt.OK:return ee.OK;case Tt.CANCELLED:return ee.CANCELLED;case Tt.UNKNOWN:return ee.UNKNOWN;case Tt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Tt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Tt.INTERNAL:return ee.INTERNAL;case Tt.UNAVAILABLE:return ee.UNAVAILABLE;case Tt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Tt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Tt.NOT_FOUND:return ee.NOT_FOUND;case Tt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Tt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Tt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Tt.ABORTED:return ee.ABORTED;case Tt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Tt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Tt.DATA_LOSS:return ee.DATA_LOSS;default:return _e(39323,{code:i})}}(je=Tt||(Tt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=new Kr([4294967295,4294967295],0);function a1(i){const e=fT().encode(i),t=new rT;return t.update(e),new Uint8Array(t.digest())}function o1(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Kr([t,s],0),new Kr([o,u],0)]}class Xp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new $l("Invalid padding: ".concat(t));if(s<0)throw new $l("Invalid hash count: ".concat(s));if(e.length>0&&this.hashCount===0)throw new $l("Invalid hash count: ".concat(s));if(e.length===0&&t!==0)throw new $l("Invalid padding when bitmap length is 0: ".concat(t));this.pe=8*e.length-t,this.ye=Kr.fromNumber(this.pe)}we(e,t,s){let o=e.add(t.multiply(Kr.fromNumber(s)));return o.compare(mC)===1&&(o=new Kr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=a1(e),[s,o]=o1(t);for(let u=0;u<this.hashCount;u++){const h=this.we(s,o,u);if(!this.be(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Xp(u,o,t);return s.forEach(m=>h.insert(m)),h}insert(e){if(this.pe===0)return;const t=a1(e),[s,o]=o1(t);for(let u=0;u<this.hashCount;u++){const h=this.we(s,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new df(Te.min(),o,new ot(Ne),ar(),Me())}}class Nu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Nu(s,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t,s,o){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=o}}class $T{constructor(e,t){this.targetId=e,this.Ce=t}}class KT{constructor(e,t,s=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class l1{constructor(){this.Fe=0,this.Me=u1(),this.xe=$t.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Me(),t=Me(),s=Me();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:_e(38017,{changeType:u})}}),new Nu(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=u1()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ze(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class pC{constructor(e){this.ze=e,this.je=new Map,this.He=ar(),this.Je=hh(),this.Ye=hh(),this.Ze=new ot(Ne)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,s=e.Ce.count,o=this._t(t);if(o){const u=o.target;if(lp(u))if(s===0){const h=new ge(u.path);this.tt(t,h,Ut.newNoDocument(h,Te.min()))}else ze(s===1,20013,{expectedCount:s});else{const h=this.ut(t);if(h!==s){const m=this.ct(e),p=m?this.lt(m,e,h):1;if(p!==0){this.st(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=Jr(s).toUint8Array()}catch(p){if(p instanceof gT)return co("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Xp(h,o,u)}catch(p){return co(p instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const h=this.ze.Pt(),m="projects/".concat(h.projectId,"/databases/").concat(h.database,"/documents/").concat(u.path.canonicalString());e.mightContain(m)||(this.tt(t,u,null),o++)}),o}It(e){const t=new Map;this.je.forEach((u,h)=>{const m=this._t(h);if(m){if(u.current&&lp(m.target)){const p=new ge(m.target.path);this.Et(p).has(h)||this.dt(h,p)||this.tt(h,p,Ut.newNoDocument(p,e))}u.Le&&(t.set(h,u.qe()),u.Qe())}});let s=Me();this.Ye.forEach((u,h)=>{let m=!0;h.forEachWhile(p=>{const g=this._t(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,h)=>h.setReadTime(e));const o=new df(e,t,this.Ze,this.He,s);return this.He=ar(),this.Je=hh(),this.Ye=hh(),this.Ze=new ot(Ne),o}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new l1,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Nt(Ne),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Nt(Ne),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new l1),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function hh(){return new ot(ge.comparator)}function u1(){return new ot(ge.comparator)}const gC={asc:"ASCENDING",desc:"DESCENDING"},yC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_C={and:"AND",or:"OR"};class vC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cp(i,e){return i.useProto3Json||Iu(e)?e:{value:e}}function qh(i,e){return i.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function QT(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function EC(i,e){return qh(i,e.toTimestamp())}function Rn(i){return ze(!!i,49232),Te.fromTimestamp(function(t){const s=Zr(t);return new wt(s.seconds,s.nanos)}(i))}function Wp(i,e){return hp(i,e).canonicalString()}function hp(i,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function XT(i){const e=Ze.fromString(i);return ze(nb(e),10190,{key:e.toString()}),e}function Hh(i,e){return Wp(i.databaseId,e.path)}function nu(i,e){const t=XT(e);if(t.get(1)!==i.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new ge(ZT(t))}function WT(i,e){return Wp(i.databaseId,e)}function TC(i){const e=XT(i);return e.length===4?Ze.emptyPath():ZT(e)}function fp(i){return new Ze(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ZT(i){return ze(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function c1(i,e,t){return{name:Hh(i,e),fields:t.value.mapValue.fields}}function bC(i,e){return"found"in e?function(s,o){ze(!!o.found,43571),o.found.name,o.found.updateTime;const u=nu(s,o.found.name),h=Rn(o.found.updateTime),m=o.found.createTime?Rn(o.found.createTime):Te.min(),p=new un({mapValue:{fields:o.found.fields}});return Ut.newFoundDocument(u,h,m,p)}(i,e):"missing"in e?function(s,o){ze(!!o.missing,3894),ze(!!o.readTime,22933);const u=nu(s,o.missing),h=Rn(o.readTime);return Ut.newNoDocument(u,h)}(i,e):_e(7234,{result:e})}function wC(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,v){return g.useProto3Json?(ze(v===void 0||typeof v=="string",58123),$t.fromBase64String(v||"")):(ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),$t.fromUint8Array(v||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(g){const v=g.code===void 0?ee.UNKNOWN:YT(g.code);return new he(v,g.message||"")}(h);t=new KT(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=nu(i,s.document.name),u=Rn(s.document.updateTime),h=s.document.createTime?Rn(s.document.createTime):Te.min(),m=new un({mapValue:{fields:s.document.fields}}),p=Ut.newFoundDocument(o,u,h,m),g=s.targetIds||[],v=s.removedTargetIds||[];t=new Sh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=nu(i,s.document),u=s.readTime?Rn(s.readTime):Te.min(),h=Ut.newNoDocument(o,u),m=s.removedTargetIds||[];t=new Sh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=nu(i,s.document),u=s.removedTargetIds||[];t=new Sh([],u,o,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new dC(o,u),m=s.targetId;t=new $T(m,h)}}return t}function JT(i,e){let t;if(e instanceof Cu)t={update:c1(i,e.key,e.value)};else if(e instanceof ff)t={delete:Hh(i,e.key)};else if(e instanceof ls)t={update:c1(i,e.key,e.data),updateMask:OC(e.fieldMask)};else{if(!(e instanceof FT))return _e(16599,{ft:e.type});t={verify:Hh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const m=h.transform;if(m instanceof pu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof gu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof yu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bh)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw _e(20930,{transform:h.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:EC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_e(27497)}(i,e.precondition)),t}function AC(i,e){return i&&i.length>0?(ze(e!==void 0,14353),i.map(t=>function(o,u){let h=o.updateTime?Rn(o.updateTime):Rn(u);return h.isEqual(Te.min())&&(h=Rn(u)),new lC(h,o.transformResults||[])}(t,e))):[]}function SC(i,e){return{documents:[WT(i,e.path)]}}function RC(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=WT(i,o);const u=function(g){if(g.length!==0)return tb(Wn.create(g,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(g){if(g.length!==0)return g.map(v=>function(b){return{field:no(b.field),direction:CC(b.dir)}}(v))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=cp(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{gt:t,parent:o}}function xC(i){let e=TC(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ze(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=function(A){const b=eb(A);return b instanceof Wn&&RT(b)?b.getFilters():[b]}(t.where));let h=[];t.orderBy&&(h=function(A){return A.map(b=>function(x){return new mu(io(x.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(A){let b;return b=typeof A=="object"?A.value:A,Iu(b)?null:b}(t.limit));let p=null;t.startAt&&(p=function(A){const b=!!A.before,N=A.values||[];return new jh(N,b)}(t.startAt));let g=null;return t.endAt&&(g=function(A){const b=!A.before,N=A.values||[];return new jh(N,b)}(t.endAt)),KI(e,o,h,u,m,"F",p,g)}function IC(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eb(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=io(t.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=io(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=io(t.unaryFilter.field);return bt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=io(t.unaryFilter.field);return bt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(i):i.fieldFilter!==void 0?function(t){return bt.create(io(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Wn.create(t.compositeFilter.filters.map(s=>eb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(i):_e(30097,{filter:i})}function CC(i){return gC[i]}function NC(i){return yC[i]}function DC(i){return _C[i]}function no(i){return{fieldPath:i.canonicalString()}}function io(i){return Yt.fromServerFormat(i.fieldPath)}function tb(i){return i instanceof bt?function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NAN"}};if(X0(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NOT_NAN"}};if(X0(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(t.field),op:NC(t.op),value:t.value}}}(i):i instanceof Wn?function(t){const s=t.getFilters().map(o=>tb(o));return s.length===1?s[0]:{compositeFilter:{op:DC(t.op),filters:s}}}(i):_e(54877,{filter:i})}function OC(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t,s,o,u=Te.min(),h=Te.min(),m=$t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.wt=e}}function PC(i){const e=xC({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?zh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.Cn=new VC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Wr.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class VC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Nt(Ze.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Nt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ib=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(ib,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new po(0)}static lr(){return new po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="LruGarbageCollector",LC=1048576;function d1([i,e],[t,s]){const o=Ne(i,t);return o===0?Ne(e,s):o}class UC{constructor(e){this.Er=e,this.buffer=new Nt(d1),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();d1(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(f1,"Garbage collection scheduled in ".concat(e,"ms")),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){So(t)?fe(f1,"Ignoring IndexedDB error during garbage collection: ",t):await Ao(t)}await this.mr(3e5)})}}class zC{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(af.le);const s=new UC(t);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(h1)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(s," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),h1):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,o,u,h,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(A)),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,m=Date.now(),this.removeTargets(e,s,t))).next(A=>(u=A,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(g=Date.now(),eo()<=Pe.DEBUG&&fe("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in ".concat(h-v,"ms\n	Determined least recently used ").concat(o," in ")+(m-h)+"ms\n"+"	Removed ".concat(u," targets in ")+(p-m)+"ms\n"+"	Removed ".concat(A," documents in ")+(g-p)+"ms\n"+"Total Duration: ".concat(g-v,"ms")),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function BC(i,e){return new zC(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.changes=new aa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&tu(s.mutation,o,An.empty(),wt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Me()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Me()){const o=Ks();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let h=Yl();return u.forEach((m,p)=>{h=h.insert(m,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Ks();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Me()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,s,o){let u=ar();const h=eu(),m=function(){return eu()}();return t.forEach((p,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof ls)?u=u.insert(g.key,g):v!==void 0?(h.set(g.key,v.mutation.getFieldMask()),tu(v.mutation,g,v.mutation.getFieldMask(),wt.now())):h.set(g.key,An.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,v)=>h.set(g,v)),t.forEach((g,v)=>{var A;return m.set(g,new HC(v,(A=h.get(g))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const s=eu();let o=new ot((h,m)=>h-m),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let v=s.get(p)||An.empty();v=m.applyToLocalView(g,v),s.set(p,v);const A=(o.get(m.batchId)||Me()).add(p);o=o.insert(m.batchId,A)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,A=VT();v.forEach(b=>{if(!u.has(b)){const N=qT(t.get(b),s.get(b));N!==null&&A.set(b,N),u=u.add(b)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,A))}return ie.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return ge.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ie.resolve(Ks());let m=cu,p=u;return h.next(g=>ie.forEach(g,(v,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(v)?ie.resolve():this.remoteDocumentCache.getEntry(e,v).next(b=>{p=p.insert(v,b)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,Me())).next(v=>({batchId:m,changes:MT(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(s=>{let o=Yl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=Yl();return this.indexManager.getCollectionParents(e,u).next(m=>ie.forEach(m,p=>{const g=function(A,b){return new Ro(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next(v=>{v.forEach((A,b)=>{h=h.insert(A,b)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(h=>{u.forEach((p,g)=>{const v=g.getKey();h.get(v)===null&&(h=h.insert(v,Ut.newInvalidDocument(v)))});let m=Yl();return h.forEach((p,g)=>{const v=u.get(p);v!==void 0&&tu(v.mutation,g,An.empty(),wt.now()),uf(t,g)&&(m=m.insert(p,g))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ie.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Rn(o.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:PC(o.bundledQuery),readTime:Rn(o.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.overlays=new ot(ge.comparator),this.Qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ks();return ie.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.St(e,t,u)}),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=Ks(),u=t.length+1,h=new ge(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new ot((g,v)=>g-v);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=Ks(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Ks(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,v)=>m.set(g,v)),!(m.size()>=o)););return ie.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new fC(t,s));let u=this.Qr.get(t);u===void 0&&(u=Me(),this.Qr.set(t,u)),this.Qr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.$r=new Nt(Lt.Ur),this.Kr=new Nt(Lt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new Lt(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new Lt(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new ge(new Ze([])),s=new Lt(t,e),o=new Lt(t,e+1),u=[];return this.Kr.forEachInRange([s,o],h=>{this.zr(h),u.push(h.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ge(new Ze([])),s=new Lt(t,e),o=new Lt(t,e+1);let u=Me();return this.Kr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Lt(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ge.comparator(e.key,t.key)||Ne(e.Zr,t.Zr)}static Wr(e,t){return Ne(e.Zr,t.Zr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Nt(Lt.Ur)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new hC(u,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new Lt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,t){return ie.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ti(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Hp:this.nr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Lt(t,0),o=new Lt(t,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],h=>{const m=this.ei(h.Zr);u.push(m)}),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nt(Ne);return t.forEach(o=>{const u=new Lt(o,0),h=new Lt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,h],m=>{s=s.add(m.Zr)})}),ie.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;ge.isDocumentKey(u)||(u=u.child(""));const h=new Lt(new ge(u),0);let m=new Nt(Ne);return this.Xr.forEachWhile(p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Zr)),!0)},h),ie.resolve(this.ni(m))}ni(e){const t=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){ze(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ie.forEach(t.mutations,o=>{const u=new Lt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new Lt(t,0),o=this.Xr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.ii=e,this.docs=function(){return new ot(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let s=ar();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ut.newInvalidDocument(o))}),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=ar();const h=t.path,m=new ge(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||RI(SI(v),s)<=0||(o.has(v.key)||uf(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,t,s,o){_e(9500)}si(e,t){return ie.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new XC(this)}getSize(e){return ie.resolve(this.size)}}class XC extends qC{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),ie.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.persistence=e,this.oi=new aa(t=>Yp(t),$p),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this._i=0,this.ai=new Zp,this.targetCount=0,this.ui=po.cr()}forEachTarget(e,t){return this.oi.forEach((s,o)=>t(o)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),ie.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new po(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Tr(t),ie.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.oi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ie.waitFor(u).next(()=>o)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t){this.ci={},this.overlays={},this.li=new af(0),this.hi=!1,this.hi=!0,this.Pi=new $C,this.referenceDelegate=e(this),this.Ti=new WC(this),this.indexManager=new MC,this.remoteDocumentCache=function(o){return new QC(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new kC(t),this.Ei=new GC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new KC(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){fe("MemoryPersistence","Starting transaction:",e);const o=new ZC(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,t){return ie.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class ZC extends II{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Vi=new Zp,this.mi=null}static fi(e){return new Jp(e)}get gi(){if(this.mi)return this.mi;throw _e(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.gi,s=>{const o=ge.fromPath(s);return this.pi(e,o).next(u=>{u||t.removeEntry(o,Te.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ie.or([()=>ie.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Fh{constructor(e,t){this.persistence=e,this.yi=new aa(s=>DI(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=BC(this,t)}static fi(e,t){return new Fh(e,t)}di(){}Ai(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return ie.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?ie.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(m=>{m||(s++,u.removeEntry(h,Te.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ie.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bh(e.data.value)),t}Dr(e,t,s){return ie.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.ds=s,this.As=o}static Rs(e,t){let s=Me(),o=Me();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new eg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return MS()?8:CI(tn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ws(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.bs(e,t,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new JC;return this.Ss(e,t,h).next(m=>{if(u.result=m,this.fs)return this.Ds(e,t,h,m.size)})}).next(()=>u.result)}Ds(e,t,s,o){return s.documentReadCount<this.gs?(eo()<=Pe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",to(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ie.resolve()):(eo()<=Pe.DEBUG&&fe("QueryEngine","Query:",to(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(eo()<=Pe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",to(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(t))):ie.resolve())}ws(e,t){if(t1(t))return ie.resolve(null);let s=bi(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=zh(t,null,"F"),s=bi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Me(...u);return this.ys.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const g=this.vs(t,m);return this.Cs(t,g,h,p.readTime)?this.ws(e,zh(t,null,"F")):this.Fs(e,g,t,p)}))})))}bs(e,t,s,o){return t1(t)||o.isEqual(Te.min())?ie.resolve(null):this.ys.getDocuments(e,s).next(u=>{const h=this.vs(t,u);return this.Cs(t,h,s,o)?ie.resolve(null):(eo()<=Pe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),to(t)),this.Fs(e,h,t,AI(o,cu)).next(m=>m))})}vs(e,t){let s=new Nt(kT(e));return t.forEach((o,u)=>{uf(e,u)&&(s=s.add(u))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return eo()<=Pe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",to(t)),this.ys.getDocumentsMatchingQuery(e,t,Wr.min(),s)}Fs(e,t,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",t3=3e8;class n3{constructor(e,t,s,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new ot(Ne),this.Os=new aa(u=>Yp(u),$p),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FC(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function i3(i,e,t,s){return new n3(i,e,t,s)}async function sb(i,e){const t=Se(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],m=[];let p=Me();for(const g of o){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next(g=>({ks:g,removedBatchIds:h,addedBatchIds:m}))})})}function r3(i,e){const t=Se(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,g,v){const A=g.batch,b=A.keys();let N=ie.resolve();return b.forEach(x=>{N=N.next(()=>v.getEntry(p,x)).next(L=>{const U=g.docVersions.get(x);ze(U!==null,48541),L.version.compareTo(U)<0&&(A.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),v.addEntry(L)))})}),N.next(()=>m.mutationQueue.removeMutationBatch(p,A))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Me();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function ab(i){const e=Se(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function s3(i,e){const t=Se(i),s=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const m=[];e.targetChanges.forEach((v,A)=>{const b=o.get(A);if(!b)return;m.push(t.Ti.removeMatchingKeys(u,v.removedDocuments,A).next(()=>t.Ti.addMatchingKeys(u,v.addedDocuments,A)));let N=b.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?N=N.withResumeToken($t.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,s)),o=o.insert(A,N),function(L,U,q){return L.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=t3?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(b,N,v)&&m.push(t.Ti.updateTargetData(u,N))});let p=ar(),g=Me();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))}),m.push(a3(u,h,e.documentUpdates).next(v=>{p=v.qs,g=v.Qs})),!s.isEqual(Te.min())){const v=t.Ti.getLastRemoteSnapshotVersion(u).next(A=>t.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(v)}return ie.waitFor(m).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(t.xs=o,u))}function a3(i,e,t){let s=Me(),o=Me();return t.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=ar();return t.forEach((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Te.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):fe(tg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)}),{qs:h,Qs:o}})}function o3(i,e){const t=Se(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Hp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function l3(i,e){const t=Se(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Ti.getTargetData(s,e).next(u=>u?(o=u,ie.resolve(o)):t.Ti.allocateTargetId(s).next(h=>(o=new Fr(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function dp(i,e,t){const s=Se(i),o=s.xs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!So(h))throw h;fe(tg,"Failed to update sequence numbers for target ".concat(e,": ").concat(h))}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function m1(i,e,t){const s=Se(i);let o=Te.min(),u=Me();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,g,v){const A=Se(p),b=A.Os.get(v);return b!==void 0?ie.resolve(A.xs.get(b)):A.Ti.getTargetData(g,v)}(s,h,bi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(h,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(h,e,t?o:Te.min(),t?u:Me())).next(m=>(u3(s,XI(e),m),{documents:m,$s:u})))}function u3(i,e,t){let s=i.Ns.get(e)||Te.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.Ns.set(e,s)}class p1{constructor(){this.activeTargetIds=nC()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class c3{constructor(){this.xo=new p1,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new p1,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="ConnectivityMonitor";class y1{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(g1,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(g1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function mp(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="RestConnection",f3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d3{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(s,"/databases/").concat(o),this.Go=this.databaseId.database===Lh?"project_id=".concat(s):"project_id=".concat(s,"&database_id=").concat(o)}zo(e,t,s,o,u){const h=mp(),m=this.jo(e,t.toUriEncodedString());fe(jm,"Sending RPC '".concat(e,"' ").concat(h,":"),m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:g}=new URL(m),v=ss(g);return this.Jo(e,m,p,s,v).then(A=>(fe(jm,"Received RPC '".concat(e,"' ").concat(h,": "),A),A),A=>{throw co(jm,"RPC '".concat(e,"' ").concat(h," failed with error: "),A,"url: ",m,"request:",s),A})}Yo(e,t,s,o,u,h){return this.zo(e,t,s,o,u)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+wo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,t){const s=f3[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(s)}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class p3 extends d3{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const h=mp();return new Promise((m,p)=>{const g=new sT;g.setWithCredentials(!0),g.listenOnce(aT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Th.NO_ERROR:const A=g.getResponseJson();fe(Wt,"XHR for RPC '".concat(e,"' ").concat(h," received:"),JSON.stringify(A)),m(A);break;case Th.TIMEOUT:fe(Wt,"RPC '".concat(e,"' ").concat(h," timed out")),p(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const b=g.getStatus();if(fe(Wt,"RPC '".concat(e,"' ").concat(h," failed with status:"),b,"response text:",g.getResponseText()),b>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const x=N==null?void 0:N.error;if(x&&x.status&&x.message){const L=function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(X)>=0?X:ee.UNKNOWN}(x.status);p(new he(L,x.message))}else p(new he(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new he(ee.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{h_:e,streamId:h,P_:g.getLastErrorCode(),T_:g.getLastError()})}}finally{fe(Wt,"RPC '".concat(e,"' ").concat(h," completed."))}});const v=JSON.stringify(o);fe(Wt,"RPC '".concat(e,"' ").concat(h," sending request:"),o),g.send(t,"POST",v,s,15)})}I_(e,t,s){const o=mp(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=uT(),m=lT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=u.join("");fe(Wt,"Creating RPC '".concat(e,"' stream ").concat(o,": ").concat(v),p);const A=h.createWebChannel(v,p);this.E_(A);let b=!1,N=!1;const x=new m3({Zo:U=>{N?fe(Wt,"Not sending because RPC '".concat(e,"' stream ").concat(o," is closed:"),U):(b||(fe(Wt,"Opening RPC '".concat(e,"' stream ").concat(o," transport.")),A.open(),b=!0),fe(Wt,"RPC '".concat(e,"' stream ").concat(o," sending:"),U),A.send(U))},Xo:()=>A.close()}),L=(U,q,X)=>{U.listen(q,re=>{try{X(re)}catch(ue){setTimeout(()=>{throw ue},0)}})};return L(A,Gl.EventType.OPEN,()=>{N||(fe(Wt,"RPC '".concat(e,"' stream ").concat(o," transport opened.")),x.__())}),L(A,Gl.EventType.CLOSE,()=>{N||(N=!0,fe(Wt,"RPC '".concat(e,"' stream ").concat(o," transport closed")),x.u_(),this.d_(A))}),L(A,Gl.EventType.ERROR,U=>{N||(N=!0,co(Wt,"RPC '".concat(e,"' stream ").concat(o," transport errored. Name:"),U.name,"Message:",U.message),x.u_(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),L(A,Gl.EventType.MESSAGE,U=>{var q;if(!N){const X=U.data[0];ze(!!X,16349);const re=X,ue=(re==null?void 0:re.error)||((q=re[0])===null||q===void 0?void 0:q.error);if(ue){fe(Wt,"RPC '".concat(e,"' stream ").concat(o," received error:"),ue);const ae=ue.status;let ye=function(I){const P=Tt[I];if(P!==void 0)return YT(P)}(ae),k=ue.message;ye===void 0&&(ye=ee.INTERNAL,k="Unknown error status: "+ae+" with message "+ue.message),N=!0,x.u_(new he(ye,k)),A.close()}else fe(Wt,"RPC '".concat(e,"' stream ").concat(o," received:"),X),x.c_(X)}}),L(m,oT.STAT_EVENT,U=>{U.stat===ip.PROXY?fe(Wt,"RPC '".concat(e,"' stream ").concat(o," detected buffering proxy")):U.stat===ip.NOPROXY&&fe(Wt,"RPC '".concat(e,"' stream ").concat(o," detected no buffering proxy"))}),setTimeout(()=>{x.a_()},0),x}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(i){return new vC(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,t,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-s);o>0&&fe("ExponentialBackoff","Backing off for ".concat(o," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(s," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="PersistentStream";class ob{constructor(e,t,s,o,u,h,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new ng(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===t&&this.z_(s,o)},s=>{e(()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fe(_1,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(fe(_1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class g3 extends ob{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=wC(this.serializer,e),s=function(u){if(!("targetChange"in u))return Te.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Te.min():h.readTime?Rn(h.readTime):Te.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=fp(this.serializer),t.addTarget=function(u,h){let m;const p=h.target;if(m=lp(p)?{documents:SC(u,p)}:{query:RC(u,p).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=QT(u,h.resumeToken);const g=cp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Te.min())>0){m.readTime=qh(u,h.snapshotVersion.toTimestamp());const g=cp(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m}(this.serializer,e);const s=IC(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=fp(this.serializer),t.removeTarget=e,this.Q_(t)}}class y3 extends ob{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=AC(e.writeResults,e.commitTime),s=Rn(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=fp(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>JT(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{}class v3 extends _3{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.zo(e,hp(t,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())})}Yo(e,t,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(e,hp(t,s),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(ee.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class E3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(sr(t),this.ua=!1):fe("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="RemoteStore";class T3{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(h=>{s.enqueueAndForget(async()=>{oa(this)&&(fe(ta,"Restarting streams for network reachability change."),await async function(p){const g=Se(p);g.da.add(4),await Du(g),g.Va.set("Unknown"),g.da.delete(4),await pf(g)}(this))})}),this.Va=new E3(s,o)}}async function pf(i){if(oa(i))for(const e of i.Aa)await e(!0)}async function Du(i){for(const e of i.Aa)await e(!1)}function lb(i,e){const t=Se(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),ag(t)?sg(t):xo(t).N_()&&rg(t,e))}function ig(i,e){const t=Se(i),s=xo(t);t.Ea.delete(e),s.N_()&&ub(t,e),t.Ea.size===0&&(s.N_()?s.k_():oa(t)&&t.Va.set("Unknown"))}function rg(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xo(i).Z_(e)}function ub(i,e){i.ma.Ke(e),xo(i).X_(e)}function sg(i){i.ma=new pC({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),xo(i).start(),i.Va.ca()}function ag(i){return oa(i)&&!xo(i).O_()&&i.Ea.size>0}function oa(i){return Se(i).da.size===0}function cb(i){i.ma=void 0}async function b3(i){i.Va.set("Online")}async function w3(i){i.Ea.forEach((e,t)=>{rg(i,e)})}async function A3(i,e){cb(i),ag(i)?(i.Va.Pa(e),sg(i)):i.Va.set("Unknown")}async function S3(i,e,t){if(i.Va.set("Online"),e instanceof KT&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(i,e)}catch(s){fe(ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gh(i,s)}else if(e instanceof Sh?i.ma.Xe(e):e instanceof $T?i.ma.ot(e):i.ma.nt(e),!t.isEqual(Te.min()))try{const s=await ab(i.localStore);t.compareTo(s)>=0&&await function(u,h){const m=u.ma.It(h);return m.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ea.get(g);v&&u.Ea.set(g,v.withResumeToken(p.resumeToken,h))}}),m.targetMismatches.forEach((p,g)=>{const v=u.Ea.get(p);if(!v)return;u.Ea.set(p,v.withResumeToken($t.EMPTY_BYTE_STRING,v.snapshotVersion)),ub(u,p);const A=new Fr(v.target,p,g,v.sequenceNumber);rg(u,A)}),u.remoteSyncer.applyRemoteEvent(m)}(i,t)}catch(s){fe(ta,"Failed to raise snapshot:",s),await Gh(i,s)}}async function Gh(i,e,t){if(!So(e))throw e;i.da.add(1),await Du(i),i.Va.set("Offline"),t||(t=()=>ab(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{fe(ta,"Retrying IndexedDB access"),await t(),i.da.delete(1),await pf(i)})}function hb(i,e){return e().catch(t=>Gh(i,t,e))}async function gf(i){const e=Se(i),t=ts(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Hp;for(;R3(e);)try{const o=await o3(e.localStore,s);if(o===null){e.Ia.length===0&&t.k_();break}s=o.batchId,x3(e,o)}catch(o){await Gh(e,o)}fb(e)&&db(e)}function R3(i){return oa(i)&&i.Ia.length<10}function x3(i,e){i.Ia.push(e);const t=ts(i);t.N_()&&t.ea&&t.ta(e.mutations)}function fb(i){return oa(i)&&!ts(i).O_()&&i.Ia.length>0}function db(i){ts(i).start()}async function I3(i){ts(i).ia()}async function C3(i){const e=ts(i);for(const t of i.Ia)e.ta(t.mutations)}async function N3(i,e,t){const s=i.Ia.shift(),o=Qp.from(s,e,t);await hb(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await gf(i)}async function D3(i,e){e&&ts(i).ea&&await async function(s,o){if(function(h){return GT(h)&&h!==ee.ABORTED}(o.code)){const u=s.Ia.shift();ts(s).L_(),await hb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await gf(s)}}(i,e),fb(i)&&db(i)}async function v1(i,e){const t=Se(i);t.asyncQueue.verifyOperationInProgress(),fe(ta,"RemoteStore received new credentials");const s=oa(t);t.da.add(3),await Du(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await pf(t)}async function O3(i,e){const t=Se(i);e?(t.da.delete(2),await pf(t)):e||(t.da.add(2),await Du(t),t.Va.set("Unknown"))}function xo(i){return i.fa||(i.fa=function(t,s,o){const u=Se(t);return u.oa(),new g3(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:b3.bind(null,i),n_:w3.bind(null,i),i_:A3.bind(null,i),Y_:S3.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),ag(i)?sg(i):i.Va.set("Unknown")):(await i.fa.stop(),cb(i))})),i.fa}function ts(i){return i.ga||(i.ga=function(t,s,o){const u=Se(t);return u.oa(),new y3(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:I3.bind(null,i),i_:D3.bind(null,i),na:C3.bind(null,i),ra:N3.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await gf(i)):(await i.ga.stop(),i.Ia.length>0&&(fe(ta,"Stopping write stream with ".concat(i.Ia.length," pending writes")),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,m=new og(e,t,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lg(i,e){if(sr("AsyncQueue","".concat(e,": ").concat(i)),So(i))return new he(ee.UNAVAILABLE,"".concat(e,": ").concat(i));throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ge.comparator(t.key,s.key):(t,s)=>ge.comparator(t.key,s.key),this.keyedMap=Yl(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.pa=new ot(ge.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class go{constructor(e,t,s,o,u,h,m,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new go(e,t,lo.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class P3{constructor(){this.queries=T1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Se(t),u=o.queries;o.queries=T1(),u.forEach((h,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function T1(){return new aa(i=>OT(i),lf)}async function M3(i,e){const t=Se(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new k3,s=e.va()?0:1);try{switch(s){case 0:u.ba=await t.onListen(o,!0);break;case 1:u.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=lg(h,"Initialization of query '".concat(to(e.query),"' failed"));return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.Fa(t.onlineState),u.ba&&e.Ma(u.ba)&&ug(t)}async function V3(i,e){const t=Se(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function L3(i,e){const t=Se(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.Sa)m.Ma(o)&&(s=!0);h.ba=o}}s&&ug(t)}function U3(i,e,t){const s=Se(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function ug(i){i.Ca.forEach(e=>{e.next()})}var pp,b1;(b1=pp||(pp={})).xa="default",b1.Cache="cache";class j3{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==pp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.key=e}}class pb{constructor(e){this.key=e}}class z3{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.Za=kT(e),this.Xa=new lo(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new E1,o=t?t.Xa:this.Xa;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((v,A)=>{const b=o.get(v),N=uf(this.query,A)?A:null,x=!!b&&this.mutatedKeys.has(b.key),L=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;b&&N?b.data.isEqual(N.data)?x!==L&&(s.track({type:3,doc:N}),U=!0):this.ru(b,N)||(s.track({type:2,doc:N}),U=!0,(p&&this.Za(N,p)>0||g&&this.Za(N,g)<0)&&(m=!0)):!b&&N?(s.track({type:0,doc:N}),U=!0):b&&!N&&(s.track({type:1,doc:b}),U=!0,(p||g)&&(m=!0)),U&&(N?(h=h.add(N),u=L?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{Xa:h,nu:s,Cs:m,mutatedKeys:u}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((v,A)=>function(N,x){const L=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:U})}};return L(N)-L(x)}(v.type,A.type)||this.Za(v.doc,A.doc)),this.iu(s),o=o!=null&&o;const m=t&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Ja;return this.Ja=p,h.length!==0||g?{snapshot:new go(this.query,e.Xa,u,h,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new E1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new pb(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new mb(s))}),t}au(e){this.Ha=e.$s,this.Ya=Me();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return go.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const cg="SyncEngine";class B3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class q3{constructor(e){this.key=e,this.cu=!1}}class H3{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new aa(m=>OT(m),lf),this.Pu=new Map,this.Tu=new Set,this.Iu=new ot(ge.comparator),this.Eu=new Map,this.du=new Zp,this.Au={},this.Ru=new Map,this.Vu=po.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function F3(i,e,t=!0){const s=Tb(i);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await gb(s,e,t,!0),o}async function G3(i,e){const t=Tb(i);await gb(t,e,!0,!1)}async function gb(i,e,t,s){const o=await l3(i.localStore,bi(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await Y3(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&lb(i.remoteStore,o),m}async function Y3(i,e,t,s,o){i.fu=(A,b,N)=>async function(L,U,q,X){let re=U.view.tu(q);re.Cs&&(re=await m1(L.localStore,U.query,!1).then(({documents:k})=>U.view.tu(k,re)));const ue=X&&X.targetChanges.get(U.targetId),ae=X&&X.targetMismatches.get(U.targetId)!=null,ye=U.view.applyChanges(re,L.isPrimaryClient,ue,ae);return A1(L,U.targetId,ye.ou),ye.snapshot}(i,A,b,N);const u=await m1(i.localStore,e,!0),h=new z3(e,u.$s),m=h.tu(u.documents),p=Nu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),g=h.applyChanges(m,i.isPrimaryClient,p);A1(i,t,g.ou);const v=new B3(e,t,h);return i.hu.set(e,v),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),g.snapshot}async function $3(i,e,t){const s=Se(i),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(h=>!lf(h,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await dp(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&ig(s.remoteStore,o.targetId),gp(s,o.targetId)}).catch(Ao)):(gp(s,o.targetId),await dp(s.localStore,o.targetId,!0))}async function K3(i,e){const t=Se(i),s=t.hu.get(e),o=t.Pu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ig(t.remoteStore,s.targetId))}async function Q3(i,e,t){const s=n6(i);try{const o=await function(h,m){const p=Se(h),g=wt.now(),v=m.reduce((N,x)=>N.add(x.key),Me());let A,b;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let x=ar(),L=Me();return p.Bs.getEntries(N,v).next(U=>{x=U,x.forEach((q,X)=>{X.isValidDocument()||(L=L.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,x)).next(U=>{A=U;const q=[];for(const X of m){const re=cC(X,A.get(X.key).overlayedDocument);re!=null&&q.push(new ls(X.key,re,wT(re.value.mapValue),en.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,q,m)}).next(U=>{b=U;const q=U.applyToLocalDocumentSet(A,L);return p.documentOverlayCache.saveOverlays(N,U.batchId,q)})}).then(()=>({batchId:b.batchId,changes:MT(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,m,p){let g=h.Au[h.currentUser.toKey()];g||(g=new ot(Ne)),g=g.insert(m,p),h.Au[h.currentUser.toKey()]=g}(s,o.batchId,t),await Ou(s,o.changes),await gf(s.remoteStore)}catch(o){const u=lg(o,"Failed to persist write");t.reject(u)}}async function yb(i,e){const t=Se(i);try{const s=await s3(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Eu.get(u);h&&(ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?ze(h.cu,14607):o.removedDocuments.size>0&&(ze(h.cu,42227),h.cu=!1))}),await Ou(t,s,e)}catch(s){await Ao(s)}}function w1(i,e,t){const s=Se(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.hu.forEach((u,h)=>{const m=h.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const p=Se(h);p.onlineState=m;let g=!1;p.queries.forEach((v,A)=>{for(const b of A.Sa)b.Fa(m)&&(g=!0)}),g&&ug(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function X3(i,e,t){const s=Se(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Eu.get(e),u=o&&o.key;if(u){let h=new ot(ge.comparator);h=h.insert(u,Ut.newNoDocument(u,Te.min()));const m=Me().add(u),p=new df(Te.min(),new Map,new ot(Ne),h,m);await yb(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),hg(s)}else await dp(s.localStore,e,!1).then(()=>gp(s,e,t)).catch(Ao)}async function W3(i,e){const t=Se(i),s=e.batch.batchId;try{const o=await r3(t.localStore,e);vb(t,s,null),_b(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ou(t,o)}catch(o){await Ao(o)}}async function Z3(i,e,t){const s=Se(i);try{const o=await function(h,m){const p=Se(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next(A=>(ze(A!==null,37113),v=A.keys(),p.mutationQueue.removeMutationBatch(g,A))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v)).next(()=>p.localDocuments.getDocuments(g,v))})}(s.localStore,e);vb(s,e,t),_b(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ou(s,o)}catch(o){await Ao(o)}}function _b(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function vb(i,e,t){const s=Se(i);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function gp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Pu.get(e))i.hu.delete(s),t&&i.lu.gu(s,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(s=>{i.du.containsKey(s)||Eb(i,s)})}function Eb(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(ig(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),hg(i))}function A1(i,e,t){for(const s of t)s instanceof mb?(i.du.addReference(s.key,e),J3(i,s)):s instanceof pb?(fe(cg,"Document no longer in limbo: "+s.key),i.du.removeReference(s.key,e),i.du.containsKey(s.key)||Eb(i,s.key)):_e(19791,{pu:s})}function J3(i,e){const t=e.key,s=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(s)||(fe(cg,"New document in limbo: "+t),i.Tu.add(s),hg(i))}function hg(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new ge(Ze.fromString(e)),s=i.Vu.next();i.Eu.set(s,new q3(t)),i.Iu=i.Iu.insert(t,s),lb(i.remoteStore,new Fr(bi(NT(t.path)),s,"TargetPurposeLimboResolution",af.le))}}async function Ou(i,e,t){const s=Se(i),o=[],u=[],h=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{h.push(s.fu(p,e,t).then(g=>{var v;if((g||t)&&s.isPrimaryClient){const A=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))===null||v===void 0?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(g){o.push(g);const A=eg.Rs(p.targetId,g);u.push(A)}}))}),await Promise.all(h),s.lu.Y_(o),await async function(p,g){const v=Se(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ie.forEach(g,b=>ie.forEach(b.ds,N=>v.persistence.referenceDelegate.addReference(A,b.targetId,N)).next(()=>ie.forEach(b.As,N=>v.persistence.referenceDelegate.removeReference(A,b.targetId,N)))))}catch(A){if(!So(A))throw A;fe(tg,"Failed to update sequence numbers: "+A)}for(const A of g){const b=A.targetId;if(!A.fromCache){const N=v.xs.get(b),x=N.snapshotVersion,L=N.withLastLimboFreeSnapshotVersion(x);v.xs=v.xs.insert(b,L)}}}(s.localStore,u))}async function e6(i,e){const t=Se(i);if(!t.currentUser.isEqual(e)){fe(cg,"User change. New user:",e.toKey());const s=await sb(t.localStore,e);t.currentUser=e,function(u,h){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new he(ee.CANCELLED,h))})}),u.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ou(t,s.ks)}}function t6(i,e){const t=Se(i),s=t.Eu.get(e);if(s&&s.cu)return Me().add(s.key);{let o=Me();const u=t.Pu.get(e);if(!u)return o;for(const h of u){const m=t.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function Tb(i){const e=Se(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X3.bind(null,e),e.lu.Y_=L3.bind(null,e.eventManager),e.lu.gu=U3.bind(null,e.eventManager),e}function n6(i){const e=Se(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z3.bind(null,e),e}class Yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return i3(this.persistence,new e3,e.initialUser,this.serializer)}Su(e){return new rb(Jp.fi,this.serializer)}bu(e){return new c3}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yh.provider={build:()=>new Yh};class i6 extends Yh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){ze(this.persistence.referenceDelegate instanceof Fh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jC(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new rb(s=>Fh.fi(s,t),this.serializer)}}class yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>w1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=e6.bind(null,this.syncEngine),await O3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P3}()}createDatastore(e){const t=mf(e.databaseInfo.databaseId),s=function(u){return new p3(u)}(e.databaseInfo);return function(u,h,m,p){return new v3(u,h,m,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,h,m){return new T3(s,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>w1(this.syncEngine,t,0),function(){return y1.C()?new y1:new h3}())}createSyncEngine(e,t){return function(o,u,h,m,p,g,v){const A=new H3(o,u,h,m,p,g);return v&&(A.mu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=Se(o);fe(ta,"RemoteStore shutting down."),u.da.add(5),await Du(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,u){const h=Se(o),m={documents:u.map(A=>Hh(h.serializer,A))},p=await h.Yo("BatchGetDocuments",h.serializer.databaseId,Ze.emptyPath(),m,u.length),g=new Map;p.forEach(A=>{const b=bC(h.serializer,A);g.set(b.key.toString(),b)});const v=[];return u.forEach(A=>{const b=g.get(A.toString());ze(!!b,55234,{key:A}),v.push(b)}),v}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ff(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const o=ge.fromPath(s);this.mutations.push(new FT(o,this.precondition(o)))}),await async function(s,o){const u=Se(s),h={writes:o.map(m=>JT(u.serializer,m))};await u.zo("Commit",u.serializer.databaseId,Ze.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Uu:e.constructor.name});t=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new he(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?en.exists(!1):en.updateTime(t):en.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new he(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(t)}return en.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,t,s,o,u){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=o,this.deferred=u,this.Ku=s.maxAttempts,this.x_=new ng(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new s6(this.datastore),t=this.zu(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(o=>{this.ju(o)}))}).catch(s=>{this.ju(s)})})}zu(e){try{const t=this.updateFunction(e);return!Iu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!GT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="FirestoreClient";class o6{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Zt.UNAUTHENTICATED,this.clientId=dT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{fe(ns,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(fe(ns,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=lg(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Bm(i,e){i.asyncQueue.verifyOperationInProgress(),fe(ns,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await sb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function S1(i,e){i.asyncQueue.verifyOperationInProgress();const t=await l6(i);fe(ns,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>v1(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>v1(e.remoteStore,o)),i._onlineComponents=e}async function l6(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){fe(ns,"Using user provided OfflineComponentProvider");try{await Bm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;co("Error using user provided cache. Falling back to memory cache: "+t),await Bm(i,new Yh)}}else fe(ns,"Using default OfflineComponentProvider"),await Bm(i,new i6(void 0));return i._offlineComponents}async function fg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(fe(ns,"Using user provided OnlineComponentProvider"),await S1(i,i._uninitializedComponentsProvider._online)):(fe(ns,"Using default OnlineComponentProvider"),await S1(i,new yp))),i._onlineComponents}function u6(i){return fg(i).then(e=>e.syncEngine)}function c6(i){return fg(i).then(e=>e.datastore)}async function h6(i){const e=await fg(i),t=e.eventManager;return t.onListen=F3.bind(null,e.syncEngine),t.onUnlisten=$3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=K3.bind(null,e.syncEngine),t}function f6(i,e,t={}){const s=new tr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,m,p,g){const v=new r6({next:b=>{v.xu(),h.enqueueAndForget(()=>V3(u,A)),b.fromCache&&p.source==="server"?g.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),A=new j3(m,v,{includeMetadataChanges:!0,Qa:!0});return M3(u,A)}(await h6(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(i,e,t){if(!t)throw new he(ee.INVALID_ARGUMENT,"Function ".concat(i,"() cannot be called with an empty ").concat(e,"."))}function d6(i,e,t,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,"".concat(i," and ").concat(t," cannot be used together."))}function x1(i){if(!ge.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(i," has ").concat(i.length,"."))}function I1(i){if(ge.isDocumentKey(i))throw new he(ee.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(i," has ").concat(i.length,"."))}function yf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i="".concat(i.substring(0,20),"...")),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?"a custom ".concat(e," object"):"an object"}}return typeof i=="function"?"a function":_e(12329,{type:typeof i})}function is(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yf(i);throw new he(ee.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(t))}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firestore.googleapis.com",C1=!0;class N1{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ab,this.ssl=C1}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:C1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ib;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<LC)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(u.timeoutSeconds," (must not be NaN)"));if(u.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(u.timeoutSeconds," (minimum allowed value is 5)"));if(u.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(u.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new pI;switch(s.type){case"firstParty":return new vI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=R1.get(t);s&&(fe("ComponentProvider","Removing Datastore"),R1.delete(t),s.terminate())}(this),Promise.resolve()}}function m6(i,e,t,s={}){var o;i=is(i,_f);const u=ss(e),h=i._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:i._getEmulatorOptions()}),p="".concat(e,":").concat(t);u&&(Ip("https://".concat(p)),Cp("Firestore",!0)),h.host!==Ab&&h.host!==p&&co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},h),{host:p,ssl:u,emulatorOptions:s});if(!Ws(g,m)&&(i._setSettings(g),s.mockUserToken)){let v,A;if(typeof s.mockUserToken=="string")v=s.mockUserToken,A=Zt.MOCK_USER;else{v=vE(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Zt(b)}i._authCredentials=new gI(new hT(v,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class mn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class Qr extends us{constructor(e,t,s){super(e,t,NT(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ge(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function zn(i,e,...t){if(i=st(i),wb("collection","path",e),i instanceof _f){const s=Ze.fromString(e,...t);return I1(s),new Qr(i,null,s)}{if(!(i instanceof mn||i instanceof Qr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ze.fromString(e,...t));return I1(s),new Qr(i.firestore,null,s)}}function _u(i,e,...t){if(i=st(i),arguments.length===1&&(e=dT.newId()),wb("doc","path",e),i instanceof _f){const s=Ze.fromString(e,...t);return x1(s),new mn(i,null,new ge(s))}{if(!(i instanceof mn||i instanceof Qr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ze.fromString(e,...t));return x1(s),new mn(i.firestore,i instanceof Qr?i.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="AsyncQueue";class O1{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new ng(this,"async_queue_retry"),this.rc=()=>{const s=zm();s&&fe(D1,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=zm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=zm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new tr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!So(e))throw e;fe(D1,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,sr("INTERNAL UNHANDLED ERROR: ",k1(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=og.createAndSchedule(this,e,t,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&_e(47125,{cc:k1(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function k1(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+"\n"+i.stack),e}class Io extends _f{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new O1,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O1(e),this._firestoreClient=void 0,await e}}}function p6(i,e){const t=typeof i=="object"?i:Op(),s=typeof i=="string"?i:Lh,o=ef(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=gE("firestore");u&&m6(o,...u)}return o}function dg(i){if(i._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||g6(i),i._firestoreClient}function g6(i){var e,t,s;const o=i._freezeSettings(),u=function(m,p,g,v){return new PI(m,p,g,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,bb(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new o6(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na($t.fromBase64String(e))}catch(t){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new na($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=/^__.*__$/;class _6{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cu(e,this.data,t,this.fieldTransforms)}}class Sb{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ls(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ic:i})}}class gg{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return $h(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Rb(this.Ic)&&y6.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class v6{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||mf(e)}bc(e,t,s,o=!1){return new gg({Ic:e,methodName:t,wc:s,path:Yt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(i){const e=i._freezeSettings(),t=mf(i._databaseId);return new v6(i._databaseId,!!e.ignoreUndefinedProperties,t)}function xb(i,e,t,s,o,u={}){const h=i.bc(u.merge||u.mergeFields?2:0,e,t,o);_g("Data must be an object, but it was:",h,s);const m=Nb(s,h);let p,g;if(u.merge)p=new An(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const A of u.mergeFields){const b=_p(e,A,t);if(!h.contains(b))throw new he(ee.INVALID_ARGUMENT,"Field '".concat(b,"' is specified in your field mask but missing from your input data."));Ob(v,b)||v.push(b)}p=new An(v),g=h.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=h.fieldTransforms;return new _6(new un(m),p,g)}class Tf extends vf{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}class yg extends vf{_toFieldTransform(e){return new aC(e.path,new pu)}isEqual(e){return e instanceof yg}}function Ib(i,e,t,s){const o=i.bc(1,e,t);_g("Data must be an object, but it was:",o,s);const u=[],h=un.empty();os(s,(p,g)=>{const v=vg(e,p,t);g=st(g);const A=o.mc(v);if(g instanceof Tf)u.push(v);else{const b=Pu(g,A);b!=null&&(u.push(v),h.set(v,b))}});const m=new An(u);return new Sb(h,m,o.fieldTransforms)}function Cb(i,e,t,s,o,u){const h=i.bc(1,e,t),m=[_p(e,s,t)],p=[o];if(u.length%2!=0)throw new he(ee.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let b=0;b<u.length;b+=2)m.push(_p(e,u[b])),p.push(u[b+1]);const g=[],v=un.empty();for(let b=m.length-1;b>=0;--b)if(!Ob(g,m[b])){const N=m[b];let x=p[b];x=st(x);const L=h.mc(N);if(x instanceof Tf)g.push(N);else{const U=Pu(x,L);U!=null&&(g.push(N),v.set(N,U))}}const A=new An(g);return new Sb(v,A,h.fieldTransforms)}function E6(i,e,t,s=!1){return Pu(t,i.bc(s?4:3,e))}function Pu(i,e){if(Db(i=st(i)))return _g("Unsupported field value:",e,i),Nb(i,e);if(i instanceof vf)return function(s,o){if(!Rb(o.Ic))throw o.gc("".concat(s._methodName,"() can only be used with update() and set()"));if(!o.path)throw o.gc("".concat(s._methodName,"() is not currently supported inside arrays"));const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const m of s){let p=Pu(m,o.fc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=st(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return iC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=wt.fromDate(s);return{timestampValue:qh(o.serializer,u)}}if(s instanceof wt){const u=new wt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qh(o.serializer,u)}}if(s instanceof mg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof na)return{bytesValue:QT(o.serializer,s._byteString)};if(s instanceof mn){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.gc("Document reference is for database ".concat(h.projectId,"/").concat(h.database," but should be for database ").concat(u.projectId,"/").concat(u.database));return{referenceValue:Wp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof pg)return function(h,m){return{mapValue:{fields:{[TT]:{stringValue:bT},[Uh]:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.gc("VectorValues must only contain numeric values.");return Kp(m.serializer,g)})}}}}}}(s,o);throw o.gc("Unsupported field value: ".concat(yf(s)))}(i,e)}function Nb(i,e){const t={};return pT(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(i,(s,o)=>{const u=Pu(o,e.Ac(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function Db(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof wt||i instanceof mg||i instanceof na||i instanceof mn||i instanceof vf||i instanceof pg)}function _g(i,e,t){if(!Db(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=yf(t);throw s==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+s)}}function _p(i,e,t){if((e=st(e))instanceof ku)return e._internalPath;if(typeof e=="string")return vg(i,e);throw $h("Field path arguments must be of type string or ",i,!1,void 0,t)}const T6=new RegExp("[~\\*/\\[\\]]");function vg(i,e,t){if(e.search(T6)>=0)throw $h("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),i,!1,void 0,t);try{return new ku(...e.split("."))._internalPath}catch(s){throw $h("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),i,!1,void 0,t)}}function $h(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m="Function ".concat(e,"() called with invalid data");t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=" in field ".concat(s)),h&&(p+=" in document ".concat(o)),p+=")"),new he(ee.INVALID_ARGUMENT,m+i+p)}function Ob(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b6 extends Kh{data(){return super.data()}}function bf(i,e){return typeof e=="string"?vg(i,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Eg{}class Tg extends Eg{}function qr(i,e,...t){let s=[];e instanceof Eg&&s.push(e),s=s.concat(t),function(u){const h=u.filter(p=>p instanceof bg).length,m=u.filter(p=>p instanceof wf).length;if(h>1||h>0&&m>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class wf extends Tg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new wf(e,t,s)}_apply(e){const t=this._parse(e);return kb(e._query,t),new us(e.firestore,e.converter,up(e._query,t))}_parse(e){const t=Ef(e.firestore);return function(u,h,m,p,g,v,A){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(v,"' queries on documentId()."));if(v==="in"||v==="not-in"){V1(A,v);const x=[];for(const L of A)x.push(M1(p,u,L));b={arrayValue:{values:x}}}else b=M1(p,u,A)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||V1(A,v),b=E6(m,h,A,v==="in"||v==="not-in");return bt.create(g,v,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vu(i,e,t){const s=e,o=bf("where",i);return wf._create(o,s,t)}class bg extends Eg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bg(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)kb(h,p),h=up(h,p)}(e._query,t),new us(e.firestore,e.converter,up(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wg extends Tg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wg(e,t)}_apply(e){const t=function(o,u,h){if(o.startAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mu(u,h)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(o,u){const h=o.explicitOrderBy.concat([u]);return new Ro(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function iu(i,e="asc"){const t=e,s=bf("orderBy",i);return wg._create(s,t)}class Ag extends Tg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Ag(e,t,s)}_apply(e){return new us(e.firestore,e.converter,zh(e._query,this._limit,this._limitType))}}function P1(i){return Ag._create("limit",i,"F")}function M1(i,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DT(e)&&t.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(t,"' contains a '/' character."));const s=e.path.child(Ze.fromString(t));if(!ge.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(s,"' is not because it has an odd number of segments (").concat(s.length,")."));return Q0(i,new ge(s))}if(t instanceof mn)return Q0(i,t._key);throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(yf(t),"."))}function V1(i,e){if(!Array.isArray(i)||i.length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function kb(i,e){const t=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(ee.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new he(ee.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(t.toString(),"' filters."))}class Pb{convertValue(e,t="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return os(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t[Uh].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>gt(h.doubleValue));return new pg(u)}convertGeoPoint(e){return new mg(gt(e.latitude),gt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=of(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=Zr(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ze.fromString(e);ze(nb(s),9688,{name:e});const o=new fu(s.get(1),s.get(3)),u=new ge(s.popFirst(5));return o.isEqual(t)||sr("Document ".concat(u," contains a document reference within a different database (").concat(o.projectId,"/").concat(o.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class A6 extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vb extends Kh{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(bf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Rh extends Vb{data(e={}){return super.data(e)}}class S6{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Rh(this._firestore,this._userDataWriter,s.key,s,new Kl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const p=new Rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Rh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),v=h.indexOf(m.doc.key)),{type:R6(m.type),doc:p,oldIndex:g,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function R6(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:i})}}class Lb extends Pb{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function Wi(i){i=is(i,us);const e=is(i.firestore,Io),t=dg(e),s=new Lb(e);return w6(i._query),f6(t,i._query).then(o=>new S6(e,s,i,o))}function x6(i,e,t,...s){i=is(i,mn);const o=is(i.firestore,Io),u=Ef(o);let h;return h=typeof(e=st(e))=="string"||e instanceof ku?Cb(u,"updateDoc",i._key,e,t,s):Ib(u,"updateDoc",i._key,e),Sg(o,[h.toMutation(i._key,en.exists(!0))])}function I6(i){return Sg(is(i.firestore,Io),[new ff(i._key,en.none())])}function Ub(i,e){const t=is(i.firestore,Io),s=_u(i),o=Mb(i.converter,e);return Sg(t,[xb(Ef(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,en.exists(!1))]).then(()=>s)}function Sg(i,e){return function(s,o){const u=new tr;return s.asyncQueue.enqueueAndForget(async()=>Q3(await u6(s),o,u)),u.promise}(dg(i),e)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={maxAttempts:5};function Ql(i,e){if((i=st(i)).firestore!==e)throw new he(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ef(e)}get(e){const t=Ql(e,this._firestore),s=new A6(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return _e(24041);const u=o[0];if(u.isFoundDocument())return new Kh(this._firestore,s,u.key,u,t.converter);if(u.isNoDocument())return new Kh(this._firestore,s,t._key,null,t.converter);throw _e(18433,{doc:u})})}set(e,t,s){const o=Ql(e,this._firestore),u=Mb(o.converter,t,s),h=xb(this._dataReader,"Transaction.set",o._key,u,o.converter!==null,s);return this._transaction.set(o._key,h),this}update(e,t,s,...o){const u=Ql(e,this._firestore);let h;return h=typeof(t=st(t))=="string"||t instanceof ku?Cb(this._dataReader,"Transaction.update",u._key,t,s,o):Ib(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Ql(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6 extends N6{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ql(e,this._firestore),s=new Lb(this._firestore);return super.get(e).then(o=>new Vb(this._firestore,s,t._key,o._document,new Kl(!1,!1),t.converter))}}function O6(i,e,t){i=is(i,Io);const s=Object.assign(Object.assign({},C6),t);return function(u){if(u.maxAttempts<1)throw new he(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(u,h,m){const p=new tr;return u.asyncQueue.enqueueAndForget(async()=>{const g=await c6(u);new a6(u.asyncQueue,g,m,h,p).Wu()}),p.promise}(dg(i),o=>e(new D6(i,o)),s)}function ru(){return new yg("serverTimestamp")}(function(e,t=!0){(function(o){wo=o})(ra),Zs(new Xr("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Io(new yI(s.getProvider("auth-internal")),new EI(h,s.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(g.options.projectId,v)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),vi(L0,U0,e),vi(L0,U0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firebasestorage.googleapis.com",zb="storageBucket",k6=2*60*1e3,P6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends Ai{constructor(e,t,s=0){super(qm(e),"Firebase Storage: ".concat(t," (").concat(qm(e),")")),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var ht;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function qm(i){return"storage/"+i}function Rg(){const i="An unknown error occurred, please check the error payload for server response.";return new ft(ht.UNKNOWN,i)}function M6(i){return new ft(ht.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function V6(i){return new ft(ht.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L6(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(ht.UNAUTHENTICATED,i)}function U6(){return new ft(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function j6(i){return new ft(ht.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function z6(){return new ft(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B6(){return new ft(ht.CANCELED,"User canceled the upload/download.")}function q6(i){return new ft(ht.INVALID_URL,"Invalid URL '"+i+"'.")}function H6(i){return new ft(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function F6(){return new ft(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zb+"' property when initializing the app?")}function G6(){return new ft(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Y6(){return new ft(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $6(i){return new ft(ht.UNSUPPORTED_ENVIRONMENT,"".concat(i," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."))}function vp(i){return new ft(ht.INVALID_ARGUMENT,i)}function Bb(){return new ft(ht.APP_DELETED,"The Firebase app was deleted.")}function K6(i){return new ft(ht.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function su(i,e){return new ft(ht.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function ql(i){throw new ft(ht.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Sn.makeFromUrl(e,t)}catch(o){return new Sn(e,"")}if(s.path==="")return s;throw H6(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function g(ue){ue.path_=decodeURIComponent(ue.path)}const v="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",N=new RegExp("^https?://".concat(A,"/").concat(v,"/b/").concat(o,"/o").concat(b),"i"),x={bucket:1,path:3},L=t===jb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",q=new RegExp("^https?://".concat(L,"/").concat(o,"/").concat(U),"i"),re=[{regex:m,indices:p,postModify:u},{regex:N,indices:x,postModify:g},{regex:q,indices:{bucket:1,path:2},postModify:g}];for(let ue=0;ue<re.length;ue++){const ae=re[ue],ye=ae.regex.exec(e);if(ye){const k=ye[ae.indices.bucket];let R=ye[ae.indices.path];R||(R=""),s=new Sn(k,R),ae.postModify(s);break}}if(s==null)throw q6(e);return s}}class Q6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(i,e,t){let s=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let g=!1;function v(...U){g||(g=!0,e.apply(null,U))}function A(U){o=setTimeout(()=>{o=null,i(N,p())},U)}function b(){u&&clearTimeout(u)}function N(U,...q){if(g){b();return}if(U){b(),v.call(null,U,...q);return}if(p()||h){b(),v.call(null,U,...q);return}s<64&&(s*=2);let re;m===1?(m=2,re=0):re=(s+Math.random())*1e3,A(re)}let x=!1;function L(U){x||(x=!0,b(),!g&&(o!==null?(U||(m=2),clearTimeout(o),A(0)):U||(m=1)))}return A(0),u=setTimeout(()=>{h=!0,L(!0)},t),L}function W6(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(i){return i!==void 0}function J6(i){return typeof i=="object"&&!Array.isArray(i)}function xg(i){return typeof i=="string"||i instanceof String}function L1(i){return Ig()&&i instanceof Blob}function Ig(){return typeof Blob<"u"}function U1(i,e,t,s){if(s<e)throw vp("Invalid value for '".concat(i,"'. Expected ").concat(e," or greater."));if(s>t)throw vp("Invalid value for '".concat(i,"'. Expected ").concat(t," or less."))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(i,e,t){let s=e;return t==null&&(s="https://".concat(e)),"".concat(t,"://").concat(s,"/v0").concat(i)}function qb(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Xs;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Xs||(Xs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t,s,o,u,h,m,p,g,v,A,b=!0,N=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=A,this.retry=b,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,L)=>{this.resolve_=x,this.reject_=L,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new dh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===Xs.NO_ERROR,p=u.getStatus();if(!m||eN(p,this.additionalRetryCodes_)&&this.retry){const v=u.getErrorCode()===Xs.ABORT;s(!1,new dh(!1,null,v));return}const g=this.successCodes_.indexOf(p)!==-1;s(!0,new dh(g,u))})},t=(s,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());Z6(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=Rg();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?Bb():B6();h(p)}else{const p=z6();h(p)}};this.canceled_?t(!1,new dh(!1,null,!0)):this.backoffId_=X6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&W6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function nN(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function iN(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function rN(i,e){e&&(i["X-Firebase-GMPID"]=e)}function sN(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function aN(i,e,t,s,o,u,h=!0,m=!1){const p=qb(i.urlParams),g=i.url+p,v=Object.assign({},i.headers);return rN(v,e),nN(v,t),iN(v,u),sN(v,s),new tN(g,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function lN(...i){const e=oN();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(Ig())return new Blob(i);throw new ft(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uN(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(i){if(typeof atob>"u")throw $6("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hm{constructor(e,t){this.data=e,this.contentType=t||null}}function hN(i,e){switch(i){case _i.RAW:return new Hm(Hb(e));case _i.BASE64:case _i.BASE64URL:return new Hm(Fb(i,e));case _i.DATA_URL:return new Hm(dN(e),mN(e))}throw Rg()}function Hb(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=i.charCodeAt(++t);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function fN(i){let e;try{e=decodeURIComponent(i)}catch(t){throw su(_i.DATA_URL,"Malformed data URL.")}return Hb(e)}function Fb(i,e){switch(i){case _i.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw su(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw su(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=cN(e)}catch(o){throw o.message.includes("polyfill")?o:su(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class Gb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw su(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=pN(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function dN(i){const e=new Gb(i);return e.base64?Fb(_i.BASE64,e.rest):fN(e.rest)}function mN(i){return new Gb(i).contentType}function pN(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){let s=0,o="";L1(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(L1(this.data_)){const s=this.data_,o=uN(s,e,t);return o===null?null:new Hr(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new Hr(s,!0)}}static getBlob(...e){if(Ig()){const t=e.map(s=>s instanceof Hr?s.data_:s);return new Hr(lN.apply(null,t))}else{const t=e.map(h=>xg(h)?hN(_i.RAW,h).data:h.data_);let s=0;t.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(h=>{for(let m=0;m<h.length;m++)o[u++]=h[m]}),new Hr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(i){let e;try{e=JSON.parse(i)}catch(t){return null}return J6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function yN(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function $b(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(i,e){return e}class on{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||_N}}let mh=null;function vN(i){return!xg(i)||i.length<2?i:$b(i)}function Kb(){if(mh)return mh;const i=[];i.push(new on("bucket")),i.push(new on("generation")),i.push(new on("metageneration")),i.push(new on("name","fullPath",!0));function e(u,h){return vN(h)}const t=new on("name");t.xform=e,i.push(t);function s(u,h){return h!==void 0?Number(h):h}const o=new on("size");return o.xform=s,i.push(o),i.push(new on("timeCreated")),i.push(new on("updated")),i.push(new on("md5Hash",null,!0)),i.push(new on("cacheControl",null,!0)),i.push(new on("contentDisposition",null,!0)),i.push(new on("contentEncoding",null,!0)),i.push(new on("contentLanguage",null,!0)),i.push(new on("contentType",null,!0)),i.push(new on("metadata","customMetadata",!0)),mh=i,mh}function EN(i,e){function t(){const s=i.bucket,o=i.fullPath,u=new Sn(s,o);return e._makeStorageReference(u)}Object.defineProperty(i,"ref",{get:t})}function TN(i,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];s[h.local]=h.xform(s,e[h.server])}return EN(s,i),s}function Qb(i,e,t){const s=Yb(e);return s===null?null:TN(i,s,t)}function bN(i,e,t,s){const o=Yb(e);if(o===null||!xg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(g=>{const v=i.bucket,A=i.fullPath,b="/b/"+h(v)+"/o/"+h(A),N=Cg(b,t,s),x=qb({alt:"media",token:g});return N+x})[0]}function wN(i,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=i[u.local])}return JSON.stringify(t)}class Xb{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(i){if(!i)throw Rg()}function AN(i,e){function t(s,o){const u=Qb(i,o,e);return Wb(u!==null),u}return t}function SN(i,e){function t(s,o){const u=Qb(i,o,e);return Wb(u!==null),bN(u,o,i.host,i._protocol)}return t}function Zb(i){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=U6():o=L6():t.getStatus()===402?o=V6(i.bucket):t.getStatus()===403?o=j6(i.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function RN(i){const e=Zb(i);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=M6(i.path)),u.serverResponse=o.serverResponse,u}return t}function xN(i,e,t){const s=e.fullServerUrl(),o=Cg(s,i.host,i._protocol),u="GET",h=i.maxOperationRetryTime,m=new Xb(o,u,SN(i,t),h);return m.errorHandler=RN(e),m}function IN(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function CN(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=IN(null,e)),s}function NN(i,e,t,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function m(){let re="";for(let ue=0;ue<2;ue++)re=re+Math.random().toString().slice(2);return re}const p=m();h["Content-Type"]="multipart/related; boundary="+p;const g=CN(e,s,o),v=wN(g,t),A="--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+v+"\r\n--"+p+"\r\nContent-Type: "+g.contentType+"\r\n\r\n",b="\r\n--"+p+"--",N=Hr.getBlob(A,s,b);if(N===null)throw G6();const x={name:g.fullPath},L=Cg(u,i.host,i._protocol),U="POST",q=i.maxUploadRetryTime,X=new Xb(L,U,AN(i,t),q);return X.urlParams=x,X.headers=h,X.body=N.uploadData(),X.errorHandler=Zb(e),X}class DN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,u){if(this.sent_)throw ql("cannot .send() more than once");if(ss(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ql("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ql("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ql("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ql("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ON extends DN{initXhr(){this.xhr_.responseType="text"}}function Jb(){return new ON}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t){this._service=e,t instanceof Sn?this._location=t:this._location=Sn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ia(e,t)}get root(){const e=new Sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $b(this._location.path)}get storage(){return this._service}get parent(){const e=gN(this._location.path);if(e===null)return null;const t=new Sn(this._location.bucket,e);return new ia(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw K6(e)}}function kN(i,e,t){i._throwIfRoot("uploadBytes");const s=NN(i.storage,i._location,Kb(),new Hr(e,!0),t);return i.storage.makeRequestWithTokens(s,Jb).then(o=>({metadata:o,ref:i}))}function PN(i){i._throwIfRoot("getDownloadURL");const e=xN(i.storage,i._location,Kb());return i.storage.makeRequestWithTokens(e,Jb).then(t=>{if(t===null)throw Y6();return t})}function MN(i,e){const t=yN(i._location.path,e),s=new Sn(i._location.bucket,t);return new ia(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(i){return/^[A-Za-z]+:\/\//.test(i)}function LN(i,e){return new ia(i,e)}function e2(i,e){if(i instanceof Ng){const t=i;if(t._bucket==null)throw F6();const s=new ia(t,t._bucket);return e!=null?e2(s,e):s}else return e!==void 0?MN(i,e):i}function UN(i,e){if(e&&VN(e)){if(i instanceof Ng)return LN(i,e);throw vp("To use ref(service, url), the first argument must be a Storage instance.")}else return e2(i,e)}function j1(i,e){const t=e==null?void 0:e[zb];return t==null?null:Sn.makeFromBucketSpec(t,i)}function jN(i,e,t,s={}){i.host="".concat(e,":").concat(t);const o=ss(e);o&&(Ip("https://".concat(i.host,"/b")),Cp("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:vE(u,i.app.options.projectId))}class Ng{constructor(e,t,s,o,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=jb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=k6,this._maxUploadRetryTime=P6,this._requests=new Set,o!=null?this._bucket=Sn.makeFromBucketSpec(o,this._host):this._bucket=j1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sn.makeFromBucketSpec(this._url,e):this._bucket=j1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ia(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new Q6(Bb());{const h=aN(e,this._appId,s,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const z1="@firebase/storage",B1="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="storage";function q1(i,e,t){return i=st(i),kN(i,e,t)}function H1(i){return i=st(i),PN(i)}function F1(i,e){return i=st(i),UN(i,e)}function zN(i=Op(),e){i=st(i);const s=ef(i,t2).getImmediate({identifier:e}),o=gE("storage");return o&&BN(s,...o),s}function BN(i,e,t,s={}){jN(i,e,t,s)}function qN(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new Ng(t,s,o,e,ra)}function HN(){Zs(new Xr(t2,qN,"PUBLIC").setMultipleInstances(!0)),vi(z1,B1,""),vi(z1,B1,"esm2017")}HN();const FN={apiKey:"AIzaSyAUVtQUa4dMPA7MVF5wAJSxB-UvCuZQo7o",authDomain:"pipbeachplug.firebaseapp.com",projectId:"pipbeachplug",storageBucket:"pipbeachplug.firebasestorage.app",messagingSenderId:"962943218026",appId:"1:962943218026:web:a21c164e452b0c67347513",measurementId:"G-P30RJPFEQ2"},Dg=bE(FN),Og=hI(Dg),Jt=p6(Dg),G1=zN(Dg),n2=H.createContext({currentUser:null,loading:!0}),GN=({children:i})=>{const[e,t]=H.useState(null),[s,o]=H.useState(!0);H.useEffect(()=>Jx(Og,m=>{t(m),o(!1)}),[]);const u={currentUser:e,loading:s};return T.jsx(n2.Provider,{value:u,children:!s&&i})};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$N=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Y1=i=>{const e=$N(i);return e.charAt(0).toUpperCase()+e.slice(1)},i2=(...i)=>i.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),KN=i=>{for(const e in i)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=H.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:h,...m},p)=>H.createElement("svg",{ref:p,...QN,width:e,height:e,stroke:i,strokeWidth:s?Number(t)*24/Number(e):t,className:i2("lucide",o),...!u&&!KN(m)&&{"aria-hidden":"true"},...m},[...h.map(([g,v])=>H.createElement(g,v)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=(i,e)=>{const t=H.forwardRef(({className:s,...o},u)=>H.createElement(XN,{ref:u,iconNode:e,className:i2("lucide-".concat(YN(Y1(i))),"lucide-".concat(i),s),...o}));return t.displayName=Y1(i),t};/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ZN=Mu("circle-check-big",WN);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],eD=Mu("mail",JN);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],nD=Mu("phone",tD);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],rD=Mu("shopping-cart",iD);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],aD=Mu("trash-2",sD),r2="/assets/header-BR9jDwIl.svg",oD="/assets/hero-__zGJ2yA.svg",Fm=["smokes","snack-attack","candy-boom","super-nuts","vibe-save","game-on"],Gm=i=>i.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase());function lD(){const{getCartItemCount:i}=Eo(),e=i();return T.jsx("header",{className:"sticky top-0 z-50 bg-white/95 backdrop-blur-sm py-4 border-b border-gray-200 mb-8 lg:mb-16",children:T.jsxs("div",{className:"grid grid-cols-3 items-center max-w-md mx-auto lg:max-w-6xl px-4 sm:px-8",children:[T.jsx("div",{}),T.jsx("div",{className:"flex justify-center",children:T.jsx("img",{src:r2,alt:"Pip Beach Plug Logo",className:"h-10"})}),T.jsx("div",{className:"flex justify-end",children:T.jsxs(bu,{to:"/confirm",className:"relative text-gray-700 hover:text-blue-600 transition-colors p-2","aria-label":"View shopping cart",children:[T.jsx(rD,{className:"w-6 h-6"}),e>0&&T.jsx("span",{className:"absolute top-0 right-0 block h-5 w-5 rounded-full bg-[#224ED1] text-white text-xs flex items-center justify-center",children:e})]})})]})})}function uD(){const{getCartItemCount:i,getCartTotal:e}=Eo(),t=i();return t===0?null:T.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black text-white p-4 shadow-lg animate-slide-up",children:T.jsxs("div",{className:"max-w-md mx-auto lg:max-w-6xl flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsxs("p",{className:"font-bold",children:[t," item",t>1?"s":""," in cart"]}),T.jsxs("p",{className:"text-sm",children:["Total: EGP ",e()]})]}),T.jsx(bu,{to:"/confirm",className:"px-6 py-2 font-bold bg-[#224ED1] rounded-lg hover:bg-blue-600 transition-colors",children:"View Cart"})]})})}function cD({isOpen:i}){return T.jsx("div",{className:"w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[12px] border-t-[#224ED1] transition-transform duration-300 ease-in-out ".concat(i?"rotate-180":"rotate-0")})}function hD({product:i}){const{addToCart:e}=Eo(),t=()=>{const s={...i,id:i.id,product_name:i.name,price_consumer:i.price,image:i.imageUrl};e(s)};return T.jsxs("div",{className:"flex-shrink-0 w-40 bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col",children:[T.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-full h-32 object-contain"}),T.jsxs("div",{className:"p-3 flex-grow flex flex-col justify-between",children:[T.jsx("div",{children:T.jsxs("div",{className:"flex justify-between items-start gap-2 mb-2",children:[T.jsx("h3",{className:"text-sm font-bold text-gray-800 font-sans truncate",title:i.name,children:i.name}),T.jsxs("p",{className:"text-xs font-semibold text-blue-600 font-sans shrink-0 pt-0.5",children:["EGP ",i.price]})]})}),T.jsx("button",{onClick:t,className:"w-full tracking-wider bg-[#224ED1] text-white text-xl font-bold py-1.5 rounded-lg hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75",children:"Order"})]})]})}function Ym(){return T.jsxs("div",{className:"flex-shrink-0 w-40 bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden flex flex-col animate-pulse",children:[T.jsx("div",{className:"w-full h-32 bg-gray-300"}),T.jsxs("div",{className:"p-3 flex-grow flex flex-col justify-between",children:[T.jsxs("div",{children:[T.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-3"}),T.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/4"})]}),T.jsx("div",{className:"h-9 bg-gray-400 rounded-lg mt-3"})]})]})}function fD(){const[i,e]=H.useState({name:"",email:"",phone:"",subject:""}),t=u=>{const{name:h,value:m}=u.target;e(p=>({...p,[h]:m}))},s=u=>{u.preventDefault(),alert("Thank you, ".concat(i.name,"! Your message has been received.")),e({name:"",email:"",phone:"",subject:""})},o="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#224ED1] transition-shadow";return T.jsxs("form",{onSubmit:s,className:"space-y-4",children:[T.jsx("input",{type:"text",name:"name",value:i.name,onChange:t,placeholder:"Your Name",className:o,required:!0}),T.jsx("input",{type:"email",name:"email",value:i.email,onChange:t,placeholder:"Your Email Address",className:o,required:!0}),T.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:t,placeholder:"Your Phone Number (Optional)",className:o}),T.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:t,placeholder:"Subject",className:o,required:!0}),T.jsx("button",{type:"submit",className:"w-full tracking-wider bg-[#224ED1] text-white text-xl font-bold py-3 rounded-lg hover:bg-blue-800 transition-colors focus:outline-none focus:ring-2 focus:ring-black focus:ring-opacity-75",children:"Send Message"})]})}function dD(){const i="Hey.pipplug@gmail.com",e="00201019284462";return T.jsx("footer",{className:"mt-16",children:T.jsxs("div",{className:"text-center space-y-6",children:[T.jsx("img",{src:r2,alt:"Pip Beach Plug Logo",className:"mx-auto w-12"}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("a",{href:"mailto:".concat(i),className:"flex items-center justify-center gap-2 text-gray-600 hover:text-blue-600 transition-colors",children:[T.jsx(eD,{className:"w-4 h-4"})," ",T.jsx("span",{children:i})]}),T.jsxs("a",{href:"tel:".concat(e.replace(/\s/g,"")),className:"flex items-center justify-center gap-2 text-gray-600 hover:text-blue-600 transition-colors",children:[T.jsx(nD,{className:"w-4 h-4"})," ",T.jsx("span",{children:e})]})]}),T.jsxs("p",{className:"text-xs text-gray-400 pt-4",children:["© ",new Date().getFullYear()," Pip Beach Plug. All Rights Reserved."]})]})})}function mD(){const[i,e]=H.useState({}),[t,s]=H.useState({});H.useEffect(()=>{(()=>{const h={};Fm.forEach(m=>{const p=Gm(m);h[p]={products:[],isLoading:!0,error:null}}),s(h),Fm.forEach(async m=>{const p=Gm(m);try{const g=await Wi(zn(Jt,m)),v=[];g.forEach(A=>{var N,x,L;const b=A.data();b.is_visible&&v.push({id:A.id,name:b.name,price:b.price,imageUrl:b.imageUrl,is_available:b.is_available,is_visible:b.is_visible,orderId:b.orderId,stock:(N=b.stock)!=null?N:0,createdAt:(x=b.createdAt)!=null?x:null,updatedAt:(L=b.updatedAt)!=null?L:null})}),s(A=>({...A,[p]:{products:v,isLoading:!1,error:null}}))}catch(g){console.error("Failed to fetch ".concat(p,":"),g),s(v=>({...v,[p]:{...v[p],isLoading:!1,error:"Could not load ".concat(p,".")}}))}})})()},[]);const o=u=>{e(h=>({...h,[u]:!h[u]}))};return T.jsxs("div",{className:"min-h-screen bg-white font-roc-grotesk-compressed",children:[T.jsx(lD,{}),T.jsx("div",{className:"px-4 sm:px-8 py-4 pb-32",children:T.jsxs("div",{className:"max-w-md mx-auto lg:max-w-6xl",children:[T.jsx("section",{className:"mb-20",children:T.jsx("div",{className:"mt-12 lg:mt-0 flex justify-center",children:T.jsx("img",{src:oD,alt:"Pip Beach Plug Hero",className:"w-full max-w-sm lg:max-w-md"})})}),T.jsx("main",{className:"mb-24",children:Fm.map(u=>{const h=Gm(u),m=t[h];return m?T.jsxs("div",{className:"border-b border-gray-200 mb-8",children:[T.jsxs("button",{onClick:()=>o(h),className:"w-full flex items-center justify-between py-4 text-left",children:[T.jsx("span",{className:"text-5xl text-black font-roc-grotesk-compressed",children:h}),T.jsx(cD,{isOpen:!!i[h]})]}),T.jsx("div",{className:"transition-all duration-500 ease-in-out overflow-hidden ".concat(i[h]?"max-h-[500px]":"max-h-0"),children:T.jsxs("div",{className:"flex space-x-4 overflow-x-auto py-4 px-1 scrollbar-thin",children:[m.isLoading&&T.jsxs(T.Fragment,{children:[T.jsx(Ym,{}),T.jsx(Ym,{}),T.jsx(Ym,{})]}),m.error&&T.jsx("p",{className:"text-red-500 px-2 font-sans",children:m.error}),!m.isLoading&&!m.error&&(m.products.length>0?m.products.map(p=>T.jsx(hD,{product:p},p.id)):T.jsx("p",{className:"text-gray-500 px-2 font-sans",children:"No products in this category yet."})),T.jsx("div",{className:"flex-shrink-0 w-1 lg:hidden"})]})})]},h):null})}),T.jsxs("section",{className:"mt-24",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("h2",{className:"text-5xl text-black font-roc-grotesk-compressed",children:"Get In Touch"}),T.jsx("p",{className:"mt-2 text-gray-600 font-sans",children:"Have a question or a special request? Drop us a line."})]}),T.jsx(fD,{})]}),T.jsx("div",{className:"",children:T.jsx(dD,{})})]})]})}),T.jsx(uD,{})]})}function pD(){const{cartItems:i,getCartTotal:e,clearCart:t,addToCart:s,decreaseQuantity:o,removeFromCart:u}=Eo(),h=rs(),[m,p]=H.useState({name:""}),[g,v]=H.useState(!1),[A,b]=H.useState(null),N=L=>{const{name:U,value:q}=L.target;p(X=>({...X,[U]:q}))},x=async L=>{L.preventDefault(),v(!0),b(null);const U={customerName:m.name,items:i.map(q=>({id:q.id,name:q.name,quantity:q.quantity,price:q.price})),total:e(),status:"pending",type:"WhatsApp",createdAt:wt.now()};try{await Ub(zn(Jt,"orders"),U);const q=i.map(ae=>"- ".concat(ae.name," (x").concat(ae.quantity,") - EGP ").concat(ae.price*ae.quantity)).join("\n"),X="\nHello Pip Beach Plug! I'd like to place an order:\n\n*Customer Details:*\nName: ".concat(m.name,"\n\n*Order Summary:*\n").concat(q,"\n\n*Total: EGP ").concat(e(),"*\n\nThank you!\n            "),ue="https://wa.me/".concat("201019284462","?text=").concat(encodeURIComponent(X.trim()));t(),h("/success",{state:{whatsappUrl:ue}})}catch(q){console.error("Error creating order: ",q),b("Could not place your order. Please try again."),v(!1)}};return i.length===0&&!g?T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:[T.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your cart is empty!"}),T.jsx("button",{onClick:()=>h("/"),className:"px-6 py-2 bg-[#224ED1] text-white rounded-lg",children:"Go back to shopping"})]}):T.jsxs("div",{className:"max-w-xl mx-auto p-4 sm:p-8 font-sans",children:[T.jsx("h1",{className:"text-4xl font-bold text-center mb-8 font-roc-grotesk-compressed",children:"Confirm Your Order"}),T.jsxs("div",{className:"bg-white border rounded-lg p-6 mb-8",children:[T.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Items"}),T.jsx("ul",{className:"space-y-4",children:i.map(L=>T.jsxs("li",{className:"flex justify-between items-center gap-2",children:[T.jsx("div",{className:"w-2/5",children:T.jsx("p",{className:"font-semibold truncate",title:L.name,children:L.name})}),T.jsxs("div",{className:"flex items-center gap-2 border rounded-lg",children:[T.jsx("button",{onClick:()=>o(L.id),className:"px-3 py-1 text-lg font-bold hover:bg-gray-100 rounded-l-lg",children:"-"}),T.jsx("span",{className:"w-8 text-center",children:L.quantity}),T.jsx("button",{onClick:()=>s(L),className:"px-3 py-1 text-lg font-bold hover:bg-gray-100 rounded-r-lg",children:"+"})]}),T.jsxs("p",{className:"font-semibold w-1/5 text-right",children:["EGP ",L.price*L.quantity]}),T.jsx("button",{onClick:()=>u(L.id),className:"text-gray-400 hover:text-red-600 transition-colors","aria-label":"Remove item",children:T.jsx(aD,{size:18})})]},L.id))}),T.jsxs("div",{className:"border-t mt-4 pt-4 flex justify-between font-bold text-lg",children:[T.jsx("span",{children:"Total"}),T.jsxs("span",{children:["EGP ",e()]})]})]}),T.jsxs("div",{className:"bg-white border rounded-lg p-6",children:[T.jsx("h2",{className:"text-xl font-bold mb-4",children:"Delivery Details"}),T.jsxs("form",{onSubmit:x,className:"space-y-4",children:[T.jsx("input",{type:"text",name:"name",placeholder:"Your Full Name",value:m.name,onChange:N,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#224ED1]",required:!0}),A&&T.jsx("p",{className:"text-red-500 text-sm text-center",children:A}),T.jsx("button",{type:"submit",disabled:g||i.length===0,className:"w-full tracking-wider bg-[#224ED1] text-white text-xl font-bold py-3 rounded-lg hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?"Placing Order...":"Confirm Order & Send via WhatsApp"})]})]})]})}function gD(){var s;const i=rs(),t=(s=or().state)==null?void 0:s.whatsappUrl;return t?T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center p-4 bg-gray-50",children:[T.jsx(ZN,{className:"w-24 h-24 text-green-500 mb-6"}),T.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-3 font-roc-grotesk-compressed",children:"Order Placed!"}),T.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-md",children:"Your order is confirmed. Click the button below to send the details via WhatsApp."}),T.jsx("a",{href:t,className:"w-full max-w-xs tracking-wider bg-green-500 text-white text-xl font-bold py-3 rounded-lg hover:bg-green-600 transition-colors",rel:"noopener noreferrer",children:"Open WhatsApp to Send"}),T.jsx(bu,{to:"/",className:"mt-8 text-gray-500 hover:text-gray-800",children:"Or continue shopping"})]}):T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen text-center p-4 bg-gray-50",children:[T.jsx("h1",{className:"text-2xl font-bold mb-4",children:"No order to send."}),T.jsx("p",{className:"mb-6",children:"Please go back and confirm your order first."}),T.jsx("button",{onClick:()=>i("/confirm"),className:"px-6 py-2 bg-[#224ED1] text-white rounded-lg",children:"Go to Cart"})]})}const yD=()=>{const[i,e]=H.useState(""),[t,s]=H.useState(""),[o,u]=H.useState(""),h=rs(),m=async p=>{p.preventDefault(),u("");try{await Xx(Og,i,t),h("/admin")}catch(g){u("Failed to log in. Please check your credentials."),console.error(g)}};return T.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:T.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-lg",children:[T.jsx("h2",{className:"text-3xl font-bold text-center text-primary mb-6",children:"Admin Login"}),o&&T.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:o}),T.jsxs("form",{onSubmit:m,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),T.jsx("input",{id:"email",type:"email",value:i,onChange:p=>e(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"you@example.com"})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),T.jsx("input",{id:"password",type:"password",value:t,onChange:p=>s(p.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",placeholder:"••••••••"})]}),T.jsx("div",{children:T.jsx("button",{type:"submit",className:"w-full flex bg-blue-500 justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"})})]})]})})};var s2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$1=Qs.createContext&&Qs.createContext(s2),_D=["attr","size","title"];function vD(i,e){if(i==null)return{};var t=ED(i,e),s,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(i);for(o=0;o<u.length;o++)s=u[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(t[s]=i[s])}return t}function ED(i,e){if(i==null)return{};var t={};for(var s in i)if(Object.prototype.hasOwnProperty.call(i,s)){if(e.indexOf(s)>=0)continue;t[s]=i[s]}return t}function Qh(){return Qh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Qh.apply(this,arguments)}function K1(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,s)}return t}function Xh(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K1(Object(t),!0).forEach(function(s){TD(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):K1(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function TD(i,e,t){return e=bD(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function bD(i){var e=wD(i,"string");return typeof e=="symbol"?e:e+""}function wD(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function a2(i){return i&&i.map((e,t)=>Qs.createElement(e.tag,Xh({key:t},e.attr),a2(e.child)))}function jt(i){return e=>Qs.createElement(AD,Qh({attr:Xh({},i.attr)},e),a2(i.child))}function AD(i){var e=t=>{var{attr:s,size:o,title:u}=i,h=vD(i,_D),m=o||t.size||"1em",p;return t.className&&(p=t.className),i.className&&(p=(p?p+" ":"")+i.className),Qs.createElement("svg",Qh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:p,style:Xh(Xh({color:i.color||t.color},t.style),i.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),u&&Qs.createElement("title",null,u),i.children)};return $1!==void 0?Qs.createElement($1.Consumer,null,t=>e(t)):e(s2)}function SD(i){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(i)}function RD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.5 92C469.6 33.1 411.8 0 352.4 0c-27.9 0-56.2 7.3-81.8 22.6L243.1 39c-15.2 9.1-20.1 28.7-11 43.9l32.8 54.9c6 10 16.6 15.6 27.5 15.6 5.6 0 11.2-1.5 16.4-4.5l27.5-16.4c5.1-3.1 10.8-4.5 16.4-4.5 10.9 0 21.5 5.6 27.5 15.6 9.1 15.1 4.1 34.8-11 43.9L15.6 397.6c-15.2 9.1-20.1 28.7-11 43.9l32.8 54.9c6 10 16.6 15.6 27.5 15.6 5.6 0 11.2-1.5 16.4-4.5L428.6 301c71.7-42.9 104.6-133.5 68.9-209zm-177.7 13l-2.5 1.5L296.8 45c9.7-4.7 19.8-8.1 30.3-10.2l20.6 61.8c-9.8.8-19.4 3.3-27.9 8.4zM145.9 431.8l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zm107.5-63.9l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zM364.3 302l-60.5-38.5 30.8-18.3 60.5 38.5-30.8 18.3zm20.4-197.3l46-46c8.4 6.5 16 14.1 22.6 22.6L407.6 127c-5.7-9.3-13.7-16.9-22.9-22.3zm82.1 107.8l-59.5-19.8c3.2-5.3 5.8-10.9 7.4-17.1 1.1-4.5 1.7-9.1 1.8-13.6l60.4 20.1c-2.1 10.4-5.5 20.6-10.1 30.4z"},child:[]}]})(i)}function xD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M298.2 156.6c-52.7-25.7-114.5-10.5-150.2 32.8l55.2 55.2c6.3 6.3 6.3 16.4 0 22.6-3.1 3.1-7.2 4.7-11.3 4.7s-8.2-1.6-11.3-4.7L130.4 217 2.3 479.7c-2.9 6-3.1 13.3 0 19.7 5.4 11.1 18.9 15.7 30 10.3l133.6-65.2-49.2-49.2c-6.3-6.2-6.3-16.4 0-22.6 6.3-6.2 16.4-6.2 22.6 0l57 57 102-49.8c24-11.7 44.5-31.3 57.1-57.1 30.1-61.7 4.5-136.1-57.2-166.2zm92.1-34.9C409.8 81 399.7 32.9 360 0c-50.3 41.7-52.5 107.5-7.9 151.9l8 8c44.4 44.6 110.3 42.4 151.9-7.9-32.9-39.7-81-49.8-121.7-30.3z"},child:[]}]})(i)}function ID(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(i)}function CD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(i)}function ND(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.52 255.82c-69.97-.85-126.47-57.69-126.47-127.86-70.17 0-127-56.49-127.86-126.45-27.26-4.14-55.13.3-79.72 12.82l-69.13 35.22a132.221 132.221 0 0 0-57.79 57.81l-35.1 68.88a132.645 132.645 0 0 0-12.82 80.95l12.08 76.27a132.521 132.521 0 0 0 37.16 72.96l54.77 54.76a132.036 132.036 0 0 0 72.71 37.06l76.71 12.15c27.51 4.36 55.7-.11 80.53-12.76l69.13-35.21a132.273 132.273 0 0 0 57.79-57.81l35.1-68.88c12.56-24.64 17.01-52.58 12.91-79.91zM176 368c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm32-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm160 128c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(i)}function DD(i){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(i)}function OD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function kD(i){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(i)}function PD(i){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(i)}function MD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"},child:[]}]})(i)}function VD(i){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 176c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 48h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(i)}function o2(i){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(i)}function LD(i){return jt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(i)}function UD(i){return jt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M632 352h-48c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zM553.3 87.1c-5.7-3.8-9.3-10-9.3-16.8V8c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v62.3c0 22 10.2 43.4 28.6 55.4 42.2 27.3 67.4 73.8 67.4 124V280c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-30.3c0-65.5-32.4-126.2-86.7-162.6zM432 352H48c-26.5 0-48 21.5-48 48v64c0 26.5 21.5 48 48 48h384c8.8 0 16-7.2 16-16V368c0-8.8-7.2-16-16-16zm-32 112H224v-64h176v64zm87.7-322.4C463.8 125 448 99.3 448 70.3V8c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v66.4c0 43.7 24.6 81.6 60.3 106.7 22.4 15.7 35.7 41.2 35.7 68.6V280c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-30.3c0-43.3-21-83.4-56.3-108.1zM536 352h-48c-4.4 0-8 3.6-8 8v144c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"},child:[]}]})(i)}function jD(i){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"},child:[]}]})(i)}function zD(i){return jt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(i)}function BD(i){return jt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(i)}const qD=[{to:"/admin",icon:T.jsx(zD,{}),text:"Dashboard"},{to:"/admin/smokes",icon:T.jsx(UD,{}),text:"Smokes"},{to:"/admin/snack-attack",icon:T.jsx(ND,{}),text:"Snack Attack"},{to:"/admin/candy-boom",icon:T.jsx(RD,{}),text:"Candy Boom"},{to:"/admin/super-nuts",icon:T.jsx(xD,{}),text:"Super Nuts"},{to:"/admin/vibe-save",icon:T.jsx(jD,{}),text:"Vibe Save"},{to:"/admin/game-on",icon:T.jsx(PD,{}),text:"Game ON"},{to:"/admin/new-order",icon:T.jsx(o2,{}),text:"New Sale"}],HD=()=>{const i=rs(),e=async()=>{await e4(Og),i("/login")};return T.jsxs("div",{className:"w-64 h-screen bg-primary text-black flex flex-col fixed",children:[T.jsx("div",{className:"p-6 text-2xl font-bold border-b border-[#224ED1]",children:"Admin Panel"}),T.jsx("nav",{className:"flex-grow p-4",children:qD.map(t=>T.jsxs(uE,{to:t.to,end:t.to==="/admin",className:({isActive:s})=>"flex items-center p-3 my-2 rounded-lg transition-colors ".concat(s?"bg-white text-primary":"hover:bg-blue-800"),children:[T.jsx("span",{className:"mr-3",children:t.icon}),t.text]},t.to))}),T.jsx("div",{className:"p-4 border-t border-[#224ED1]",children:T.jsxs("button",{onClick:e,className:"flex items-center w-full p-3 rounded-lg hover:bg-blue-800 transition-colors",children:[T.jsx(LD,{className:"mr-3"}),"Logout"]})})]})},FD=()=>T.jsxs("div",{className:"flex bg-gray-100 min-h-screen",children:[T.jsx(HD,{}),T.jsxs("main",{className:"flex-1 ml-64 p-8",children:[T.jsx(VA,{})," "]})]}),GD=[{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"This Month",value:"month"},{label:"Last 6 Months",value:"6months"},{label:"This Year",value:"year"},{label:"All Time",value:"all"}];function YD(i){const e=new Date;let t;const s=e;switch(i){case"today":t=new Date(e.getFullYear(),e.getMonth(),e.getDate());break;case"week":{const o=e.getDay();t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-o);break}case"month":t=new Date(e.getFullYear(),e.getMonth(),1);break;case"6months":t=new Date(e.getFullYear(),e.getMonth()-5,1);break;case"year":t=new Date(e.getFullYear(),0,1);break;default:t=new Date(0)}return{start:t,end:s}}const $D=()=>{const[i,e]=H.useState("today"),[t,s]=H.useState([]),[o,u]=H.useState({totalRevenue:0,totalOrders:0,avgOrderValue:0,mostOrdered:[]}),[h,m]=H.useState(!0),[p,g]=H.useState([]);H.useEffect(()=>{(async()=>{m(!0);const N=zn(Jt,"orders");let x;if(i!=="all"){const{start:L,end:U}=YD(i);x=qr(N,vu("createdAt",">=",L),vu("createdAt","<=",U),iu("createdAt","desc"))}else x=qr(N,iu("createdAt","desc"));try{const L=await Wi(x);s(L.docs.map(U=>({id:U.id,...U.data()})))}catch(L){console.error("Error fetching orders:",L)}finally{m(!1)}})()},[i]),H.useEffect(()=>{(async()=>{const N=["smokes","snack-attack","candy-boom","super-nuts","vibe-save","game-on"],x=[];for(const L of N){const U=await Wi(zn(Jt,L));x.push(...U.docs.map(q=>({id:q.id,...q.data()})))}g(x.filter(L=>L.stock>0&&L.stock<=5))})()},[]),H.useEffect(()=>{let b=0;const N=t.length,x={};t.forEach(q=>{q.type!=="WhatsApp"&&(b+=q.total),q.items.forEach(X=>{x[X.productId]||(x[X.productId]={name:X.name,quantity:0}),x[X.productId].quantity+=X.quantity})});const L=N?b/N:0,U=Object.values(x).sort((q,X)=>X.quantity-q.quantity).slice(0,5);u({totalRevenue:b,totalOrders:N,avgOrderValue:L,mostOrdered:U})},[t]);const v=t.filter(b=>b.type==="WhatsApp"),A=t.filter(b=>b.type==="Cashier");return T.jsxs("div",{children:[T.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard"}),T.jsx("div",{className:"flex space-x-2 mb-6",children:GD.map(b=>T.jsx("button",{onClick:()=>e(b.value),className:"px-4 py-2 rounded ".concat(i===b.value?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),children:b.label},b.value))}),h?T.jsx("div",{className:"text-center py-10",children:"Loading dashboard data..."}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[T.jsx(VD,{className:"text-green-500 text-2xl mr-4"}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),T.jsxs("p",{className:"text-xl font-semibold text-gray-800",children:["EGP ",o.totalRevenue.toLocaleString()]})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[T.jsx(SD,{className:"text-primary text-2xl mr-4"}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-gray-500",children:"Total Orders"}),T.jsx("p",{className:"text-xl font-semibold text-gray-800",children:o.totalOrders})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center",children:[T.jsx(ID,{className:"text-blue-500 text-2xl mr-4"}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-gray-500",children:"Avg. Order Value"}),T.jsxs("p",{className:"text-xl font-semibold text-gray-800",children:["EGP ",o.avgOrderValue.toFixed(2)]})]})]})]}),p.length>0&&T.jsxs("div",{className:"mb-8 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[T.jsxs("div",{className:"flex items-center mb-2 text-yellow-800 font-bold",children:[T.jsx(kD,{className:"mr-2"}),"Low Stock Alerts"]}),T.jsx("ul",{className:"ml-6 list-disc",children:p.map(b=>T.jsxs("li",{children:[b.name," (Stock: ",b.stock,")"]},b.id))})]}),T.jsxs("div",{className:"mb-8  bg-white p-6 rounded-lg shadow-md",children:[T.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Top 5 Most Ordered Products"}),o.mostOrdered.length>0?T.jsx("ul",{className:"ml-6 list-decimal",children:o.mostOrdered.map((b,N)=>T.jsxs("li",{children:[b.name," (",b.quantity," sold)"]},N))}):T.jsx("p",{className:"text-gray-500",children:"No product data for this period."})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Admin/Cashier Orders"}),T.jsxs("table",{className:"w-full text-left",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{className:"py-2",children:"Order ID"}),T.jsx("th",{className:"py-2",children:"Customer"}),T.jsx("th",{className:"py-2",children:"Date"}),T.jsx("th",{className:"py-2",children:"Items"}),T.jsx("th",{className:"py-2",children:"Total"}),T.jsx("th",{className:"py-2",children:"Cashier"})]})}),T.jsx("tbody",{children:A.slice(0,10).map(b=>{var N;return T.jsxs("tr",{className:"border-b",children:[T.jsx("td",{className:"py-2",children:b.id}),T.jsx("td",{className:"py-2",children:b.customerName}),T.jsx("td",{className:"py-2",children:(N=b.createdAt)!=null&&N.toDate?b.createdAt.toDate().toLocaleString():""}),T.jsx("td",{className:"py-2",children:T.jsx("ul",{children:b.items.map((x,L)=>T.jsxs("li",{children:[x.name," x",x.quantity]},L))})}),T.jsxs("td",{className:"py-2",children:["EGP ",b.total]}),T.jsx("td",{className:"py-2",children:b.cashierName||"-"})]},b.id)})})]})]}),T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[T.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Guest Orders (WhatsApp)"}),T.jsxs("table",{className:"w-full text-left",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{className:"py-2",children:"Order ID"}),T.jsx("th",{className:"py-2",children:"Customer"}),T.jsx("th",{className:"py-2",children:"Date"}),T.jsx("th",{className:"py-2",children:"Items"}),T.jsx("th",{className:"py-2",children:"Total"})]})}),T.jsx("tbody",{children:v.slice(0,10).map(b=>{var N;return T.jsxs("tr",{className:"border-b",children:[T.jsx("td",{className:"py-2",children:b.id}),T.jsx("td",{className:"py-2",children:b.customerName}),T.jsx("td",{className:"py-2",children:(N=b.createdAt)!=null&&N.toDate?b.createdAt.toDate().toLocaleString():""}),T.jsx("td",{className:"py-2",children:T.jsx("ul",{children:b.items.map((x,L)=>T.jsxs("li",{children:[x.name," x",x.quantity]},L))})}),T.jsxs("td",{className:"py-2",children:["EGP ",b.total]})]},b.id)})})]})]})]})]})},Q1=({checked:i,onChange:e})=>T.jsx("div",{onClick:()=>e(!i),className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-600 focus:ring-offset-2 ".concat(i?"bg-indigo-600":"bg-gray-200"),children:T.jsx("span",{"aria-hidden":"true",className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(i?"translate-x-5":"translate-x-0")})}),Co=({categoryName:i,collectionName:e})=>{const[t,s]=H.useState([]),[o,u]=H.useState({orderId:"",name:"",price:"",imageFile:null,is_available:!0,is_visible:!0,stock:""}),[h,m]=H.useState(null),[p,g]=H.useState(null),[v,A]=H.useState(!1),[b,N]=H.useState(!1),[x,L]=H.useState({}),[U,q]=H.useState(null),[X,re]=H.useState(!1),[ue,ae]=H.useState(null);H.useEffect(()=>{ye()},[e]),H.useEffect(()=>{if(U){const G=setTimeout(()=>q(null),5e3);return()=>clearTimeout(G)}},[U]);const ye=async()=>{A(!0);try{const G=zn(Jt,e),ce=qr(G,iu("orderId","asc")),O=(await Wi(ce)).docs.map(te=>({id:te.id,...te.data()}));s(O)}catch(G){console.error("Error fetching products:",G),q({type:"error",message:"Failed to fetch ".concat(i,".")})}finally{A(!1)}},k=()=>{window.scrollTo({top:0,behavior:"smooth"}),u({orderId:"",name:"",price:"",imageFile:null,is_available:!0,is_visible:!0,stock:""}),m(null),g(null),L({})},R=()=>{const G={};return o.name.trim()||(G.name="Product name is required."),(!o.price.trim()||isNaN(Number(o.price))||Number(o.price)<=0)&&(G.price="A valid positive price is required."),!p&&!o.imageFile&&(G.image="An image is required for new products."),o.orderId.trim()&&(isNaN(Number(o.orderId))||Number(o.orderId)<0)&&(G.orderId="Order ID must be a positive number."),(o.stock===""||isNaN(Number(o.stock))||!Number.isInteger(Number(o.stock))||Number(o.stock)<0)&&(G.stock="Stock must be a non-negative integer."),L(G),Object.keys(G).length===0},I=G=>{const{name:ce,value:xe}=G.target;u(O=>({...O,[ce]:xe})),x[ce]&&L(O=>({...O,[ce]:void 0}))},P=G=>{G&&(u(ce=>({...ce,imageFile:G})),h&&URL.revokeObjectURL(h),m(URL.createObjectURL(G)),L(ce=>({...ce,image:void 0})))},V=G=>{G.preventDefault(),G.stopPropagation(),N(!1),G.dataTransfer.files&&G.dataTransfer.files[0]&&P(G.dataTransfer.files[0])},z=async G=>{if(G.preventDefault(),!!R()){A(!0);try{if(!o.imageFile)throw new Error("Image file is missing.");const ce=F1(G1,"".concat(e,"_images/").concat(Date.now(),"_").concat(o.imageFile.name));await q1(ce,o.imageFile);const xe=await H1(ce);let O;const te=o.orderId.trim();if(te){const se=parseInt(te,10),me=qr(zn(Jt,e),vu("orderId","==",se));if(!(await Wi(me)).empty)throw new Error("Order ID ".concat(se," is already in use."));O=se}else{const se=qr(zn(Jt,e),iu("orderId","desc"),P1(1)),me=await Wi(se);O=me.empty?1:me.docs[0].data().orderId+1}const oe={orderId:O,name:o.name,price:Number(o.price),imageUrl:xe,is_available:o.is_available,is_visible:o.is_visible,stock:Number(o.stock),createdAt:ru(),updatedAt:ru()};await Ub(zn(Jt,e),oe),q({type:"success",message:"Product added successfully!"}),k(),ye()}catch(ce){console.error(ce),q({type:"error",message:ce.message||"Failed to add product. Please try again."})}finally{A(!1)}}},D=G=>{var ce;window.scrollTo({top:0,behavior:"smooth"}),g(G),u({orderId:String(G.orderId),name:G.name,price:String(G.price),imageFile:null,is_available:G.is_available,is_visible:G.is_visible,stock:String((ce=G.stock)!=null?ce:"")}),m(G.imageUrl),L({})},At=async()=>{if(!(!p||!R())){A(!0);try{let G=Number(o.orderId);const ce=p.orderId;if(o.orderId.trim()&&G!==ce){const oe=qr(zn(Jt,e),vu("orderId","==",G));if(!(await Wi(oe)).empty)throw L(me=>({...me,orderId:"Order ID ".concat(G," is already taken.")})),new Error("Order ID ".concat(G," is already taken."))}else if(!o.orderId.trim()){const oe=qr(zn(Jt,e),iu("orderId","desc"),P1(1)),se=await Wi(oe);G=se.empty?1:se.docs[0].data().orderId+1}let xe=p.imageUrl;if(o.imageFile){const oe=F1(G1,"".concat(e,"_images/").concat(Date.now(),"_").concat(o.imageFile.name));await q1(oe,o.imageFile),xe=await H1(oe)}const O={orderId:G,name:o.name,price:Number(o.price),imageUrl:xe,is_available:o.is_available,is_visible:o.is_visible,stock:Number(o.stock),updatedAt:ru()},te=_u(Jt,e,p.id);await x6(te,O),q({type:"success",message:"Product updated successfully!"}),k(),ye()}catch(G){console.error(G),q({type:"error",message:G.message||"Failed to update product."})}finally{A(!1)}}},tt=G=>{ae(G),re(!0)},W=async()=>{if(ue){A(!0);try{await I6(_u(Jt,e,ue)),q({type:"success",message:"Product deleted successfully."}),ye()}catch(G){console.error(G),q({type:"error",message:"Failed to delete product."})}finally{A(!1),re(!1),ae(null)}}};return T.jsxs("div",{className:"space-y-8",children:[U&&T.jsxs("div",{className:"flex items-center p-4 rounded-lg ".concat(U.type==="success"?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:[U.type==="success"?T.jsx(CD,{className:"mr-3"}):T.jsx(OD,{className:"mr-3"}),T.jsx("span",{className:"font-medium",children:U.message})]}),T.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-sm",children:[T.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 border-b pb-4",children:p?"Edit Product":"Add New ".concat(i)}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[T.jsxs("div",{className:"md:col-span-1",children:[T.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Product Image"}),T.jsxs("div",{onDragEnter:G=>{G.preventDefault(),G.stopPropagation(),N(!0)},onDragLeave:G=>{G.preventDefault(),G.stopPropagation(),N(!1)},onDragOver:G=>{G.preventDefault(),G.stopPropagation()},onDrop:V,className:"relative border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors flex flex-col items-center justify-center aspect-square\n                                ".concat(b?"border-indigo-600 bg-indigo-50":x.image?"border-red-500":"border-gray-300 hover:border-indigo-500"),children:[T.jsx("input",{type:"file",accept:"image/*",onChange:G=>P(G.target.files?G.target.files[0]:null),className:"hidden",id:"fileInput"}),T.jsx("label",{htmlFor:"fileInput",className:"cursor-pointer flex flex-col items-center justify-center w-full h-full",children:h?T.jsx("img",{src:h,alt:"Preview",className:"w-full h-full rounded-md object-contain"}):T.jsxs("div",{className:"text-slate-500 space-y-2",children:[T.jsx(MD,{className:"mx-auto h-12 w-12 text-slate-400"}),T.jsx("p",{children:"Drag & drop image here, or"}),T.jsx("p",{className:"text-indigo-600 font-semibold",children:"click to browse"})]})})]}),x.image&&T.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.image})]}),T.jsxs("form",{onSubmit:G=>G.preventDefault(),className:"md:col-span-2 space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Product Name"}),T.jsx("input",{id:"name",type:"text",name:"name",value:o.name,onChange:I,placeholder:"e.g., Classic White Tee",className:"w-full p-3 border rounded-lg transition-shadow focus:outline-none focus:ring-2 ".concat(x.name?"border-red-400 ring-red-200":"border-slate-300 focus:ring-indigo-500 focus:border-indigo-500"),required:!0}),x.name&&T.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.name})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-slate-700 mb-1",children:"Price ($)"}),T.jsx("input",{id:"price",type:"number",name:"price",value:o.price,onChange:I,placeholder:"e.g., 29.99",step:"0.01",className:"w-full p-3 border rounded-lg transition-shadow focus:outline-none focus:ring-2 ".concat(x.price?"border-red-400 ring-red-200":"border-slate-300 focus:ring-indigo-500 focus:border-indigo-500"),required:!0}),x.price&&T.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.price})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"stock",className:"block text-sm font-medium text-slate-700 mb-1",children:"Stock"}),T.jsx("input",{id:"stock",type:"number",name:"stock",value:o.stock,onChange:I,placeholder:"e.g., 100",min:"0",step:"1",className:"w-full p-3 border rounded-lg transition-shadow focus:outline-none focus:ring-2 ".concat(x.stock?"border-red-400 ring-red-200":"border-slate-300 focus:ring-indigo-500 focus:border-indigo-500"),required:!0}),x.stock&&T.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.stock})]}),T.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[T.jsx("label",{className:"font-medium text-slate-700",children:"Available for purchase"}),T.jsx(Q1,{checked:o.is_available,onChange:G=>u(ce=>({...ce,is_available:G}))})]}),T.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200",children:[T.jsx("label",{className:"font-medium text-slate-700",children:"Visible on site"}),T.jsx(Q1,{checked:o.is_visible,onChange:G=>u(ce=>({...ce,is_visible:G}))})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"orderId",className:"block text-sm font-medium text-slate-700 mb-1",children:"Order ID (for sorting)"}),T.jsx("input",{id:"orderId",type:"number",name:"orderId",value:o.orderId,onChange:I,placeholder:"e.g., 10 (auto-increments if blank for new products)",className:"w-full p-3 border rounded-lg transition-shadow focus:outline-none focus:ring-2 ".concat(x.orderId?"border-red-400 ring-red-200":"border-slate-300 focus:ring-indigo-500 focus:border-indigo-500")}),x.orderId&&T.jsx("p",{className:"text-red-600 text-sm mt-1",children:x.orderId})]}),T.jsx("div",{className:"flex justify-end space-x-4 pt-4",children:p?T.jsxs(T.Fragment,{children:[T.jsx("button",{type:"button",onClick:k,className:"px-6 py-2 text-sm font-semibold text-slate-800 bg-white rounded-lg border border-slate-300 hover:bg-slate-50 disabled:opacity-50",children:"Cancel"}),T.jsx("button",{type:"button",onClick:At,disabled:v,className:"px-6 py-2 text-sm font-semibold bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-400",children:v?"Saving...":"Update Product"})]}):T.jsxs("button",{type:"button",onClick:z,disabled:v,className:"px-6 py-2 text-sm font-semibold bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-400 flex items-center",children:[T.jsx(o2,{className:"mr-2"})," ",v?"Adding...":"Add Product"]})})]})]})]}),T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(G=>T.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden flex flex-col group relative transition-all hover:shadow-lg",children:[T.jsxs("div",{className:"absolute top-2 right-2 z-20 flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[T.jsx("button",{onClick:()=>D(G),className:"p-2 bg-white/80 backdrop-blur-sm text-slate-600 hover:text-indigo-600 hover:bg-white rounded-full shadow-md transition-colors",children:T.jsx(DD,{size:16})}),T.jsx("button",{onClick:()=>tt(G.id),className:"p-2 bg-white/80 backdrop-blur-sm text-slate-600 hover:text-red-600 hover:bg-white rounded-full shadow-md transition-colors",children:T.jsx(BD,{size:16})})]}),T.jsx("div",{className:"absolute top-2 left-2 bg-indigo-600 text-white text-sm font-bold w-10 h-10 flex items-center justify-center rounded-full shadow-lg z-10",children:G.orderId}),T.jsx("img",{src:G.imageUrl,alt:G.name,className:"w-full h-52 object-contain"}),T.jsxs("div",{className:"p-4 flex-grow flex flex-col",children:[T.jsx("h3",{className:"text-lg font-semibold text-slate-800 flex-grow pt-2",children:G.name}),T.jsxs("p",{className:"text-xl font-bold text-indigo-600 mt-2",children:["$",G.price.toFixed(2)]}),T.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Stock: ",G.stock]}),T.jsxs("div",{className:"flex items-center mt-3 space-x-2",children:[T.jsx("span",{className:"px-2.5 py-0.5 text-xs font-medium rounded-full ".concat(G.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:G.is_available?"Available":"Out of Stock"}),T.jsx("span",{className:"px-2.5 py-0.5 text-xs font-medium rounded-full ".concat(G.is_visible?"bg-sky-100 text-sky-800":"bg-slate-100 text-slate-600"),children:G.is_visible?"Visible":"Hidden"})]})]})]},G.id))}),X&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50",children:T.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full mx-4 transform transition-all",children:[T.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:"Confirm Deletion"}),T.jsx("p",{className:"text-slate-600 mb-6",children:"Are you sure you want to delete this product? This action cannot be undone."}),T.jsxs("div",{className:"flex justify-end space-x-3",children:[T.jsx("button",{onClick:()=>re(!1),className:"px-4 py-2 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-md hover:bg-slate-50",children:"Cancel"}),T.jsx("button",{onClick:W,className:"px-4 py-2 text-sm font-semibold bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete"})]})]})})]})},KD=()=>T.jsx(Co,{categoryName:"Smokes",collectionName:"smokes"}),QD=()=>T.jsx(Co,{categoryName:"Snack Attack",collectionName:"snack-attack"}),XD=()=>T.jsx(Co,{categoryName:"Candy Boom",collectionName:"candy-boom"}),WD=()=>T.jsx(Co,{categoryName:"Super Nuts",collectionName:"super-nuts"}),ZD=()=>T.jsx(Co,{categoryName:"Vibe Save",collectionName:"vibe-save"}),JD=()=>T.jsx(Co,{categoryName:"Game ON",collectionName:"game-on"}),l2=()=>H.useContext(n2),eO=({children:i})=>{const{currentUser:e}=l2();return e?T.jsx(T.Fragment,{children:i}):T.jsx(MA,{to:"/login"})};function tO({isOpen:i}){return T.jsx("div",{className:"w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[12px] border-t-[#224ED1] transition-transform duration-300 ease-in-out ".concat(i?"rotate-180":"rotate-0")})}const nO=i=>i.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),iO=()=>{const[i,e]=H.useState({}),[t,s]=H.useState({}),{addToCart:o,getCartItemCount:u,getCartTotal:h}=Eo(),m=rs();H.useEffect(()=>{(async()=>{const v=["smokes","snack-attack","candy-boom","super-nuts","vibe-save","game-on"],A={},b={};for(const N of v){const x=qr(zn(Jt,N),vu("is_visible","==",!0)),U=(await Wi(x)).docs.map(q=>({id:q.id,...q.data(),collectionName:N}));U.length>0&&(A[N]=U,b[N]=!1)}e(A),s(b)})()},[]);const p=g=>{s(v=>({...v,[g]:!v[g]}))};return T.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[T.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Cashier: New Sale"}),T.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([g,v])=>T.jsxs("div",{children:[T.jsxs("button",{title:"Toggle Collection",onClick:()=>p(g),className:"w-full flex justify-between items-center py-2 text-left focus:outline-none","aria-expanded":t[g],children:[T.jsx("h2",{className:"text-4xl font-extrabold tracking-tight",children:nO(g)}),T.jsx(tO,{isOpen:!!t[g]})]}),T.jsx("hr",{className:"border-t border-black mb-4"}),t[g]&&T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 animate-fade-in",children:v.map(A=>T.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col",children:[T.jsx("img",{src:A.imageUrl,alt:A.name,className:"h-40 object-contain mb-2"}),T.jsx("h2",{className:"font-bold text-lg",children:A.name}),T.jsxs("p",{className:"text-indigo-600 font-bold",children:["EGP ",A.price]}),T.jsxs("p",{className:"text-sm text-gray-600",children:["Stock: ",A.stock]}),T.jsx("button",{className:"mt-auto px-4 py-2 rounded ".concat(A.stock>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),onClick:()=>o(A),disabled:A.stock<=0,children:A.stock>0?"Add to Cart":"Out of Stock"})]},A.id))})]},g))}),u()>0&&T.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black text-white p-4 shadow-lg animate-slide-up",children:T.jsxs("div",{className:"max-w-md mx-auto lg:max-w-6xl flex justify-between items-center",children:[T.jsxs("div",{children:[T.jsxs("p",{className:"font-bold",children:[u()," item(s) in cart"]}),T.jsxs("p",{className:"text-sm",children:["Total: EGP ",h()]})]}),T.jsx("button",{onClick:()=>m("/admin/confirm-order"),className:"px-6 py-2 font-bold bg-[#224ED1] rounded-lg hover:bg-blue-600 transition-colors",children:"Proceed to Order"})]})})]})};function rO(){const{cartItems:i,getCartTotal:e,clearCart:t,addToCart:s,decreaseQuantity:o}=Eo(),u=rs(),{currentUser:h}=l2(),[m,p]=H.useState({name:""}),[g,v]=H.useState(!1),[A,b]=H.useState(null),[N,x]=H.useState(null),L=q=>{const{name:X,value:re}=q.target;p(ue=>({...ue,[X]:re}))},U=async q=>{q.preventDefault(),v(!0),b(null),x(null);try{await O6(Jt,async X=>{for(const ae of i){const ye=_u(Jt,ae.collectionName,ae.id),k=await X.get(ye);if(!k.exists())throw new Error("Product ".concat(ae.name," not found."));const R=k.data();if(R.stock<ae.quantity)throw new Error("Item ".concat(ae.name," is out of stock."));X.update(ye,{stock:R.stock-ae.quantity,updatedAt:ru()})}const re={customerName:m.name||"In-Store Customer",items:i.map(ae=>({productId:ae.id,name:ae.name,price:ae.price,quantity:ae.quantity})),total:e(),createdAt:ru(),type:"Cashier",cashierId:h==null?void 0:h.uid,cashierName:(h==null?void 0:h.displayName)||(h==null?void 0:h.email)||""},ue=zn(Jt,"orders");X.set(_u(ue),re)}),t(),x("Order successfully created!"),setTimeout(()=>u("/admin"),1500)}catch(X){b(X.message||"Could not complete sale.")}finally{v(!1)}};return i.length===0&&!g?T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:[T.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Your cart is empty!"}),T.jsx("button",{onClick:()=>u("/admin/new-order"),className:"px-6 py-2 bg-[#224ED1] text-white rounded-lg",children:"Go back to products"})]}):T.jsxs("div",{className:"max-w-xl mx-auto p-4 sm:p-8 font-sans",children:[T.jsx("h1",{className:"text-4xl font-bold text-center mb-8 font-roc-grotesk-compressed",children:"Confirm Sale"}),T.jsxs("div",{className:"bg-white border rounded-lg p-6 mb-8",children:[T.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Items"}),T.jsx("ul",{children:i.map(q=>T.jsxs("li",{className:"flex justify-between items-center py-2 border-b gap-2",children:[T.jsx("div",{className:"w-2/5",children:T.jsx("p",{className:"font-semibold truncate",title:q.name,children:q.name})}),T.jsxs("div",{className:"flex items-center gap-2 border rounded-lg",children:[T.jsx("button",{onClick:()=>o(q.id),className:"px-3 py-1 text-lg font-bold hover:bg-gray-100 rounded-l-lg",children:"-"}),T.jsx("span",{className:"w-8 text-center",children:q.quantity}),T.jsx("button",{onClick:()=>s(q),className:"px-3 py-1 text-lg font-bold hover:bg-gray-100 rounded-r-lg",children:"+"})]}),T.jsxs("span",{className:"font-semibold w-1/5 text-right",children:["EGP ",q.price*q.quantity]})]},q.id))}),T.jsxs("div",{className:"flex justify-between mt-4 font-bold",children:[T.jsx("span",{children:"Total:"}),T.jsxs("span",{children:["EGP ",e()]})]})]}),T.jsxs("form",{onSubmit:U,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"customerName",className:"block text-sm font-medium text-slate-700 mb-1",children:"Customer Name"}),T.jsx("input",{id:"customerName",name:"name",type:"text",value:m.name,onChange:L,placeholder:"In-Store Customer",className:"w-full p-3 border rounded-lg"})]}),A&&T.jsx("p",{className:"text-red-600 text-sm",children:A}),N&&T.jsx("p",{className:"text-green-600 text-sm",children:N}),T.jsx("button",{type:"submit",disabled:g,className:"w-full py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors",children:g?"Processing...":"Complete Sale"})]})]})}function sO(){return T.jsx(GN,{children:T.jsx(yS,{children:T.jsx(lS,{children:T.jsxs(UA,{children:[T.jsx(ln,{path:"/",element:T.jsx(mD,{})}),T.jsx(ln,{path:"/confirm",element:T.jsx(pD,{})}),T.jsx(ln,{path:"/success",element:T.jsx(gD,{})}),T.jsx(ln,{path:"/login",element:T.jsx(yD,{})}),T.jsxs(ln,{path:"/admin",element:T.jsx(eO,{children:T.jsx(FD,{})}),children:[T.jsx(ln,{index:!0,element:T.jsx($D,{})}),T.jsx(ln,{path:"smokes",element:T.jsx(KD,{})}),T.jsx(ln,{path:"snack-attack",element:T.jsx(QD,{})}),T.jsx(ln,{path:"candy-boom",element:T.jsx(XD,{})}),T.jsx(ln,{path:"super-nuts",element:T.jsx(WD,{})}),T.jsx(ln,{path:"vibe-save",element:T.jsx(ZD,{})}),T.jsx(ln,{path:"game-on",element:T.jsx(JD,{})}),T.jsx(ln,{path:"new-order",element:T.jsx(iO,{})}),T.jsx(ln,{path:"confirm-order",element:T.jsx(rO,{})})]})]})})})})}Hw.createRoot(document.getElementById("root")).render(T.jsx(H.StrictMode,{children:T.jsx(sO,{})}));export{aO as __vite_legacy_guard};
